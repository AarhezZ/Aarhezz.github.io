(self.webpackChunkdrsimivirtual=self.webpackChunkdrsimivirtual||[]).push([[179],{8255:Ye=>{function Ee(L){return Promise.resolve().then(()=>{var E=new Error("Cannot find module '"+L+"'");throw E.code="MODULE_NOT_FOUND",E})}Ee.keys=()=>[],Ee.resolve=Ee,Ee.id=8255,Ye.exports=Ee},3018:(Ye,Ee,L)=>{"use strict";L.d(Ee,{deG:()=>gc,tb:()=>jC,AFp:()=>VC,ip1:()=>W0,CZH:()=>bf,hGG:()=>KA,z2F:()=>Og,sBO:()=>lS,Sil:()=>vd,_Vd:()=>Bo,EJc:()=>Cf,SBq:()=>no,qLn:()=>fu,vpe:()=>br,gxx:()=>Ea,tBr:()=>_c,XFs:()=>De,OlP:()=>Jt,zs3:()=>an,ZZ4:()=>cf,aQg:()=>Oy,soG:()=>Rg,YKP:()=>ZE,v3s:()=>d_,h0i:()=>sd,PXZ:()=>PA,R0b:()=>Xr,FiY:()=>Ui,Lbi:()=>UC,g9A:()=>vA,Qsj:()=>UE,FYo:()=>rd,JOm:()=>x,Tiy:()=>Ny,q3G:()=>on,tp0:()=>ha,EAV:()=>VA,Rgc:()=>Bc,dDg:()=>X0,DyG:()=>mc,q4F:()=>ug,GfV:()=>BE,s_b:()=>fg,ifc:()=>mt,eFA:()=>oo,G48:()=>MA,X6Q:()=>zC,_c5:()=>lD,VLi:()=>tR,c2e:()=>z0,zSh:()=>Sp,wAp:()=>tt,vHH:()=>he,EiD:()=>ap,mCW:()=>bl,qzn:()=>ci,JVY:()=>tp,pB0:()=>im,eBb:()=>O_,L6k:()=>rm,LAX:()=>Ic,cg1:()=>vE,Tjo:()=>BA,kL8:()=>EE,yhl:()=>wc,dqk:()=>$,sIi:()=>Ll,CqO:()=>ly,QGY:()=>$p,F4k:()=>cy,RDi:()=>os,AaK:()=>Z,z3N:()=>ms,TTD:()=>Gu,xp6:()=>kw,uIk:()=>Fp,Suo:()=>bC,Xpm:()=>lo,lG2:()=>Id,Yz7:()=>Et,cJS:()=>Tr,oAB:()=>Wo,Yjl:()=>Ss,Y36:()=>jh,_UZ:()=>Lo,qZA:()=>Du,TgZ:()=>Ze,Ikx:()=>vy,LFG:()=>Tn,$8M:()=>Nr,NdJ:()=>dy,CRH:()=>CC,ALo:()=>x0,lcZ:()=>R0,Q6J:()=>Cu,iGM:()=>O0,LSH:()=>Bi,kYT:()=>fo,YNc:()=>DI,_uU:()=>Jp,hij:()=>my});var E=L(9765),X=L(5319),k=L(7574),ce=L(6682),te=L(2441);var ue=L(1307);function ee(){return new E.xQ}function V(r){for(let i in r)if(r[i]===V)return i;throw Error("Could not find renamed property on target object.")}function Z(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Z).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function se(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const we=V({__forward_ref__:V});function de(r){return r.__forward_ref__=de,r.toString=function(){return Z(this())},r}function q(r){return function(r){return"function"==typeof r&&r.hasOwnProperty(we)&&r.__forward_ref__===de}(r)?r():r}class he extends Error{constructor(i,o){super(function(r,i){return`${r?`NG0${r}: `:""}${i}`}(i,o)),this.code=i}}function Pe(r){return"string"==typeof r?r:null==r?"":String(r)}function Tt(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Pe(r)}function _t(r,i){const o=i?` in ${i}`:"";throw new he("201",`No provider for ${Tt(r)} found${o}`)}function un(r,i){null==r&&function(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function Et(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Tr(r){return{providers:r.providers||[],imports:r.imports||[]}}function dr(r){return Ce(r,Rt)||Ce(r,uo)}function Ce(r,i){return r.hasOwnProperty(i)?r[i]:null}function gi(r){return r&&(r.hasOwnProperty(Ur)||r.hasOwnProperty(et))?r[Ur]:null}const Rt=V({\u0275prov:V}),Ur=V({\u0275inj:V}),uo=V({ngInjectableDef:V}),et=V({ngInjectorDef:V});var De=(()=>((De=De||{})[De.Default=0]="Default",De[De.Host=1]="Host",De[De.Self=2]="Self",De[De.SkipSelf=4]="SkipSelf",De[De.Optional=8]="Optional",De))();let Lt;function pn(r){const i=Lt;return Lt=r,i}function Ot(r,i,o){const u=dr(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&De.Optional?null:void 0!==i?i:void _t(Z(r),"Injector")}function We(r){return{toString:r}.toString()}var Sr=(()=>((Sr=Sr||{})[Sr.OnPush=0]="OnPush",Sr[Sr.Default=1]="Default",Sr))(),mt=(()=>((mt=mt||{})[mt.Emulated=0]="Emulated",mt[mt.None=2]="None",mt[mt.ShadowDom=3]="ShadowDom",mt))();const hr="undefined"!=typeof globalThis&&globalThis,$u="undefined"!=typeof window&&window,G="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$=hr||"undefined"!=typeof global&&global||$u||G,Ve={},Le=[],Wt=V({\u0275cmp:V}),Fn=V({\u0275dir:V}),cn=V({\u0275pipe:V}),Ar=V({\u0275mod:V}),At=V({\u0275loc:V}),sn=V({\u0275fac:V}),Si=V({__NG_ELEMENT_ID__:V});let Xc=0;function lo(r){return We(()=>{const o={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Sr.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||Le,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||mt.Emulated,id:"c",styles:r.styles||Le,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,d=r.features,g=r.pipes;return u.id+=Xc++,u.inputs=qo(r.inputs,o),u.outputs=qo(r.outputs),d&&d.forEach(y=>y(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(ho):null,u.pipeDefs=g?()=>("function"==typeof g?g():g).map(tl):null,u})}function ho(r){return Ln(r)||function(r){return r[Fn]||null}(r)}function tl(r){return function(r){return r[cn]||null}(r)}const ni={};function Wo(r){return We(()=>{const i={type:r.type,bootstrap:r.bootstrap||Le,declarations:r.declarations||Le,imports:r.imports||Le,exports:r.exports||Le,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(ni[r.id]=r.type),i})}function fo(r,i){return We(()=>{const o=tr(r,!0);o.declarations=i.declarations||Le,o.imports=i.imports||Le,o.exports=i.exports||Le})}function qo(r,i){if(null==r)return Ve;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),o[c]=u,i&&(i[c]=d)}return o}const Id=lo;function Ss(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Ln(r){return r[Wt]||null}function tr(r,i){const o=r[Ar]||null;if(!o&&!0===i)throw new Error(`Type ${Z(r)} does not have '\u0275mod' property.`);return o}function Ri(r){return Array.isArray(r)&&"object"==typeof r[1]}function mn(r){return Array.isArray(r)&&!0===r[1]}function Ns(r){return 0!=(8&r.flags)}function Pa(r){return 2==(2&r.flags)}function Yo(r){return 1==(1&r.flags)}function ii(r){return null!==r.template}function nl(r){return 0!=(512&r[2])}function yn(r,i){return r.hasOwnProperty(sn)?r[sn]:null}class Ni{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Gu(){return Fa}function Fa(r){return r.type.prototype.ngOnChanges&&(r.setInput=kf),Pd}function Pd(){const r=La(this),i=null==r?void 0:r.current;if(i){const o=r.previous;if(o===Ve)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function kf(r,i,o,u){const c=La(r)||function(r,i){return r[ol]=i}(r,{previous:Ve,current:null}),d=c.current||(c.current={}),g=c.previous,y=this.declaredInputs[o],w=g[y];d[y]=new Ni(w&&w.currentValue,i,g===Ve),r[u]=i}Gu.ngInherit=!0;const ol="__ngSimpleChanges__";function La(r){return r[ol]||null}let Va;function os(r){Va=r}function Zt(r){return!!r.listen}const Ua={createRenderer:(r,i)=>void 0!==Va?Va:"undefined"!=typeof document?document:void 0};function wt(r){for(;Array.isArray(r);)r=r[0];return r}function xr(r,i){return wt(i[r.index])}function Pi(r,i){return r.data[i]}function nr(r,i){const o=i[r];return Ri(o)?o:o[0]}function zu(r){return 4==(4&r[2])}function ta(r){return 128==(128&r[2])}function as(r,i){return null==i?null:r[i]}function Ba(r){r[18]=0}function Ku(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const nt={lFrame:rc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Zu(){return nt.bindingsEnabled}function Ie(){return nt.lFrame.lView}function vt(){return nt.lFrame.tView}function _n(){let r=Qu();for(;null!==r&&64===r.type;)r=r.parent;return r}function Qu(){return nt.lFrame.currentTNode}function si(r,i){const o=nt.lFrame;o.currentTNode=r,o.isParent=i}function $a(){return nt.lFrame.isParent}function ls(){return nt.isInCheckNoChangesMode}function Oi(r){nt.isInCheckNoChangesMode=r}function Fs(){return nt.lFrame.bindingIndex++}function ec(r,i){const o=nt.lFrame;o.bindingIndex=o.bindingRootIndex=r,tc(i)}function tc(r){nt.lFrame.currentDirectiveIndex=r}function Ud(){return nt.lFrame.currentQueryIndex}function nc(r){nt.lFrame.currentQueryIndex=r}function Lf(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function jd(r,i,o){if(o&De.SkipSelf){let c=i,d=r;for(;!(c=c.parent,null!==c||o&De.Host||(c=Lf(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;i=c,r=d}const u=nt.lFrame=Bd();return u.currentTNode=i,u.lView=r,!0}function ds(r){const i=Bd(),o=r[1];nt.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Bd(){const r=nt.lFrame,i=null===r?null:r.child;return null===i?rc(r):i}function rc(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Ha(){const r=nt.lFrame;return nt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const $g=Ha;function ic(){const r=Ha();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Rr(){return nt.lFrame.selectedIndex}function Br(r){nt.lFrame.selectedIndex=r}function ln(){const r=nt.lFrame;return Pi(r.tView,r.selectedIndex)}function sc(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const d=r.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:y,ngAfterViewInit:w,ngAfterViewChecked:C,ngOnDestroy:S}=d;g&&(r.contentHooks||(r.contentHooks=[])).push(-o,g),y&&((r.contentHooks||(r.contentHooks=[])).push(o,y),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,y)),w&&(r.viewHooks||(r.viewHooks=[])).push(-o,w),C&&((r.viewHooks||(r.viewHooks=[])).push(o,C),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,C)),null!=S&&(r.destroyHooks||(r.destroyHooks=[])).push(o,S)}}function qa(r,i,o){wo(r,i,3,o)}function za(r,i,o,u){(3&r[2])===o&&wo(r,i,o,u)}function oc(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function wo(r,i,o,u){const d=null!=u?u:-1,g=i.length-1;let y=0;for(let w=void 0!==u?65535&r[18]:0;w<g;w++)if("number"==typeof i[w+1]){if(y=i[w],null!=u&&y>=u)break}else i[w]<0&&(r[18]+=65536),(y<d||-1==d)&&(ac(r,o,i,w),r[18]=(4294901760&r[18])+w+2),w++}function ac(r,i,o,u){const c=o[u]<0,d=o[u+1],y=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{d.call(y)}finally{}}}else try{d.call(y)}finally{}}class Ka{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Za(r,i,o){const u=Zt(r);let c=0;for(;c<o.length;){const d=o[c];if("number"==typeof d){if(0!==d)break;c++;const g=o[c++],y=o[c++],w=o[c++];u?r.setAttribute(i,y,w,g):i.setAttributeNS(g,y,w)}else{const g=d,y=o[++c];cc(g)?u&&r.setProperty(i,g,y):u?r.setAttribute(i,g,y):i.setAttribute(g,y),c++}}return c}function uc(r){return 3===r||4===r||6===r}function cc(r){return 64===r.charCodeAt(0)}function _i(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||lc(r,o,c,null,-1===o||2===o?i[++u]:null)}}return r}function lc(r,i,o,u,c){let d=0,g=r.length;if(-1===i)g=-1;else for(;d<r.length;){const y=r[d++];if("number"==typeof y){if(y===i){g=-1;break}if(y>i){g=d-1;break}}}for(;d<r.length;){const y=r[d];if("number"==typeof y)break;if(y===o){if(null===u)return void(null!==c&&(r[d+1]=c));if(u===r[d+1])return void(r[d+2]=c)}d++,null!==u&&d++,null!==c&&d++}-1!==g&&(r.splice(g,0,i),d=g+1),r.splice(d++,0,o),null!==u&&r.splice(d++,0,u),null!==c&&r.splice(d++,0,c)}function dc(r){return-1!==r}function Ya(r){return 32767&r}function Qa(r,i){let o=function(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let hc=!0;function bo(r){const i=hc;return hc=r,i}let Qe=0;function Co(r,i){const o=Vs(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,pr(u.data,r),pr(i,null),pr(u.blueprint,null));const c=fc(r,i),d=r.injectorIndex;if(dc(c)){const g=Ya(c),y=Qa(c,i),w=y[1].data;for(let C=0;C<8;C++)i[d+C]=y[g+C]|w[g+C]}return i[d+8]=c,d}function pr(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Vs(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function fc(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){const d=c[1],g=d.type;if(u=2===g?d.declTNode:1===g?c[6]:null,null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function tn(r,i,o){!function(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Si)&&(u=o[Si]),null==u&&(u=o[Si]=Qe++);const c=255&u;i.data[r+(c>>5)]|=1<<c}(r,i,o)}function Hf(r,i,o){if(o&De.Optional)return r;_t(i,"NodeInjector")}function oa(r,i,o,u){if(o&De.Optional&&void 0===u&&(u=null),0==(o&(De.Self|De.Host))){const c=r[9],d=pn(void 0);try{return c?c.get(i,u,o&De.Optional):Ot(i,u,o&De.Optional)}finally{pn(d)}}return Hf(u,i,o)}function vi(r,i,o,u=De.Default,c){if(null!==r){const d=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Si)?r[Si]:void 0;return"number"==typeof i?i>=0?255&i:ll:i}(o);if("function"==typeof d){if(!jd(i,r,u))return u&De.Host?Hf(c,o,u):oa(i,o,u,c);try{const g=d(u);if(null!=g||u&De.Optional)return g;_t(o)}finally{$g()}}else if("number"==typeof d){let g=null,y=Vs(r,i),w=-1,C=u&De.Host?i[16][6]:null;for((-1===y||u&De.SkipSelf)&&(w=-1===y?fc(r,i):i[y+8],-1!==w&&Us(u,!1)?(g=i[1],y=Ya(w),i=Qa(w,i)):y=-1);-1!==y;){const S=i[1];if(Gf(d,y,S.data)){const N=pc(y,i,o,g,u,C);if(N!==Cn)return N}w=i[y+8],-1!==w&&Us(u,i[1].data[y+8]===C)&&Gf(d,y,i)?(g=S,y=Ya(w),i=Qa(w,i)):y=-1}}}return oa(i,o,u,c)}const Cn={};function ll(){return new fs(_n(),Ie())}function pc(r,i,o,u,c,d){const g=i[1],y=g.data[r+8],S=aa(y,g,o,null==u?Pa(y)&&hc:u!=g&&0!=(3&y.type),c&De.Host&&d===y);return null!==S?Do(i,g,S,y):Cn}function aa(r,i,o,u,c){const d=r.providerIndexes,g=i.data,y=1048575&d,w=r.directiveStart,S=d>>20,P=c?y+S:r.directiveEnd;for(let j=u?y:y+S;j<P;j++){const W=g[j];if(j<w&&o===W||j>=w&&W.type===o)return j}if(c){const j=g[w];if(j&&ii(j)&&j.type===o)return w}return null}function Do(r,i,o,u){let c=r[o];const d=i.data;if(function(r){return r instanceof Ka}(c)){const g=c;g.resolving&&function(r,i){throw new he("200",`Circular dependency in DI detected for ${r}`)}(Tt(d[o]));const y=bo(g.canSeeViewProviders);g.resolving=!0;const w=g.injectImpl?pn(g.injectImpl):null;jd(r,u,De.Default);try{c=r[o]=g.factory(void 0,d,r,u),i.firstCreatePass&&o>=u.directiveStart&&function(r,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:d}=i.type.prototype;if(u){const g=Fa(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,g)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,d))}(o,d[o],i)}finally{null!==w&&pn(w),bo(y),g.resolving=!1,$g()}}return c}function Gf(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function Us(r,i){return!(r&De.Self||r&De.Host&&i)}class fs{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return vi(this._tNode,this._lView,i,u,o)}}function Nr(r){return function(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const d=o[c];if(uc(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(d===i)return o[c+1];c+=2}}}return null}(_n(),r)}const js="__parameters__";function ca(r,i,o){return We(()=>{const u=function(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(i);function c(...d){if(this instanceof c)return u.apply(this,d),this;const g=new c(...d);return y.annotation=g,y;function y(w,C,S){const N=w.hasOwnProperty(js)?w[js]:Object.defineProperty(w,js,{value:[]})[js];for(;N.length<=S;)N.push(null);return(N[S]=N[S]||[]).push(g),w}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class Jt{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Et({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gc=new Jt("AnalyzeForEntryComponents"),mc=Function;function ai(r,i){void 0===i&&(i=r);for(let o=0;o<r.length;o++){let u=r[o];Array.isArray(u)?(i===r&&(i=r.slice(0,o)),ai(u,i)):i!==r&&i.push(u)}return i}function ui(r,i){r.forEach(o=>Array.isArray(o)?ui(o,i):i(o))}function Li(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function To(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}const Hs={},So="__NG_DI_FLAG__",Vi="ngTempTokenPath",Ao=/\n/gm,ml="__source",nu=V({provide:String,useValue:V});let ru;function yc(r){const i=ru;return ru=r,i}function Zf(r,i=De.Default){if(void 0===ru)throw new Error("inject() must be called from an injection context");return null===ru?Ot(r,void 0,i):ru.get(r,i&De.Optional?null:void 0,i)}function Tn(r,i=De.Default){return(Lt||Zf)(q(r),i)}function xo(r){const i=[];for(let o=0;o<r.length;o++){const u=q(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let c,d=De.Default;for(let g=0;g<u.length;g++){const y=u[g],w=Ew(y);"number"==typeof w?-1===w?c=y.token:d|=w:c=y}i.push(Tn(c,d))}else i.push(Tn(u))}return i}function iu(r,i){return r[So]=i,r.prototype[So]=i,r}function Ew(r){return r[So]}function or(r,i,o,u){const c=r[Vi];throw i[ml]&&c.unshift(i[ml]),r.message=function(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=Z(i);if(Array.isArray(i))c=i.map(Z).join(" -> ");else if("object"==typeof i){let d=[];for(let g in i)if(i.hasOwnProperty(g)){let y=i[g];d.push(g+":"+("string"==typeof y?JSON.stringify(y):Z(y)))}c=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(Ao,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[Vi]=null,r}const _c=iu(ca("Inject",r=>({token:r})),-1),Ui=iu(ca("Optional"),8),ha=iu(ca("SkipSelf"),4);let Ro;function ma(r){var i;return(null===(i=function(){if(void 0===Ro&&(Ro=null,$.trustedTypes))try{Ro=$.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return Ro}())||void 0===i?void 0:i.createHTML(r))||r}class ou{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class M_ extends ou{getTypeName(){return"HTML"}}class P_ extends ou{getTypeName(){return"Style"}}class Xf extends ou{getTypeName(){return"Script"}}class nm extends ou{getTypeName(){return"URL"}}class ep extends ou{getTypeName(){return"ResourceURL"}}function ms(r){return r instanceof ou?r.changingThisBreaksApplicationSecurity:r}function ci(r,i){const o=wc(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function wc(r){return r instanceof ou&&r.getTypeName()||null}function tp(r){return new M_(r)}function rm(r){return new P_(r)}function O_(r){return new Xf(r)}function Ic(r){return new nm(r)}function im(r){return new ep(r)}class nh{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(ma(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class rh{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=ma(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=ma(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const g=o.item(c).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&i.removeAttribute(g)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const rp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Il=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function bl(r){return(r=String(r)).match(rp)||r.match(Il)?r:"unsafe:"+r}function ji(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function Cl(...r){const i={};for(const o of r)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const om=ji("area,br,col,hr,img,wbr"),am=ji("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ih=ji("rp,rt"),Cc=Cl(om,Cl(am,ji("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Cl(ih,ji("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Cl(ih,am)),ip=ji("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),au=ji("srcset"),sh=Cl(ip,au,ji("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ji("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),cm=ji("script,style,template");class oh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!Cc.hasOwnProperty(o))return this.sanitizedSomething=!0,!cm.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let c=0;c<u.length;c++){const d=u.item(c),g=d.name,y=g.toLowerCase();if(!sh.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let w=d.value;ip[y]&&(w=bl(w)),au[y]&&(r=w,w=(r=String(r)).split(",").map(i=>bl(i.trim())).join(", ")),this.buf.push(" ",g,'="',lm(w),'"')}var r;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();Cc.hasOwnProperty(o)&&!om.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(lm(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const sp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,op=/([^\#-~ |!])/g;function lm(r){return r.replace(/&/g,"&amp;").replace(sp,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(op,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Dl;function ap(r,i){let o=null;try{Dl=Dl||function(r){const i=new rh(r);return function(){try{return!!(new window.DOMParser).parseFromString(ma(""),"text/html")}catch(r){return!1}}()?new nh(i):i}(r);let u=i?String(i):"";o=Dl.getInertBodyElement(u);let c=5,d=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=d,d=o.innerHTML,o=Dl.getInertBodyElement(u)}while(u!==d);return ma((new oh).sanitizeChildren(up(o)||o))}finally{if(o){const u=up(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function up(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var on=(()=>((on=on||{})[on.NONE=0]="NONE",on[on.HTML=1]="HTML",on[on.STYLE=2]="STYLE",on[on.SCRIPT=3]="SCRIPT",on[on.URL=4]="URL",on[on.RESOURCE_URL=5]="RESOURCE_URL",on))();function Bi(r){const i=function(){const r=Ie();return r&&r[12]}();return i?i.sanitize(on.URL,r)||"":ci(r,"URL")?ms(r):bl(Pe(r))}const cu="__ngContext__";function nn(r,i){r[cu]=i}function lh(r){const i=function(r){return r[cu]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function Sl(r){return r.ngOriginalError}function qs(r,...i){r.error(...i)}class fu{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),u=this._findContext(i),c=(r=i)&&r.ngErrorLogger||qs;var r;c(this._console,"ERROR",i),o&&c(this._console,"ORIGINAL ERROR",o),u&&c(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(Sl(i)):null}_findOriginalError(i){let o=i&&Sl(i);for(;o&&Sl(o);)o=Sl(o);return o||null}}const mh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($))();function m(r){return r instanceof Function?r():r}var x=(()=>((x=x||{})[x.Important=1]="Important",x[x.DashCase=2]="DashCase",x))();function ne(r,i){return undefined(r,i)}function $e(r){const i=r[3];return mn(i)?i[3]:i}function Pn(r){return Al(r[13])}function zs(r){return Al(r[4])}function Al(r){for(;null!==r&&!mn(r);)r=r[4];return r}function pu(r,i,o,u,c){if(null!=u){let d,g=!1;mn(u)?d=u:Ri(u)&&(g=!0,u=u[0]);const y=wt(u);0===r&&null!==o?null==c?Dm(i,o,y):ya(i,o,y,c||null,!0):1===r&&null!==o?ya(i,o,y,c||null,!0):2===r?function(r,i,o){const u=Sm(r,i);u&&function(r,i,o,u){Zt(r)?r.removeChild(i,o,u):i.removeChild(o)}(r,u,i,o)}(i,y,g):3===r&&i.destroyNode(y),null!=d&&function(r,i,o,u,c){const d=o[7];d!==wt(o)&&pu(i,r,u,d,c);for(let y=10;y<o.length;y++){const w=o[y];_p(w[1],w,r,i,u,d)}}(i,r,d,o,c)}}function _h(r,i,o){return Zt(r)?r.createElement(i,o):null===o?r.createElement(i):r.createElementNS(o,i)}function Cw(r,i){const o=r[9],u=o.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,Ku(c,-1)),o.splice(u,1)}function q_(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&Cw(c,u),i>0&&(r[o-1][4]=u[4]);const d=To(r,10+i);!function(r,i){_p(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const g=d[19];null!==g&&g.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Dw(r,i){if(!(256&i[2])){const o=i[11];Zt(o)&&o.destroyNode&&_p(r,i,o,3,null,null),function(r){let i=r[13];if(!i)return Cm(r[1],r);for(;i;){let o=null;if(Ri(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)Ri(i)&&Cm(i[1],i),i=i[3];null===i&&(i=r),Ri(i)&&Cm(i[1],i),o=i&&i[4]}i=o}}(i)}}function Cm(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof Ka)){const d=o[u+1];if(Array.isArray(d))for(let g=0;g<d.length;g+=2){const y=c[d[g]],w=d[g+1];try{w.call(y)}finally{}}else try{d.call(c)}finally{}}}}(r,i),function(r,i){const o=r.cleanup,u=i[7];let c=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const g=o[d+1],y="function"==typeof g?g(i):wt(i[g]),w=u[c=o[d+2]],C=o[d+3];"boolean"==typeof C?y.removeEventListener(o[d],w,C):C>=0?u[c=C]():u[c=-C].unsubscribe(),d+=2}else{const g=u[c=o[d+1]];o[d].call(g)}if(null!==u){for(let d=c+1;d<u.length;d++)u[d]();i[7]=null}}(r,i),1===i[1].type&&Zt(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&mn(i[3])){o!==i[3]&&Cw(o,i);const u=i[19];null!==u&&u.detachView(r)}}}function Ii(r,i,o){return function(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const c=r.data[u.directiveStart].encapsulation;if(c===mt.None||c===mt.Emulated)return null}return xr(u,o)}(r,i.parent,o)}function ya(r,i,o,u,c){Zt(r)?r.insertBefore(i,o,u,c):i.insertBefore(o,u,c)}function Dm(r,i,o){Zt(r)?r.appendChild(i,o):i.appendChild(o)}function Tm(r,i,o,u,c){null!==u?ya(r,i,o,u,c):Dm(r,i,o)}function Sm(r,i){return Zt(r)?r.parentNode(i):i.parentNode}let z_=function(r,i,o){return 40&r.type?xr(r,o):null};function yp(r,i,o,u){const c=Ii(r,u,i),d=i[11],y=function(r,i,o){return z_(r,i,o)}(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let w=0;w<o.length;w++)Tm(d,c,o[w],y,!1);else Tm(d,c,o,y,!1)}function wh(r,i){if(null!==i){const o=i.type;if(3&o)return xr(i,r);if(4&o)return gu(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return wh(r,u);{const c=r[i.index];return mn(c)?gu(-1,c):wt(c)}}if(32&o)return ne(i,r)()||wt(r[i.index]);{const u=GD(r,i);return null!==u?Array.isArray(u)?u[0]:wh($e(r[16]),u):wh(r,i.next)}}return null}function GD(r,i){return null!==i?r[16][6].projection[i.projection]:null}function gu(r,i){const o=10+r+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return wh(u,c)}return i[7]}function Q_(r,i,o,u,c,d,g){for(;null!=o;){const y=u[o.index],w=o.type;if(g&&0===i&&(y&&nn(wt(y),u),o.flags|=4),64!=(64&o.flags))if(8&w)Q_(r,i,o.child,u,c,d,!1),pu(i,r,c,y,d);else if(32&w){const C=ne(o,u);let S;for(;S=C();)pu(i,r,c,S,d);pu(i,r,c,y,d)}else 16&w?J_(r,i,u,o,c,d):pu(i,r,c,y,d);o=g?o.projectionNext:o.next}}function _p(r,i,o,u,c,d){Q_(o,u,r.firstChild,i,c,d,!1)}function J_(r,i,o,u,c,d){const g=o[16],w=g[6].projection[u.projection];if(Array.isArray(w))for(let C=0;C<w.length;C++)pu(i,r,c,w[C],d);else Q_(r,i,w,g[3],c,d,!0)}function Aw(r,i,o){Zt(r)?r.setAttribute(i,"style",o):i.style.cssText=o}function xm(r,i,o){Zt(r)?""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o):i.className=o}function xw(r,i,o){let u=r.length;for(;;){const c=r.indexOf(i,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const d=i.length;if(c+d===u||r.charCodeAt(c+d)<=32)return c}o=c+1}}const Rw="ng-template";function X_(r,i,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==xw(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function Nw(r){return 4===r.type&&r.value!==Rw}function KD(r,i,o){return i===(4!==r.type||o?r.value:Rw)}function Mw(r,i,o){let u=4;const c=r.attrs||[],d=function(r){for(let i=0;i<r.length;i++)if(uc(r[i]))return i;return r.length}(c);let g=!1;for(let y=0;y<i.length;y++){const w=i[y];if("number"!=typeof w){if(!g)if(4&u){if(u=2|1&u,""!==w&&!KD(r,w,o)||""===w&&1===i.length){if(Po(u))return!1;g=!0}}else{const C=8&u?w:i[++y];if(8&u&&null!==r.attrs){if(!X_(r.attrs,C,o)){if(Po(u))return!1;g=!0}continue}const N=yx(8&u?"class":w,c,Nw(r),o);if(-1===N){if(Po(u))return!1;g=!0;continue}if(""!==C){let P;P=N>d?"":c[N+1].toLowerCase();const j=8&u?P:null;if(j&&-1!==xw(j,C,0)||2&u&&C!==P){if(Po(u))return!1;g=!0}}}}else{if(!g&&!Po(u)&&!Po(w))return!1;if(g&&Po(w))continue;g=!1,u=w|1&u}}return Po(u)||g}function Po(r){return 0==(1&r)}function yx(r,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let d=!1;for(;c<i.length;){const g=i[c];if(g===r)return c;if(3===g||6===g)d=!0;else{if(1===g||2===g){let y=i[++c];for(;"string"==typeof y;)y=i[++c];continue}if(4===g)break;if(0===g){c+=4;continue}}c+=d?1:2}return-1}return function(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function Pw(r,i,o=!1){for(let u=0;u<i.length;u++)if(Mw(r,i[u],o))return!0;return!1}function Ow(r,i){return r?":not("+i.trim()+")":i}function QD(r){let i=r[0],o=1,u=2,c="",d=!1;for(;o<r.length;){let g=r[o];if("string"==typeof g)if(2&u){const y=r[++o];c+="["+g+(y.length>0?'="'+y+'"':"")+"]"}else 8&u?c+="."+g:4&u&&(c+=" "+g);else""!==c&&!Po(g)&&(i+=Ow(d,c),c=""),u=g,d=d||!Po(u);o++}return""!==c&&(i+=Ow(d,c)),i}const yt={};function kw(r){me(vt(),Ie(),Rr()+r,ls())}function me(r,i,o,u){if(!u)if(3==(3&i[2])){const d=r.preOrderCheckHooks;null!==d&&qa(i,d,o)}else{const d=r.preOrderHooks;null!==d&&za(i,d,0,o)}Br(o)}function Fm(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],d=o[u+1];if(-1!==d){const g=r.data[d];nc(c),g.contentQueries(2,i[d],d)}}}function Rl(r,i,o,u,c,d,g,y,w,C){const S=i.blueprint.slice();return S[0]=c,S[2]=140|u,Ba(S),S[3]=S[15]=r,S[8]=o,S[10]=g||r&&r[10],S[11]=y||r&&r[11],S[12]=w||r&&r[12]||null,S[9]=C||r&&r[9]||null,S[6]=d,S[16]=2==i.type?r[16]:S,S}function Nl(r,i,o,u,c){let d=r.data[i];if(null===d)d=function(r,i,o,u,c){const d=Qu(),g=$a(),w=r.data[i]=function(r,i,o,u,c,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?d:d&&d.parent,o,i,u,c);return null===r.firstChild&&(r.firstChild=w),null!==d&&(g?null==d.child&&null!==w.parent&&(d.child=w):null===d.next&&(d.next=w)),w}(r,i,o,u,c),nt.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=c;const g=function(){const r=nt.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===g?-1:g.injectorIndex}return si(d,!0),d}function bh(r,i,o,u){if(0===o)return-1;const c=i.length;for(let d=0;d<o;d++)i.push(u),r.blueprint.push(u),r.data.push(null);return c}function ur(r,i,o){ds(i);try{const u=r.viewQuery;null!==u&&Wr(1,u,o);const c=r.template;null!==c&&Ch(r,i,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Fm(r,i),r.staticViewQueries&&Wr(2,r.viewQuery,o);const d=r.components;null!==d&&function(r,i){for(let o=0;o<i.length;o++)fT(r,i[o])}(i,d)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,ic()}}function va(r,i,o,u){const c=i[2];if(256==(256&c))return;ds(i);const d=ls();try{Ba(i),function(r){nt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Ch(r,i,o,2,u);const g=3==(3&c);if(!d)if(g){const C=r.preOrderCheckHooks;null!==C&&qa(i,C,null)}else{const C=r.preOrderHooks;null!==C&&za(i,C,0,null),oc(i,0)}if(function(r){for(let i=Pn(r);null!==i;i=zs(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u],d=c[3];0==(1024&c[2])&&Ku(d,1),c[2]|=1024}}}(i),function(r){for(let i=Pn(r);null!==i;i=zs(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];ta(u)&&va(c,u,c.template,u[8])}}(i),null!==r.contentQueries&&Fm(r,i),!d)if(g){const C=r.contentCheckHooks;null!==C&&qa(i,C)}else{const C=r.contentHooks;null!==C&&za(i,C,1),oc(i,1)}!function(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)Br(~c);else{const d=c,g=o[++u],y=o[++u];ec(g,d),y(2,i[d])}}}finally{Br(-1)}}(r,i);const y=r.components;null!==y&&function(r,i){for(let o=0;o<i.length;o++)$m(r,i[o])}(i,y);const w=r.viewQuery;if(null!==w&&Wr(2,w,u),!d)if(g){const C=r.viewCheckHooks;null!==C&&qa(i,C)}else{const C=r.viewHooks;null!==C&&za(i,C,2),oc(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),d||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Ku(i[3],-1))}finally{ic()}}function oT(r,i,o,u){const c=i[10],d=!ls(),g=zu(i);try{d&&!g&&c.begin&&c.begin(),g&&ur(r,i,u),va(r,i,o,u)}finally{d&&!g&&c.end&&c.end()}}function Ch(r,i,o,u,c){const d=Rr(),g=2&u;try{Br(-1),g&&i.length>20&&me(r,i,20,ls()),o(u,c)}finally{Br(d)}}function fv(r,i,o){!Zu()||(function(r,i,o,u){const c=o.directiveStart,d=o.directiveEnd;r.firstCreatePass||Co(o,i),nn(u,i);const g=o.initialInputs;for(let y=c;y<d;y++){const w=r.data[y],C=ii(w);C&&jm(i,o,w);const S=Do(i,r,y,o);nn(S,i),null!==g&&Xw(0,y-c,S,w,0,g),C&&(nr(o.index,i)[8]=S)}}(r,i,o,xr(o,i)),128==(128&o.flags)&&function(r,i,o){const u=o.directiveStart,c=o.directiveEnd,g=o.index,y=nt.lFrame.currentDirectiveIndex;try{Br(g);for(let w=u;w<c;w++){const C=r.data[w],S=i[w];tc(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Qw(C,S)}}finally{Br(-1),tc(y)}}(r,i,o))}function Dh(r,i,o=xr){const u=i.localNames;if(null!==u){let c=i.index+1;for(let d=0;d<u.length;d+=2){const g=u[d+1],y=-1===g?o(i,r):r[g];r[c++]=y}}}function wp(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=Th(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function Th(r,i,o,u,c,d,g,y,w,C){const S=20+u,N=S+c,P=function(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:yt);return o}(S,N),j="function"==typeof C?C():C;return P[1]={type:r,blueprint:P,template:o,queries:null,viewQuery:y,declTNode:i,data:P.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:w,consts:j,incompleteFirstPass:!1}}function mv(r,i,o,u){const c=Tp(i);null===o?c.push(u):(c.push(o),r.firstCreatePass&&Sv(r).push(u,c.length-1))}function yv(r,i,o){for(let u in r)if(r.hasOwnProperty(u)){const c=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,c):o[u]=[i,c]}return o}function Wi(r,i,o,u,c,d,g,y){const w=xr(i,o);let S,C=i.inputs;!y&&null!=C&&(S=C[u])?(xv(r,o,S,u,c),Pa(i)&&function(r,i){const o=nr(i,r);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(u=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=g?g(c,i.value||"",u):c,Zt(d)?d.setProperty(w,u,c):cc(u)||(w.setProperty?w.setProperty(u,c):w[u]=c))}function Ip(r,i,o,u){let c=!1;if(Zu()){const d=function(r,i,o){const u=r.directiveRegistry;let c=null;if(u)for(let d=0;d<u.length;d++){const g=u[d];Pw(o,g.selectors,!1)&&(c||(c=[]),tn(Co(o,i),r,g.type),ii(g)?(Um(r,o),c.unshift(g)):c.push(g))}return c}(r,i,o),g=null===u?null:{"":-1};if(null!==d){c=!0,Iv(o,r.data.length,d.length);for(let S=0;S<d.length;S++){const N=d[S];N.providersResolver&&N.providersResolver(N)}let y=!1,w=!1,C=bh(r,i,d.length,null);for(let S=0;S<d.length;S++){const N=d[S];o.mergedAttrs=_i(o.mergedAttrs,N.hostAttrs),Jw(r,o,i,C,N),wv(C,N,g),null!==N.contentQueries&&(o.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(o.flags|=128);const P=N.type.prototype;!y&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),y=!0),!w&&(P.ngOnChanges||P.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),w=!0),C++}!function(r,i){const u=i.directiveEnd,c=r.data,d=i.attrs,g=[];let y=null,w=null;for(let C=i.directiveStart;C<u;C++){const S=c[C],N=S.inputs,P=null===d||Nw(i)?null:hT(N,d);g.push(P),y=yv(N,C,y),w=yv(S.outputs,C,w)}null!==y&&(y.hasOwnProperty("class")&&(i.flags|=16),y.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=g,i.inputs=y,i.outputs=w}(r,o)}g&&function(r,i,o){if(i){const u=r.localNames=[];for(let c=0;c<i.length;c+=2){const d=o[i[c+1]];if(null==d)throw new he("301",`Export of name '${i[c+1]}' not found!`);u.push(i[c],d)}}}(o,u,g)}return o.mergedAttrs=_i(o.mergedAttrs,o.attrs),c}function Zw(r,i,o,u,c,d){const g=d.hostBindings;if(g){let y=r.hostBindingOpCodes;null===y&&(y=r.hostBindingOpCodes=[]);const w=~i.index;(function(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(y)!=w&&y.push(w),y.push(u,c,g)}}function Qw(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function Um(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function wv(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;ii(i)&&(o[""]=r)}}function Iv(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}function Jw(r,i,o,u,c){r.data[u]=c;const d=c.factory||(c.factory=yn(c.type)),g=new Ka(d,ii(c),null);r.blueprint[u]=g,o[u]=g,Zw(r,i,0,u,bh(r,o,c.hostVars,yt),c)}function jm(r,i,o){const u=xr(i,r),c=wp(o),d=r[10],g=Hm(r,Rl(r,c,null,o.onPush?64:16,u,i,d,d.createRenderer(u,o),null,null));r[i.index]=g}function Ks(r,i,o,u,c,d){const g=xr(r,i);!function(r,i,o,u,c,d,g){if(null==d)Zt(r)?r.removeAttribute(i,c,o):i.removeAttribute(c);else{const y=null==g?Pe(d):g(d,u||"",c);Zt(r)?r.setAttribute(i,c,y,o):o?i.setAttributeNS(o,c,y):i.setAttribute(c,y)}}(i[11],g,d,r.value,o,u,c)}function Xw(r,i,o,u,c,d){const g=d[i];if(null!==g){const y=u.setInput;for(let w=0;w<g.length;){const C=g[w++],S=g[w++],N=g[w++];null!==y?u.setInput(o,N,C,S):o[S]=N}}}function hT(r,i){let o=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,r[c],i[u+1])),u+=2}else u+=2;else u+=4}return o}function bv(r,i,o,u){return new Array(r,!0,!1,i,null,0,u,o,null,null)}function $m(r,i){const o=nr(i,r);if(ta(o)){const u=o[1];80&o[2]?va(u,o,u.template,o[8]):o[5]>0&&Cv(o)}}function Cv(r){for(let u=Pn(r);null!==u;u=zs(u))for(let c=10;c<u.length;c++){const d=u[c];if(1024&d[2]){const g=d[1];va(g,d,g.template,d[8])}else d[5]>0&&Cv(d)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=nr(o[u],r);ta(c)&&c[5]>0&&Cv(c)}}function fT(r,i){const o=nr(i,r),u=o[1];(function(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),ur(u,o,o[8])}function Hm(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function Dv(r){for(;r;){r[2]|=64;const i=$e(r);if(nl(r)&&!i)return r;r=i}return null}function Ah(r,i,o){const u=i[10];u.begin&&u.begin();try{va(r,i,r.template,o)}catch(c){throw Av(i,c),c}finally{u.end&&u.end()}}function Tv(r){!function(r){for(let i=0;i<r.components.length;i++){const o=r.components[i],u=lh(o),c=u[1];oT(c,u,c.template,o)}}(r[8])}function Wr(r,i,o){nc(0),i(r,o)}const Dp=(()=>Promise.resolve(null))();function Tp(r){return r[7]||(r[7]=[])}function Sv(r){return r.cleanup||(r.cleanup=[])}function Av(r,i){const o=r[9],u=o?o.get(fu,null):null;u&&u.handleError(i)}function xv(r,i,o,u,c){for(let d=0;d<o.length;){const g=o[d++],y=o[d++],w=i[g],C=r.data[g];null!==C.setInput?C.setInput(w,c,u,y):w[y]=c}}function ys(r,i,o){const u=function(r,i){return wt(i[r])}(i,r);!function(r,i,o){Zt(r)?r.setValue(i,o):i.textContent=o}(r[11],u,o)}function xh(r,i,o){let u=o?r.styles:null,c=o?r.classes:null,d=0;if(null!==i)for(let g=0;g<i.length;g++){const y=i[g];"number"==typeof y?d=y:1==d?c=se(c,y):2==d&&(u=se(u,y+": "+i[++g]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}const Ea=new Jt("INJECTOR",-1);class Pv{get(i,o=Hs){if(o===Hs){const u=new Error(`NullInjectorError: No provider for ${Z(i)}!`);throw u.name="NullInjectorError",u}return o}}const Sp=new Jt("Set Injector scope."),Pl={},qm={};let Ap;function Ov(){return void 0===Ap&&(Ap=new Pv),Ap}function kv(r,i=null,o=null,u){return new gT(r,o,i||Ov(),u)}class gT{constructor(i,o,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&ui(o,y=>this.processProvider(y,i,o)),ui([i],y=>this.processInjectorType(y,[],d)),this.records.set(Ea,Zs(void 0,this));const g=this.records.get(Sp);this.scope=null!=g?g.value:null,this.source=c||("object"==typeof i?null:Z(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=Hs,u=De.Default){this.assertNotDestroyed();const c=yc(this),d=pn(void 0);try{if(!(u&De.SkipSelf)){let y=this.records.get(i);if(void 0===y){const w=("function"==typeof(r=i)||"object"==typeof r&&r instanceof Jt)&&dr(i);y=w&&this.injectableDefInScope(w)?Zs(Ol(i),Pl):null,this.records.set(i,y)}if(null!=y)return this.hydrate(i,y)}return(u&De.Self?Ov():this.parent).get(i,o=u&De.Optional&&o===Hs?null:o)}catch(g){if("NullInjectorError"===g.name){if((g[Vi]=g[Vi]||[]).unshift(Z(i)),c)throw g;return or(g,i,"R3InjectorError",this.source)}throw g}finally{pn(d),yc(c)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,c)=>i.push(Z(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,o,u){if(!(i=q(i)))return!1;let c=gi(i);const d=null==c&&i.ngModule||void 0,g=void 0===d?i:d,y=-1!==u.indexOf(g);if(void 0!==d&&(c=gi(d)),null==c)return!1;if(null!=c.imports&&!y){let S;u.push(g);try{ui(c.imports,N=>{this.processInjectorType(N,o,u)&&(void 0===S&&(S=[]),S.push(N))})}finally{}if(void 0!==S)for(let N=0;N<S.length;N++){const{ngModule:P,providers:j}=S[N];ui(j,W=>this.processProvider(W,P,j||Le))}}this.injectorDefTypes.add(g);const w=yn(g)||(()=>new g);this.records.set(g,Zs(w,Pl));const C=c.providers;if(null!=C&&!y){const S=i;ui(C,N=>this.processProvider(N,S,C))}return void 0!==d&&void 0!==i.providers}processProvider(i,o,u){let c=ko(i=q(i))?i:q(i&&i.provide);const d=Km(r=i)?Zs(void 0,r.useValue):Zs(function(r,i,o){let u;if(ko(r)){const c=q(r);return yn(c)||Ol(c)}if(Km(r))u=()=>q(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...xo(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))u=()=>Tn(q(r.useExisting));else{const c=q(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return yn(c)||Ol(c);u=()=>new c(...xo(r.deps))}return u}(r),Pl);var r;if(ko(i)||!0!==i.multi)this.records.get(c);else{let g=this.records.get(c);g||(g=Zs(void 0,Pl,!0),g.factory=()=>xo(g.multi),this.records.set(c,g)),c=i,g.multi.push(i)}this.records.set(c,d)}hydrate(i,o){return o.value===Pl&&(o.value=qm,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(r=o.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var r}injectableDefInScope(i){if(!i.providedIn)return!1;const o=q(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Ol(r){const i=dr(r),o=null!==i?i.factory:yn(r);if(null!==o)return o;if(r instanceof Jt)throw new Error(`Token ${Z(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const i=r.length;if(i>0){const u=function(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}(i,"?");throw new Error(`Can't resolve all parameters for ${Z(r)}: (${u.join(", ")}).`)}const o=function(r){const i=r&&(r[Rt]||r[uo]);if(i){const o=function(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Error("unreachable")}function Zs(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function Km(r){return null!==r&&"object"==typeof r&&nu in r}function ko(r){return"function"==typeof r}const xp=function(r,i,o){return function(r,i=null,o=null,u){const c=kv(r,i,o,u);return c._resolveInjectorDefTypes(),c}({name:o},i,r,o)};let an=(()=>{class r{static create(o,u){return Array.isArray(o)?xp(o,u,""):xp(o.providers,o.parent,o.name||"")}}return r.THROW_IF_NOT_FOUND=Hs,r.NULL=new Pv,r.\u0275prov=Et({token:r,providedIn:"any",factory:()=>Tn(Ea)}),r.__NG_ELEMENT_ID__=-1,r})();function gI(r,i){sc(lh(r)[1],_n())}let ey=null;function Mc(){if(!ey){const r=$.Symbol;if(r&&r.iterator)ey=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(ey=u)}}}return ey}class Ys{constructor(i){this.wrapped=i}static wrap(i){return new Ys(i)}static unwrap(i){return Ys.isWrapped(i)?i.wrapped:i}static isWrapped(i){return i instanceof Ys}}function Ll(r){return!!Pp(r)&&(Array.isArray(r)||!(r instanceof Map)&&Mc()in r)}function Pp(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function qr(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function Fp(r,i,o,u){const c=Ie();return qr(c,Fs(),i)&&(vt(),Ks(ln(),c,r,i,o,u)),Fp}function DI(r,i,o,u,c,d,g,y){const w=Ie(),C=vt(),S=r+20,N=C.firstCreatePass?function(r,i,o,u,c,d,g,y,w){const C=i.consts,S=Nl(i,r,4,g||null,as(C,y));Ip(i,o,S,as(C,w)),sc(i,S);const N=S.tViews=Th(2,S,u,c,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,C);return null!==i.queries&&(i.queries.template(i,S),N.queries=i.queries.embeddedTView(S)),S}(S,C,w,i,o,u,c,d,g):C.data[S];si(N,!1);const P=w[11].createComment("");yp(C,w,P,N),nn(P,w),Hm(w,w[S]=bv(P,w,P,N)),Yo(N)&&fv(C,w,N),null!=g&&Dh(w,N,y)}function jh(r,i=De.Default){const o=Ie();return null===o?Tn(r,i):vi(_n(),o,q(r),i)}function Cu(r,i,o){const u=Ie();return qr(u,Fs(),i)&&Wi(vt(),ln(),u,r,i,u[11],o,!1),Cu}function Bh(r,i,o,u,c){const g=c?"class":"style";xv(r,o,i.inputs[g],g,u)}function Ze(r,i,o,u){const c=Ie(),d=vt(),g=20+r,y=c[11],w=c[g]=_h(y,i,nt.lFrame.currentNamespace),C=d.firstCreatePass?function(r,i,o,u,c,d,g){const y=i.consts,C=Nl(i,r,2,c,as(y,d));return Ip(i,o,C,as(y,g)),null!==C.attrs&&xh(C,C.attrs,!1),null!==C.mergedAttrs&&xh(C,C.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,C),C}(g,d,c,0,i,o,u):d.data[g];si(C,!0);const S=C.mergedAttrs;null!==S&&Za(y,w,S);const N=C.classes;null!==N&&xm(y,w,N);const P=C.styles;null!==P&&Aw(y,w,P),64!=(64&C.flags)&&yp(d,c,w,C),0===nt.lFrame.elementDepthCount&&nn(w,c),nt.lFrame.elementDepthCount++,Yo(C)&&(fv(d,c,C),function(r,i,o){if(Ns(i)){const c=i.directiveEnd;for(let d=i.directiveStart;d<c;d++){const g=r.data[d];g.contentQueries&&g.contentQueries(1,o[d],d)}}}(d,C,c)),null!==u&&Dh(c,C)}function Du(){let r=_n();$a()?nt.lFrame.isParent=!1:(r=r.parent,si(r,!1));const i=r;nt.lFrame.elementDepthCount--;const o=vt();o.firstCreatePass&&(sc(o,r),Ns(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(i)&&Bh(o,i,Ie(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(i)&&Bh(o,i,Ie(),i.stylesWithoutHost,!1)}function Lo(r,i,o,u){Ze(r,i,o,u),Du()}function $p(r){return!!r&&"function"==typeof r.then}function cy(r){return!!r&&"function"==typeof r.subscribe}const ly=cy;function dy(r,i,o,u){const c=Ie(),d=vt(),g=_n();return function(r,i,o,u,c,d,g,y){const w=Yo(u),S=r.firstCreatePass&&Sv(r),N=i[8],P=Tp(i);let j=!0;if(3&u.type||y){const J=xr(u,i),Re=y?y(J):J,_e=P.length,Xe=y?lt=>y(wt(lt[u.index])):u.index;if(Zt(o)){let lt=null;if(!y&&w&&(lt=function(r,i,o,u){const c=r.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const g=c[d];if(g===o&&c[d+1]===u){const y=i[7],w=c[d+2];return y.length>w?y[w]:null}"string"==typeof g&&(d+=2)}return null}(r,i,c,u.index)),null!==lt)(lt.__ngLastListenerFn__||lt).__ngNextListenerFn__=d,lt.__ngLastListenerFn__=d,j=!1;else{d=hn(u,i,N,d,!1);const Ut=o.listen(Re,c,d);P.push(d,Ut),S&&S.push(c,Xe,_e,_e+1)}}else d=hn(u,i,N,d,!0),Re.addEventListener(c,d,g),P.push(d),S&&S.push(c,Xe,_e,g)}else d=hn(u,i,N,d,!1);const W=u.outputs;let oe;if(j&&null!==W&&(oe=W[c])){const J=oe.length;if(J)for(let Re=0;Re<J;Re+=2){const ei=i[oe[Re]][oe[Re+1]].subscribe(d),Ra=P.length;P.push(d,ei),S&&S.push(c,u.index,Ra,-(Ra+1))}}}(d,c,c[11],g,r,i,!!o,u),dy}function tE(r,i,o,u){try{return!1!==o(u)}catch(c){return Av(r,c),!1}}function hn(r,i,o,u,c){return function d(g){if(g===Function)return u;const y=2&r.flags?nr(r.index,i):i;0==(32&i[2])&&Dv(y);let w=tE(i,0,u,g),C=d.__ngNextListenerFn__;for(;C;)w=tE(i,0,C,g)&&w,C=C.__ngNextListenerFn__;return c&&!1===w&&(g.preventDefault(),g.returnValue=!1),w}}function Jp(r,i=""){const o=Ie(),u=vt(),c=r+20,d=u.firstCreatePass?Nl(u,c,1,i,null):u.data[c],g=o[c]=function(r,i){return Zt(r)?r.createText(i):r.createTextNode(i)}(o[11],i);yp(u,o,g,d),si(d,!1)}function my(r,i,o){const u=Ie(),c=function(r,i,o,u){return qr(r,Fs(),o)?i+Pe(o)+u:yt}(u,r,i,o);return c!==yt&&ys(u,Rr(),c),my}function vy(r,i,o){const u=Ie();return qr(u,Fs(),i)&&Wi(vt(),ln(),u,r,i,u[11],o,!0),vy}const Ql=void 0;var tb=["en",[["a","p"],["AM","PM"],Ql],[["AM","PM"],Ql,Ql],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ql,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ql,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ql,"{1} 'at' {0}",Ql],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const i=Math.floor(Math.abs(r)),o=r.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let Qh={};function vE(r){const i=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=nb(i);if(o)return o;const u=i.split("-")[0];if(o=nb(u),o)return o;if("en"===u)return tb;throw new Error(`Missing locale data for the locale "${r}".`)}function EE(r){return vE(r)[tt.PluralCase]}function nb(r){return r in Qh||(Qh[r]=$.ng&&$.ng.common&&$.ng.common.locales&&$.ng.common.locales[r]),Qh[r]}var tt=(()=>((tt=tt||{})[tt.LocaleId=0]="LocaleId",tt[tt.DayPeriodsFormat=1]="DayPeriodsFormat",tt[tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",tt[tt.DaysFormat=3]="DaysFormat",tt[tt.DaysStandalone=4]="DaysStandalone",tt[tt.MonthsFormat=5]="MonthsFormat",tt[tt.MonthsStandalone=6]="MonthsStandalone",tt[tt.Eras=7]="Eras",tt[tt.FirstDayOfWeek=8]="FirstDayOfWeek",tt[tt.WeekendRange=9]="WeekendRange",tt[tt.DateFormat=10]="DateFormat",tt[tt.TimeFormat=11]="TimeFormat",tt[tt.DateTimeFormat=12]="DateTimeFormat",tt[tt.NumberSymbols=13]="NumberSymbols",tt[tt.NumberFormats=14]="NumberFormats",tt[tt.CurrencyCode=15]="CurrencyCode",tt[tt.CurrencySymbol=16]="CurrencySymbol",tt[tt.CurrencyName=17]="CurrencyName",tt[tt.Currencies=18]="Currencies",tt[tt.Directionality=19]="Directionality",tt[tt.PluralCase=20]="PluralCase",tt[tt.ExtraData=21]="ExtraData",tt))();const Jh="en-US";let sb=Jh;function wE(r){un(r,"Expected localeId to be defined"),"string"==typeof r&&(sb=r.toLowerCase().replace(/_/g,"-"))}class Tb{}const Ab="ngComponent";class Ty{resolveComponentFactory(i){throw function(r){const i=Error(`No component factory found for ${Z(r)}. Did you add it to @NgModule.entryComponents?`);return i[Ab]=r,i}(i)}}let Bo=(()=>{class r{}return r.NULL=new Ty,r})();function Sy(...r){}function Is(r,i){return new no(xr(r,i))}const Rb=function(){return Is(_n(),Ie())};let no=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=Rb,r})();function xy(r){return r instanceof no?r.nativeElement:r}class rd{}let UE=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>jE(),r})();const jE=function(){const r=Ie(),o=nr(_n().index,r);return function(r){return r[11]}(Ri(o)?o:r)};let Ny=(()=>{class r{}return r.\u0275prov=Et({token:r,providedIn:"root",factory:()=>null}),r})();class BE{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const ug=new BE("12.2.14");class Mb{constructor(){}supports(i){return Ll(i)}create(i){return new Ob(i)}}const Pb=(r,i)=>i;class Ob{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Pb}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,d=null;for(;o||u;){const g=!u||o&&o.currentIndex<My(u,c,d)?o:u,y=My(g,c,d),w=g.currentIndex;if(g===u)c--,u=u._nextRemoved;else if(o=o._next,null==g.previousIndex)c++;else{d||(d=[]);const C=y-c,S=w-c;if(C!=S){for(let P=0;P<C;P++){const j=P<d.length?d[P]:d[P]=0,W=j+P;S<=W&&W<C&&(d[P]=j+1)}d[g.previousIndex]=S-C}}y!==w&&i(g,y,w)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Ll(i))throw new Error(`Error trying to diff '${Z(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,d,g,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let y=0;y<this.length;y++)d=i[y],g=this._trackByFn(y,d),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,d,g,y)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,g,y),u=!0),o=o._next}else c=0,function(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[Mc()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,y=>{g=this._trackByFn(c,y),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,y,g,c)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,g,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,d,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,d,c)):i=this._addAfter(new aS(o,u),d,c),i}_verifyReinsertion(i,o,u,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?i=this._reinsertAfter(d,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,d=i._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new id),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new id),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class aS{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uf{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class id{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new uf,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function My(r,i,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class cg{constructor(){}supports(i){return i instanceof Map||Pp(i)}create(){return new kb}}class kb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Pp(i)))throw new Error(`Error trying to diff '${Z(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const d=c._prev,g=c._next;return d&&(d._next=g),g&&(g._prev=d),c._next=null,c._prev=null,c}const u=new Fb(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class Fb{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Lb(){return new cf([new Mb])}let cf=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||Lb()),deps:[[r,new ha,new Ui]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(r){return r.name||typeof r}(o)}'`)}}return r.\u0275prov=Et({token:r,providedIn:"root",factory:Lb}),r})();function Py(){return new Oy([new cg])}let Oy=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||Py()),deps:[[r,new ha,new Ui]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return r.\u0275prov=Et({token:r,providedIn:"root",factory:Py}),r})();function lf(r,i,o,u,c=!1){for(;null!==o;){const d=i[o.index];if(null!==d&&u.push(wt(d)),mn(d))for(let y=10;y<d.length;y++){const w=d[y],C=w[1].firstChild;null!==C&&lf(w[1],w,C,u)}const g=o.type;if(8&g)lf(r,i,o.child,u);else if(32&g){const y=ne(o,i);let w;for(;w=y();)u.push(w)}else if(16&g){const y=GD(i,o);if(Array.isArray(y))u.push(...y);else{const w=$e(i[16]);lf(w[1],w,y,u,!0)}}o=c?o.projectionNext:o.next}return u}class lg{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return lf(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(mn(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(q_(i,u),To(o,u))}this._attachedToViewContainer=!1}Dw(this._lView[1],this._lView)}onDestroy(i){mv(this._lView[1],this._lView,null,i)}markForCheck(){Dv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ah(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,i,o){Oi(!0);try{Ah(r,i,o)}finally{Oi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,_p(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class $E extends lg{constructor(i){super(i),this._view=i}detectChanges(){Tv(this._view)}checkNoChanges(){!function(r){Oi(!0);try{Tv(r)}finally{Oi(!1)}}(this._view)}get context(){return null}}const cS=function(r){return function(r,i,o){if(Pa(r)&&!o){const u=nr(r.index,i);return new lg(u,u)}return 47&r.type?new lg(i[16],i):null}(_n(),Ie(),16==(16&r))};let lS=(()=>{class r{}return r.__NG_ELEMENT_ID__=cS,r})();const fS=[new cg],Vb=new cf([new Mb]),Ub=new Oy(fS),dg=function(){return hg(_n(),Ie())};let Bc=(()=>{class r{}return r.__NG_ELEMENT_ID__=dg,r})();const qE=Bc,zE=class extends qE{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i){const o=this._declarationTContainer.tViews,u=Rl(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),ur(o,u,i),new lg(u)}};function hg(r,i){return 4&r.type?new zE(i,r,Is(r,i)):null}class sd{}class ZE{}const gS=function(){return jb(_n(),Ie())};let fg=(()=>{class r{}return r.__NG_ELEMENT_ID__=gS,r})();const pg=fg,Fy=class extends pg{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return Is(this._hostTNode,this._hostLView)}get injector(){return new fs(this._hostTNode,this._hostLView)}get parentInjector(){const i=fc(this._hostTNode,this._hostLView);if(dc(i)){const o=Qa(i,this._hostLView),u=Ya(i);return new fs(o[1].data[u+8],o)}return new fs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=YE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){const c=i.createEmbeddedView(o||{});return this.insert(c,u),c}createComponent(i,o,u,c,d){const g=u||this.parentInjector;if(!d&&null==i.ngModule&&g){const w=g.get(sd,null);w&&(d=w)}const y=i.create(g,c,void 0,d);return this.insert(y.hostView,o),y}insert(i,o){const u=i._lView,c=u[1];if(mn(u[3])){const S=this.indexOf(i);if(-1!==S)this.detach(S);else{const N=u[3],P=new Fy(N,N[6],N[3]);P.detach(P.indexOf(i))}}const d=this._adjustIndex(o),g=this._lContainer;!function(r,i,o,u){const c=10+u,d=o.length;u>0&&(o[c-1][4]=i),u<d-10?(i[4]=o[c],Li(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const g=i[17];null!==g&&o!==g&&function(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(g,i);const y=i[19];null!==y&&y.insertView(r),i[2]|=128}(c,u,g,d);const y=gu(d,g),w=u[11],C=Sm(w,g[7]);return null!==C&&function(r,i,o,u,c,d){u[0]=c,u[6]=i,_p(r,u,o,1,c,d)}(c,g[6],w,u,C,y),i.attachToViewContainerRef(),Li(QE(g),d,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=YE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=q_(this._lContainer,o);u&&(To(QE(this._lContainer),o),Dw(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=q_(this._lContainer,o);return u&&null!=To(QE(this._lContainer),o)?new lg(u):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function YE(r){return r[8]}function QE(r){return r[8]||(r[8]=[])}function jb(r,i){let o;const u=i[r.index];if(mn(u))o=u;else{let c;if(8&r.type)c=wt(u);else{const d=i[11];c=d.createComment("");const g=xr(r,i);ya(d,Sm(d,g),c,function(r,i){return Zt(r)?r.nextSibling(i):i.nextSibling}(d,g),!1)}i[r.index]=o=bv(u,i,c,r),Hm(i,o)}return new Fy(o,r,i)}const Wc={};class C0 extends Bo{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Ln(i);return new sC(o,this.ngModule)}}function Eg(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}const jS=new Jt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>mh});class sC extends Tb{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=i.selectors.map(QD).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Eg(this.componentDef.inputs)}get outputs(){return Eg(this.componentDef.outputs)}create(i,o,u,c){const d=(c=c||this.ngModule)?function(r,i){return{get:(o,u,c)=>{const d=r.get(o,Wc,c);return d!==Wc||u===Wc?d:i.get(o,u,c)}}}(i,c.injector):i,g=d.get(rd,Ua),y=d.get(Ny,null),w=g.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=u?function(r,i,o){if(Zt(r))return r.selectRootElement(i,o===mt.ShadowDom);let u="string"==typeof i?r.querySelector(i):i;return u.textContent="",u}(w,u,this.componentDef.encapsulation):_h(g.createRenderer(null,this.componentDef),C,function(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(C)),N=this.componentDef.onPush?576:528,P=function(r,i){return{components:[],scheduler:r||mh,clean:Dp,playerHandler:i||null,flags:0}}(),j=Th(0,null,null,1,0,null,null,null,null,null),W=Rl(null,j,P,N,null,null,g,w,y,d);let oe,J;ds(W);try{const Re=function(r,i,o,u,c,d){const g=o[1];o[20]=r;const w=Nl(g,20,2,"#host",null),C=w.mergedAttrs=i.hostAttrs;null!==C&&(xh(w,C,!0),null!==r&&(Za(c,r,C),null!==w.classes&&xm(c,r,w.classes),null!==w.styles&&Aw(c,r,w.styles)));const S=u.createRenderer(r,i),N=Rl(o,wp(i),null,i.onPush?64:16,o[20],w,u,S,d||null,null);return g.firstCreatePass&&(tn(Co(w,o),g,i.type),Um(g,w),Iv(w,o.length,1)),Hm(o,N),o[20]=N}(S,this.componentDef,W,g,w);if(S)if(u)Za(w,S,["ng-version",ug.full]);else{const{attrs:_e,classes:Xe}=function(r){const i=[],o=[];let u=1,c=2;for(;u<r.length;){let d=r[u];if("string"==typeof d)2===c?""!==d&&i.push(d,r[++u]):8===c&&o.push(d);else{if(!Po(c))break;c=d}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);_e&&Za(w,S,_e),Xe&&Xe.length>0&&xm(w,S,Xe.join(" "))}if(J=Pi(j,20),void 0!==o){const _e=J.projection=[];for(let Xe=0;Xe<this.ngContentSelectors.length;Xe++){const lt=o[Xe];_e.push(null!=lt?Array.from(lt):null)}}oe=function(r,i,o,u,c){const d=o[1],g=function(r,i,o){const u=_n();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Jw(r,u,i,bh(r,i,1,null),o));const c=Do(i,r,u.directiveStart,u);nn(c,i);const d=xr(u,i);return d&&nn(d,i),c}(d,o,i);if(u.components.push(g),r[8]=g,c&&c.forEach(w=>w(g,i)),i.contentQueries){const w=_n();i.contentQueries(1,g,w.directiveStart)}const y=_n();return!d.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Br(y.index),Zw(o[1],y,0,y.directiveStart,y.directiveEnd,i),Qw(i,g)),g}(Re,this.componentDef,W,P,[gI]),ur(j,W,null)}finally{ic()}return new uC(this.componentType,oe,Is(J,W),W,J)}}class uC extends class{}{constructor(i,o,u,c,d){super(),this.location=u,this._rootLView=c,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new $E(c),this.componentType=i}get injector(){return new fs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const qc=new Map;class lC extends sd{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new C0(this);const u=tr(i),c=i[At]||null;c&&wE(c),this._bootstrapComponents=m(u.bootstrap),this._r3Injector=kv(i,o,[{provide:sd,useValue:this},{provide:Bo,useValue:this.componentFactoryResolver}],Z(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=an.THROW_IF_NOT_FOUND,u=De.Default){return i===an||i===sd||i===Ea?this:this._r3Injector.get(i,o,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Ig extends ZE{constructor(i){super(),this.moduleType=i,null!==tr(i)&&function(r){const i=new Set;!function o(u){const c=tr(u,!0),d=c.id;null!==d&&(function(r,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${r} - ${Z(i)} vs ${Z(i.name)}`)}(d,qc.get(d),u),qc.set(d,u));const g=m(c.imports);for(const y of g)i.has(y)||(i.add(y),o(y))}(r)}(i)}create(i){return new lC(this.moduleType,i)}}function fC(r,i,o,u,c,d){const g=i+o;return qr(r,g,c)?function(r,i,o){return r[i]=o}(r,g+1,d?u.call(d,c):u(c)):function(r,i){const o=r[i];return o===yt?void 0:o}(r,g+1)}function x0(r,i){const o=vt();let u;const c=r+20;o.firstCreatePass?(u=function(r,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(r===u.name)return u}throw new he("302",`The pipe '${r}' could not be found!`)}(i,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const d=u.factory||(u.factory=yn(u.type)),g=pn(jh);try{const y=bo(!1),w=d();return bo(y),function(r,i,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),i[o]=u}(o,Ie(),c,w),w}finally{pn(g)}}function R0(r,i,o){const u=r+20,c=Ie(),d=function(r,i){return r[i]}(c,u);return function(r,i){Ys.isWrapped(i)&&(i=Ys.unwrap(i),r[nt.lFrame.bindingIndex]=yt);return i}(c,function(r,i){return r[1].data[i].pure}(c,u)?fC(c,function(){const r=nt.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}(),i,d.transform,o,d):d.transform(o))}function Lr(r){return i=>{setTimeout(r,void 0,i)}}const br=class extends E.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){var c,d,g;let y=i,w=o||(()=>null),C=u;if(i&&"object"==typeof i){const N=i;y=null===(c=N.next)||void 0===c?void 0:c.bind(N),w=null===(d=N.error)||void 0===d?void 0:d.bind(N),C=null===(g=N.complete)||void 0===g?void 0:g.bind(N)}this.__isAsync&&(w=Lr(w),y&&(y=Lr(y)),C&&(C=Lr(C)));const S=super.subscribe({next:y,error:w,complete:C});return i instanceof X.w&&i.add(S),S}};function _C(){return this._results[Mc()]()}class Yy{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Mc(),u=Yy.prototype;u[o]||(u[o]=_C)}get changes(){return this._changes||(this._changes=new br)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const c=ai(i);(this._changesDetected=!function(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],d=i[u];if(o&&(c=o(c),d=o(d)),d!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class N0{constructor(i){this.queryList=i,this.matches=null}clone(){return new N0(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dg{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let d=0;d<u;d++){const g=o.getByIndex(d);c.push(this.queries[g.indexInDeclarationView].clone())}return new Dg(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==k0(i,o).matches&&this.queries[o].setDirty()}}class EC{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class M0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(i,c);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new M0(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class wn{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new wn(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const d=u[c];this.matchTNodeWithReadOption(i,o,Lx(o,d)),this.matchTNodeWithReadOption(i,o,aa(o,i,d,!1,!1))}else u===Bc?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,aa(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===no||c===fg||c===Bc&&4&o.type)this.addMatch(o.index,-2);else{const d=aa(o,i,c,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function Lx(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function Cr(r,i,o,u){return-1===o?function(r,i){return 11&r.type?Is(r,i):4&r.type?hg(r,i):null}(i,r):-2===o?function(r,i,o){return o===no?Is(i,r):o===Bc?hg(i,r):o===fg?jb(i,r):void 0}(r,i,u):Do(r,r[1],o,i)}function IC(r,i,o,u){const c=i[19].queries[u];if(null===c.matches){const d=r.data,g=o.matches,y=[];for(let w=0;w<g.length;w+=2){const C=g[w];y.push(C<0?null:Cr(i,d[C],g[w+1],o.metadata.read))}c.matches=y}return c.matches}function P0(r,i,o,u){const c=r.queries.getByIndex(o),d=c.matches;if(null!==d){const g=IC(r,i,c,o);for(let y=0;y<d.length;y+=2){const w=d[y];if(w>0)u.push(g[y/2]);else{const C=d[y+1],S=i[-w];for(let N=10;N<S.length;N++){const P=S[N];P[17]===P[3]&&P0(P[1],P,C,u)}if(null!==S[9]){const N=S[9];for(let P=0;P<N.length;P++){const j=N[P];P0(j[1],j,C,u)}}}}}return u}function O0(r){const i=Ie(),o=vt(),u=Ud();nc(u+1);const c=k0(o,u);if(r.dirty&&zu(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const d=c.crossesNgTemplate?P0(o,i,u,[]):IC(o,i,c,u);r.reset(d,xy),r.notifyOnChanges()}return!0}return!1}function bC(r,i,o,u){const c=vt();if(c.firstCreatePass){const d=_n();(function(r,i,o){null===r.queries&&(r.queries=new M0),r.queries.track(new wn(i,o))})(c,new EC(i,o,u),d.index),function(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}!function(r,i,o){const u=new Yy(4==(4&o));mv(r,i,u,u.destroy),null===i[19]&&(i[19]=new Dg),i[19].queries.push(new N0(u))}(c,Ie(),o)}function CC(){return r=Ie(),i=Ud(),r[19].queries[i].queryList;var r,i}function k0(r,i){return r.queries.getByIndex(i)}const W0=new Jt("Application Initializer");let bf=(()=>{class r{constructor(o){this.appInits=o,this.resolve=Sy,this.reject=Sy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if($p(d))o.push(d);else if(ly(d)){const g=new Promise((y,w)=>{d.subscribe({complete:y,error:w})});o.push(g)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(Tn(W0,8))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const VC=new Jt("AppId"),_A={provide:VC,useFactory:function(){return`${q0()}${q0()}${q0()}`},deps:[]};function q0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vA=new Jt("Platform Initializer"),UC=new Jt("Platform ID"),jC=new Jt("appBootstrapListener");let z0=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const Rg=new Jt("LocaleId"),Cf=new Jt("DefaultCurrencyCode");class GC{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}const ts=function(r){return new Ig(r)},Ci=ts,Ng=function(r){return Promise.resolve(ts(r))},pi=function(r){const i=ts(r),u=m(tr(r).declarations).reduce((c,d)=>{const g=Ln(d);return g&&c.push(new sC(g)),c},[]);return new GC(i,u)},bA=pi,_d=function(r){return Promise.resolve(pi(r))};let vd=(()=>{class r{constructor(){this.compileModuleSync=Ci,this.compileModuleAsync=Ng,this.compileModuleAndAllComponentsSync=bA,this.compileModuleAndAllComponentsAsync=_d}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();const DA=(()=>Promise.resolve(0))();function Z0(r){"undefined"==typeof Zone?DA.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Xr{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new br(!1),this.onMicrotaskEmpty=new br(!1),this.onStable=new br(!1),this.onError=new br(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let r=$.requestAnimationFrame,i=$.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(r){const i=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call($,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,u_(r),r.isCheckStableRunning=!0,Y0(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),u_(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,d,g,y)=>{try{return qC(r),o.invokeTask(c,d,g,y)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),Q0(r)}},onInvoke:(o,u,c,d,g,y,w)=>{try{return qC(r),o.invoke(c,d,g,y,w)}finally{r.shouldCoalesceRunChangeDetection&&i(),Q0(r)}},onHasTask:(o,u,c,d)=>{o.hasTask(c,d),u===c&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,u_(r),Y0(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,c,d)=>(o.handleError(c,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const d=this._inner,g=d.scheduleEventTask("NgZoneEvent: "+c,i,SA,Sy,Sy);try{return d.runTask(g,o,u)}finally{d.cancelTask(g)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const SA={};function Y0(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function u_(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function qC(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function Q0(r){r._nesting--,Y0(r)}class J0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new br,this.onMicrotaskEmpty=new br,this.onStable=new br,this.onError=new br}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}let X0=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xr.assertNotInAngularZone(),Z0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Z0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(Tn(Xr))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})(),Pg=(()=>{class r{constructor(){this._applications=new Map,ew.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return ew.findTestabilityInTree(this,o,u)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();class RA{addToWindow(i){}findTestabilityInTree(i,o,u){return null}}function tR(r){ew=r}let ew=new RA,c_=!0,NA=!1;function zC(){return NA=!0,c_}function MA(){if(NA)throw new Error("Cannot enable prod mode after platform setup.");c_=!1}let Ho;const ZC=new Jt("AllowMultipleToken");class PA{constructor(i,o){this.name=i,this.token=o}}function oo(r,i,o=[]){const u=`Platform: ${i}`,c=new Jt(u);return(d=[])=>{let g=QC();if(!g||g.injector.get(ZC,!1))if(r)r(o.concat(d).concat({provide:c,useValue:!0}));else{const y=o.concat(d).concat({provide:c,useValue:!0},{provide:Sp,useValue:"platform"});!function(r){if(Ho&&!Ho.destroyed&&!Ho.injector.get(ZC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ho=r.get(JC);const i=r.get(vA,null);i&&i.forEach(o=>o())}(an.create({providers:y,name:u}))}return function(r){const i=QC();if(!i)throw new Error("No platform exists!");if(!i.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(c)}}function QC(){return Ho&&!Ho.destroyed?Ho:null}let JC=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const y=function(r,i){let o;return o="noop"===r?new J0:("zone.js"===r?void 0:r)||new Xr({enableLongStackTrace:zC(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),w=[{provide:Xr,useValue:y}];return y.run(()=>{const C=an.create({providers:w,parent:this.injector,name:o.moduleType.name}),S=o.create(C),N=S.injector.get(fu,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const P=y.onError.subscribe({next:j=>{N.handleError(j)}});S.onDestroy(()=>{tw(this._modules,S),P.unsubscribe()})}),function(r,i,o){try{const u=o();return $p(u)?u.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(N,y,()=>{const P=S.injector.get(bf);return P.runInitializers(),P.donePromise.then(()=>(wE(S.injector.get(Rg,Jh)||Jh),this._moduleDoBootstrap(S),S))})})}bootstrapModule(o,u=[]){const c=eD({},u);return function(r,i,o){const u=new Ig(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(o){const u=o.injector.get(Og);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${Z(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(Tn(an))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function eD(r,i){return Array.isArray(i)?i.reduce(eD,r):Object.assign(Object.assign({},r),i)}let Og=(()=>{class r{constructor(o,u,c,d,g){this._zone=o,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new k.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new k.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Xr.assertNotInAngularZone(),Z0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{Xr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ce.T)(y,w.pipe(r=>(0,ue.x)()(function(r,i){return function(u){let c;c="function"==typeof r?r:function(){return r};const d=Object.create(u,te.N);return d.source=u,d.subjectFactory=c,d}}(ee)(r))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=o instanceof Tb?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(c.componentType);const d=function(r){return r.isBoundToModule}(c)?void 0:this._injector.get(sd),y=c.create(an.NULL,[],u||c.selector,d),w=y.location.nativeElement,C=y.injector.get(X0,null),S=C&&y.injector.get(Pg);return C&&S&&S.registerApplication(w,C),y.onDestroy(()=>{this.detachView(y.hostView),tw(this.components,y),S&&S.unregisterApplication(w)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;tw(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(jC,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(Tn(Xr),Tn(an),Tn(fu),Tn(Bo),Tn(bf))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function tw(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}class d_{}class FA{}const LA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let VA=(()=>{class r{constructor(o,u){this._compiler=o,this._config=u||LA}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,c]=o.split("#");return void 0===c&&(c="default"),L(8255)(u).then(d=>d[c]).then(d=>rD(d,u,c)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,c]=o.split("#"),d="NgFactory";return void 0===c&&(c="default",d=""),L(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(g=>g[c+d]).then(g=>rD(g,u,c))}}return r.\u0275fac=function(o){return new(o||r)(Tn(vd),Tn(FA,8))},r.\u0275prov=Et({token:r,factory:r.\u0275fac}),r})();function rD(r,i,o){if(!r)throw new Error(`Cannot find '${o}' in '${i}'`);return r}const BA=function(r){return null},lD=oo(null,"core",[{provide:UC,useValue:"unknown"},{provide:JC,deps:[an]},{provide:Pg,deps:[]},{provide:z0,deps:[]}]),qA=[{provide:Og,useClass:Og,deps:[Xr,an,fu,Bo,bf]},{provide:jS,deps:[Xr],useFactory:function(r){let i=[];return r.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(o){i.push(o)}}},{provide:bf,useClass:bf,deps:[[new Ui,W0]]},{provide:vd,useClass:vd,deps:[]},_A,{provide:cf,useFactory:function(){return Vb},deps:[]},{provide:Oy,useFactory:function(){return Ub},deps:[]},{provide:Rg,useFactory:function(r){return wE(r=r||"undefined"!=typeof $localize&&$localize.locale||Jh),r},deps:[[new _c(Rg),new Ui,new ha]]},{provide:Cf,useValue:"USD"}];let KA=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(Tn(Og))},r.\u0275mod=Wo({type:r}),r.\u0275inj=Tr({providers:qA}),r})()},8939:(Ye,Ee,L)=>{"use strict";L.d(Ee,{hO:()=>Z,xv:()=>ee,Dh:()=>ue,GT:()=>re,cc:()=>se,on:()=>F,pX:()=>te});var E=L(3018),X=L(7841),k=L(5236);Ye=L.hmd(Ye);const ce=["ngOnDestroy"],te=(ge,fe,he,Se={})=>new Proxy(ge,{get:(Ge,Pe)=>he.runOutsideAngular(()=>{var Tt;if(ge[Pe])return(null===(Tt=null==Se?void 0:Se.spy)||void 0===Tt?void 0:Tt.get)&&Se.spy.get(Pe,ge[Pe]),ge[Pe];if(ce.indexOf(Pe)>-1)return()=>{};const ht=fe.toPromise().then(fn=>{const gt=fn&&fn[Pe];return"function"==typeof gt?gt.bind(fn):gt&&gt.then?gt.then(_t=>he.run(()=>_t)):he.run(()=>gt)});return new Proxy(()=>{},{get:(fn,gt)=>ht[gt],apply:(fn,gt,_t)=>ht.then(ot=>{var rt;const St=ot&&ot(..._t);return(null===(rt=null==Se?void 0:Se.spy)||void 0===rt?void 0:rt.apply)&&Se.spy.apply(Pe,_t,St),St})})})}),re=(ge,fe)=>{fe.forEach(he=>{Object.getOwnPropertyNames(he.prototype||he).forEach(Se=>{Object.defineProperty(ge.prototype,Se,Object.getOwnPropertyDescriptor(he.prototype||he,Se))})})};class pe{constructor(fe){return fe}}const ue=new E.OlP("angularfire2.app.options"),ee=new E.OlP("angularfire2.app.name");function F(ge,fe,he){const Ge="object"==typeof he&&he||{};Ge.name=Ge.name||"string"==typeof he&&he||"[DEFAULT]";const Tt=X.Z.apps.filter(ht=>ht&&ht.name===Ge.name)[0]||fe.runOutsideAngular(()=>X.Z.initializeApp(ge,Ge));try{JSON.stringify(ge)!==JSON.stringify(Tt.options)&&V("error",`${Tt.name} Firebase App already initialized with different options${Ye.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ht){}return new pe(Tt)}const V=(ge,...fe)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[ge](...fe)},Y={provide:pe,useFactory:F,deps:[ue,E.R0b,[new E.FiY,ee]]};let Z=(()=>{class ge{constructor(he){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",E.q4F.full,he.toString())}static initializeApp(he,Se){return{ngModule:ge,providers:[{provide:ue,useValue:he},{provide:ee,useValue:Se}]}}}return ge.\u0275fac=function(he){return new(he||ge)(E.LFG(E.Lbi))},ge.\u0275mod=E.oAB({type:ge}),ge.\u0275inj=E.cJS({providers:[Y]}),ge})();function se(ge,fe,he,Se,Ge){const[,Pe,Tt]=globalThis.\u0275AngularfireInstanceCache.find(ht=>ht[0]===ge)||[];if(Pe)return function(ge,fe){try{return ge.toString()===fe.toString()}catch(he){return ge===fe}}(Ge,Tt)||(q("error",`${fe} was already initialized on the ${he} Firebase App with different settings.${de?" You may need to reload as Firebase is not HMR aware.":""}`),q("warn",{is:Ge,was:Tt})),Pe;{const ht=Se();return globalThis.\u0275AngularfireInstanceCache.push([ge,ht,Ge]),ht}}const de=!!Ye.hot,q=(ge,...fe)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[ge](...fe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5236:(Ye,Ee,L)=>{"use strict";L.d(Ee,{q4:()=>zd,iC:()=>sr,HU:()=>ui,vb:()=>eu,JM:()=>mc});var E=L(3018),X=L(2329),k=L(8239),ce=L(8026),te=L(3854),re=L(3910),pe=L(5422),ue=L(6676);const ee="@firebase/installations",F="0.5.4",Y=`w:${F}`,Z="FIS_v2",fe=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function he(b){return b instanceof te.ZR&&b.code.includes("request-failed")}function Se({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Ge(b){return{token:b.token,requestStatus:2,expiresIn:ot(b.expiresIn),creationTime:Date.now()}}function Pe(b,T){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,k.Z)(function*(b,T){const U=(yield T.json()).error;return fe.create("request-failed",{requestName:b,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function ht({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function fn(b,{refreshToken:T}){const R=ht(b);return R.append("Authorization",function(b){return`${Z} ${b}`}(T)),R}function gt(b){return _t.apply(this,arguments)}function _t(){return(_t=(0,k.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function ot(b){return Number(b.replace("s","000"))}function St(b,T){return ze.apply(this,arguments)}function ze(){return(ze=(0,k.Z)(function*(b,{fid:T}){const R=Se(b),ae={method:"POST",headers:ht(b),body:JSON.stringify({fid:T,authVersion:Z,appId:b.appId,sdkVersion:Y})},be=yield gt(()=>fetch(R,ae));if(be.ok){const Ue=yield be.json();return{fid:Ue.fid||T,registrationStatus:2,refreshToken:Ue.refreshToken,authToken:Ge(Ue.authToken)}}throw yield Pe("Create Installation",be)})).apply(this,arguments)}function ti(b){return new Promise(T=>{setTimeout(T,b)})}const ao=/^[cdef][\w-]{21}$/;function An(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const R=function(b){return function(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return ao.test(R)?R:""}catch(b){return""}}function ns(b){return`${b.appName}!${b.appId}`}const Ds=new Map;function rs(b,T){const R=ns(b);$n(R,T),function(b,T){const R=(!Ft&&"BroadcastChannel"in self&&(Ft=new BroadcastChannel("[Firebase] FID Change"),Ft.onmessage=b=>{$n(b.data.key,b.data.fid)}),Ft);R&&R.postMessage({key:b,fid:T}),0===Ds.size&&Ft&&(Ft.close(),Ft=null)}(R,T)}function $n(b,T){const R=Ds.get(b);if(R)for(const U of R)U(T)}let Ft=null;const Ce="firebase-installations-store";let er=null;function xn(){return er||(er=(0,ue.openDb)("firebase-installations-database",1,b=>{switch(b.oldVersion){case 0:b.createObjectStore(Ce)}})),er}function gi(b,T){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,k.Z)(function*(b,T){const R=ns(b),z=(yield xn()).transaction(Ce,"readwrite"),ae=z.objectStore(Ce),be=yield ae.get(R);return yield ae.put(T,R),yield z.complete,(!be||be.fid!==T.fid)&&rs(b,T.fid),T})).apply(this,arguments)}function Ur(b){return uo.apply(this,arguments)}function uo(){return(uo=(0,k.Z)(function*(b){const T=ns(b),U=(yield xn()).transaction(Ce,"readwrite");yield U.objectStore(Ce).delete(T),yield U.complete})).apply(this,arguments)}function et(b,T){return De.apply(this,arguments)}function De(){return(De=(0,k.Z)(function*(b,T){const R=ns(b),z=(yield xn()).transaction(Ce,"readwrite"),ae=z.objectStore(Ce),be=yield ae.get(R),Ue=T(be);return void 0===Ue?yield ae.delete(R):yield ae.put(Ue,R),yield z.complete,Ue&&(!be||be.fid!==Ue.fid)&&rs(b,Ue.fid),Ue})).apply(this,arguments)}function Lt(b){return en.apply(this,arguments)}function en(){return(en=(0,k.Z)(function*(b){let T;const R=yield et(b,U=>{const z=pn(U),ae=Ot(b,z);return T=ae.registrationPromise,ae.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function pn(b){return mt(b||{fid:An(),registrationStatus:0})}function Ot(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(fe.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:R,registrationPromise:function(b,T){return We.apply(this,arguments)}(b,R)}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Sr(b)}:{installationEntry:T}}function We(){return(We=(0,k.Z)(function*(b,T){try{return gi(b,yield St(b,T))}catch(R){throw he(R)&&409===R.customData.serverCode?yield Ur(b):yield gi(b,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Sr(b){return co.apply(this,arguments)}function co(){return(co=(0,k.Z)(function*(b){let T=yield Gt(b);for(;1===T.registrationStatus;)yield ti(100),T=yield Gt(b);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Lt(b);return U||R}return T})).apply(this,arguments)}function Gt(b){return et(b,T=>{if(!T)throw fe.create("installation-not-found");return mt(T)})}function mt(b){return function(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function $u(b,T){return G.apply(this,arguments)}function G(){return(G=(0,k.Z)(function*({appConfig:b,platformLoggerProvider:T},R){const U=H(b,R),z=fn(b,R),ae=T.getImmediate({optional:!0});ae&&z.append("x-firebase-client",ae.getPlatformInfoString());const Ue={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:Y}})},je=yield gt(()=>fetch(U,Ue));if(je.ok)return Ge(yield je.json());throw yield Pe("Generate Auth Token",je)})).apply(this,arguments)}function H(b,{fid:T}){return`${Se(b)}/${T}/authTokens:generate`}function $(b){return ve.apply(this,arguments)}function ve(){return(ve=(0,k.Z)(function*(b,T=!1){let R;const U=yield et(b.appConfig,ae=>{if(!cn(ae))throw fe.create("not-registered");const be=ae.authToken;if(!T&&Ar(be))return ae;if(1===be.requestStatus)return R=ie(b,T),ae;{if(!navigator.onLine)throw fe.create("app-offline");const Ue=sn(ae);return R=Wt(b,Ue),Ue}});return R?yield R:U.authToken})).apply(this,arguments)}function ie(b,T){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,k.Z)(function*(b,T){let R=yield Le(b.appConfig);for(;1===R.authToken.requestStatus;)yield ti(100),R=yield Le(b.appConfig);const U=R.authToken;return 0===U.requestStatus?$(b,T):U})).apply(this,arguments)}function Le(b){return et(b,T=>{if(!cn(T))throw fe.create("not-registered");return function(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Wt(b,T){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,k.Z)(function*(b,T){try{const R=yield $u(b,T),U=Object.assign(Object.assign({},T),{authToken:R});return yield gi(b.appConfig,U),R}catch(R){if(!he(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield gi(b.appConfig,U)}else yield Ur(b.appConfig);throw R}})).apply(this,arguments)}function cn(b){return void 0!==b&&2===b.registrationStatus}function Ar(b){return 2===b.requestStatus&&!function(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function sn(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function lo(){return(lo=(0,k.Z)(function*(b){const T=b,{installationEntry:R,registrationPromise:U}=yield Lt(T.appConfig);return U?U.catch(console.error):$(T).catch(console.error),R.fid})).apply(this,arguments)}function ho(){return(ho=(0,k.Z)(function*(b,T=!1){const R=b;return yield tl(R.appConfig),(yield $(R,T)).token})).apply(this,arguments)}function tl(b){return ni.apply(this,arguments)}function ni(){return(ni=(0,k.Z)(function*(b){const{registrationPromise:T}=yield Lt(b);T&&(yield T)})).apply(this,arguments)}function tr(b){return fe.create("missing-app-config-values",{valueName:b})}const bd="installations";(0,ce._registerComponent)(new re.wA(bd,b=>{const T=b.getProvider("app").getImmediate();return{app:T,appConfig:function(b){if(!b||!b.options)throw tr("App Configuration");if(!b.name)throw tr("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!b.options[R])throw tr(R);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T),platformLoggerProvider:(0,ce._getProvider)(T,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new re.wA("installations-internal",b=>{const T=b.getProvider("app").getImmediate(),R=(0,ce._getProvider)(T,bd).getImmediate();return{getId:()=>function(b){return lo.apply(this,arguments)}(R),getToken:z=>function(b){return ho.apply(this,arguments)}(R,z)}},"PRIVATE")),(0,ce.registerVersion)(ee,F),(0,ce.registerVersion)(ee,F,"esm2017");const gn="@firebase/remote-config",Rn=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Mf{constructor(T,R,U,z){this.client=T,this.storage=R,this.storageCache=U,this.logger=z}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,z=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${z}.`),z}fetch(T){var R=this;return(0,k.Z)(function*(){const[U,z]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(z&&R.isCachedDataFresh(T.cacheMaxAgeMillis,U))return z;T.eTag=z&&z.eTag;const ae=yield R.client.fetch(T),be=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&be.push(R.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(be),ae})()}}function Ri(b=navigator){return b.languages&&b.languages[0]||b.language}class mn{constructor(T,R,U,z,ae,be){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=U,this.projectId=z,this.apiKey=ae,this.appId=be}fetch(T){var R=this;return(0,k.Z)(function*(){const[U,z]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),be=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ue={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},je={sdk_version:R.sdkVersion,app_instance_id:U,app_instance_id_token:z,app_id:R.appId,language_code:Ri()},kt={method:"POST",headers:Ue,body:JSON.stringify(je)},Bt=fetch(be,kt),zn=new Promise((gs,Ao)=>{T.signal.addEventListener(()=>{const ft=new Error("The operation was aborted.");ft.name="AbortError",Ao(ft)})});let Kn;try{yield Promise.race([Bt,zn]),Kn=yield Bt}catch(gs){let Ao="fetch-client-network";throw"AbortError"===gs.name&&(Ao="fetch-timeout"),Rn.create(Ao,{originalErrorMessage:gs.message})}let Zn=Kn.status;const Hs=Kn.headers.get("ETag")||void 0;let So,Vi;if(200===Kn.status){let gs;try{gs=yield Kn.json()}catch(Ao){throw Rn.create("fetch-client-parse",{originalErrorMessage:Ao.message})}So=gs.entries,Vi=gs.state}if("INSTANCE_STATE_UNSPECIFIED"===Vi?Zn=500:"NO_CHANGE"===Vi?Zn=304:("NO_TEMPLATE"===Vi||"EMPTY_CONFIG"===Vi)&&(So={}),304!==Zn&&200!==Zn)throw Rn.create("fetch-status",{httpStatus:Zn});return{status:Zn,eTag:Hs,config:So}})()}}class Yo{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,k.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:U}){var z=this;return(0,k.Z)(function*(){yield function(b,T){return new Promise((R,U)=>{const z=Math.max(T-Date.now(),0),ae=setTimeout(R,z);b.addEventListener(()=>{clearTimeout(ae),U(Rn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ae=yield z.client.fetch(T);return yield z.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function(b){if(!(b instanceof te.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ae))throw ae;const be={throttleEndTimeMillis:Date.now()+(0,te.$s)(U),backoffCount:U+1};return yield z.storage.setThrottleMetadata(be),z.attemptFetch(T,be)}})()}}class Ug{constructor(T,R,U,z,ae){this.app=T,this._client=R,this._storageCache=U,this._storage=z,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qo(b,T){const R=b.target.error||void 0;return Rn.create(T,{originalErrorMessage:R&&R.message})}const mo="app_namespace_store";class jg{constructor(T,R,U,z=function(){return new Promise((b,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=U=>{T(Qo(U,"storage-open"))},R.onsuccess=U=>{b(U.target.result)},R.onupgradeneeded=U=>{const z=U.target.result;switch(U.oldVersion){case 0:z.createObjectStore(mo,{keyPath:"compositeKey"})}}}catch(R){T(Rn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=T,this.appName=R,this.namespace=U,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,k.Z)(function*(){const U=yield R.openDbPromise;return new Promise((z,ae)=>{const Ue=U.transaction([mo],"readonly").objectStore(mo),je=R.createCompositeKey(T);try{const kt=Ue.get(je);kt.onerror=Bt=>{ae(Qo(Bt,"storage-get"))},kt.onsuccess=Bt=>{const zn=Bt.target.result;z(zn?zn.value:void 0)}}catch(kt){ae(Rn.create("storage-get",{originalErrorMessage:kt&&kt.message}))}})})()}set(T,R){var U=this;return(0,k.Z)(function*(){const z=yield U.openDbPromise;return new Promise((ae,be)=>{const je=z.transaction([mo],"readwrite").objectStore(mo),kt=U.createCompositeKey(T);try{const Bt=je.put({compositeKey:kt,value:R});Bt.onerror=zn=>{be(Qo(zn,"storage-set"))},Bt.onsuccess=()=>{ae()}}catch(Bt){be(Rn.create("storage-set",{originalErrorMessage:Bt&&Bt.message}))}})})()}delete(T){var R=this;return(0,k.Z)(function*(){const U=yield R.openDbPromise;return new Promise((z,ae)=>{const Ue=U.transaction([mo],"readwrite").objectStore(mo),je=R.createCompositeKey(T);try{const kt=Ue.delete(je);kt.onerror=Bt=>{ae(Qo(Bt,"storage-delete"))},kt.onsuccess=()=>{z()}}catch(kt){ae(Rn.create("storage-delete",{originalErrorMessage:kt&&kt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Ad{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const R=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),z=T.storage.getActiveConfig(),ae=yield R;ae&&(T.lastFetchStatus=ae);const be=yield U;be&&(T.lastSuccessfulFetchTimestampMillis=be);const Ue=yield z;Ue&&(T.activeConfig=Ue)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function il(){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,k.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(b){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new re.wA("remote-config",function(T,{instanceIdentifier:R}){const U=T.getProvider("app").getImmediate(),z=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rn.create("registration-window");if(!(0,te.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:ae,apiKey:be,appId:Ue}=U.options;if(!ae)throw Rn.create("registration-project-id");if(!be)throw Rn.create("registration-api-key");if(!Ue)throw Rn.create("registration-app-id");const je=new jg(Ue,U.name,R=R||"firebase"),kt=new Ad(je),Bt=new pe.Yd(gn);Bt.logLevel=pe.in.ERROR;const zn=new mn(z,ce.SDK_VERSION,R,ae,be,Ue),Kn=new Yo(zn,je),Zn=new Mf(Kn,je,kt,Bt),Hs=new Ug(U,Zn,kt,je,Bt);return function(b){const T=(0,te.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Hs),Hs},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(gn,"0.3.3"),(0,ce.registerVersion)(gn,"0.3.3","esm2017");const Nd="/firebase-messaging-sw.js",Bg="/firebase-cloud-messaging-push-scope",Oa="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ka="google.c.a.c_id",Jo="google.c.a.c_l",Ms="google.c.a.ts",sl="google.c.a.e";var yn=(()=>{return(b=yn||(yn={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",yn;var b})();function Ni(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gu(b){const R=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),z=new Uint8Array(U.length);for(let ae=0;ae<U.length;++ae)z[ae]=U.charCodeAt(ae);return z}const Fa="fcm_token_details_db",kf="fcm_token_object_Store";function ol(b){return La.apply(this,arguments)}function La(){return(La=(0,k.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(Fa))return null;let T=null;return(yield(0,ue.openDb)(Fa,5,function(){var U=(0,k.Z)(function*(z){var ae;if(z.oldVersion<2||!z.objectStoreNames.contains(kf))return;const be=z.transaction.objectStore(kf),Ue=yield be.index("fcmSenderId").get(b);if(yield be.clear(),Ue)if(2===z.oldVersion){const je=Ue;if(!je.auth||!je.p256dh||!je.endpoint)return;T={token:je.fcmToken,createTime:null!==(ae=je.createTime)&&void 0!==ae?ae:Date.now(),subscriptionOptions:{auth:je.auth,p256dh:je.p256dh,endpoint:je.endpoint,swScope:je.swScope,vapidKey:"string"==typeof je.vapidKey?je.vapidKey:Ni(je.vapidKey)}}}else if(3===z.oldVersion){const je=Ue;T={token:je.fcmToken,createTime:je.createTime,subscriptionOptions:{auth:Ni(je.auth),p256dh:Ni(je.p256dh),endpoint:je.endpoint,swScope:je.swScope,vapidKey:Ni(je.vapidKey)}}}else if(4===z.oldVersion){const je=Ue;T={token:je.fcmToken,createTime:je.createTime,subscriptionOptions:{auth:Ni(je.auth),p256dh:Ni(je.p256dh),endpoint:je.endpoint,swScope:je.swScope,vapidKey:Ni(je.vapidKey)}}}});return function(z){return U.apply(this,arguments)}}())).close(),yield(0,ue.deleteDb)(Fa),yield(0,ue.deleteDb)("fcm_vapid_details_db"),yield(0,ue.deleteDb)("undefined"),Ff(T)?T:null})).apply(this,arguments)}function Ff(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Wn="firebase-messaging-store";let Wu=null;function Ps(){return Wu||(Wu=(0,ue.openDb)("firebase-messaging-database",1,b=>{switch(b.oldVersion){case 0:b.createObjectStore(Wn)}})),Wu}function Va(b){return os.apply(this,arguments)}function os(){return(os=(0,k.Z)(function*(b){const T=Ua(b),U=yield(yield Ps()).transaction(Wn).objectStore(Wn).get(T);if(U)return U;{const z=yield ol(b.appConfig.senderId);if(z)return yield jr(b,z),z}})).apply(this,arguments)}function jr(b,T){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,k.Z)(function*(b,T){const R=Ua(b),z=(yield Ps()).transaction(Wn,"readwrite");return yield z.objectStore(Wn).put(T,R),yield z.complete,T})).apply(this,arguments)}function Zt(b){return qu.apply(this,arguments)}function qu(){return(qu=(0,k.Z)(function*(b){const T=Ua(b),U=(yield Ps()).transaction(Wn,"readwrite");yield U.objectStore(Wn).delete(T),yield U.complete})).apply(this,arguments)}function Ua({appConfig:b}){return b.appId}const wt=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ea(b,T){return kd.apply(this,arguments)}function kd(){return(kd=(0,k.Z)(function*(b,T){const R=yield nr(b),U=ta(T),z={method:"POST",headers:R,body:JSON.stringify(U)};let ae;try{ae=yield(yield fetch(Vn(b.appConfig),z)).json()}catch(be){throw wt.create("token-subscribe-failed",{errorInfo:be})}if(ae.error)throw wt.create("token-subscribe-failed",{errorInfo:ae.error.message});if(!ae.token)throw wt.create("token-subscribe-no-token");return ae.token})).apply(this,arguments)}function _o(b,T){return xr.apply(this,arguments)}function xr(){return(xr=(0,k.Z)(function*(b,T){const R=yield nr(b),U=ta(T.subscriptionOptions),z={method:"PATCH",headers:R,body:JSON.stringify(U)};let ae;try{ae=yield(yield fetch(`${Vn(b.appConfig)}/${T.token}`,z)).json()}catch(be){throw wt.create("token-update-failed",{errorInfo:be})}if(ae.error)throw wt.create("token-update-failed",{errorInfo:ae.error.message});if(!ae.token)throw wt.create("token-update-no-token");return ae.token})).apply(this,arguments)}function Fd(b,T){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,k.Z)(function*(b,T){const U={method:"DELETE",headers:yield nr(b)};try{const ae=yield(yield fetch(`${Vn(b.appConfig)}/${T}`,U)).json();if(ae.error)throw wt.create("token-unsubscribe-failed",{errorInfo:ae.error.message})}catch(z){throw wt.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function Vn({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function nr(b){return zu.apply(this,arguments)}function zu(){return(zu=(0,k.Z)(function*({appConfig:b,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function ta({p256dh:b,auth:T,endpoint:R,vapidKey:U}){const z={web:{endpoint:R,auth:T,p256dh:b}};return U!==Oa&&(z.web.applicationPubKey=U),z}const ja=6048e5;function as(b){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,k.Z)(function*(b){const T=yield Zu(b.swRegistration,b.vapidKey),R={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:Ni(T.getKey("auth")),p256dh:Ni(T.getKey("p256dh"))},U=yield Va(b.firebaseDependencies);if(U){if(al(U.subscriptionOptions,R))return Date.now()>=U.createTime+ja?Ld(b,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield Fd(b.firebaseDependencies,U.token)}catch(z){console.warn(z)}return Os(b.firebaseDependencies,R)}return Os(b.firebaseDependencies,R)})).apply(this,arguments)}function Ku(b){return nt.apply(this,arguments)}function nt(){return(nt=(0,k.Z)(function*(b){const T=yield Va(b.firebaseDependencies);T&&(yield Fd(b.firebaseDependencies,T.token),yield Zt(b.firebaseDependencies));const R=yield b.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Ld(b,T){return us.apply(this,arguments)}function us(){return(us=(0,k.Z)(function*(b,T){try{const R=yield _o(b.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield jr(b.firebaseDependencies,U),R}catch(R){throw yield Ku(b),R}})).apply(this,arguments)}function Os(b,T){return vo.apply(this,arguments)}function vo(){return(vo=(0,k.Z)(function*(b,T){const U={token:yield ea(b,T),createTime:Date.now(),subscriptionOptions:T};return yield jr(b,U),U.token})).apply(this,arguments)}function Zu(b,T){return cs.apply(this,arguments)}function cs(){return(cs=(0,k.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gu(T)})})).apply(this,arguments)}function al(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function Ie(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcm_message_id};return function(b,T){if(!T.notification)return;b.notification={};const R=T.notification.title;R&&(b.notification.title=R);const U=T.notification.body;U&&(b.notification.body=U);const z=T.notification.image;z&&(b.notification.image=z)}(T,b),function(b,T){!T.data||(b.data=T.data)}(T,b),function(b,T){if(!T.fcmOptions)return;b.fcmOptions={};const R=T.fcmOptions.link;R&&(b.fcmOptions.link=R);const U=T.fcmOptions.analytics_label;U&&(b.fcmOptions.analyticsLabel=U)}(T,b),T}function Qu(b){return"object"==typeof b&&!!b&&ka in b}function Eo(b,T){const R=[];for(let U=0;U<b.length;U++)R.push(b.charAt(U)),U<T.length&&R.push(T.charAt(U));return R.join("")}function $a(b){return wt.create("missing-app-config-values",{valueName:b})}Eo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Eo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ks{constructor(T,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function(b){if(!b||!b.options)throw $a("App Configuration Object");if(!b.name)throw $a("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=b;for(const U of T)if(!R[U])throw $a(U);return{appName:b.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:z,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Vd(b){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,k.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Nd,{scope:Bg}),b.swRegistration.update().catch(()=>{})}catch(T){throw wt.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function ls(b,T){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,k.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield Vd(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw wt.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function qn(b,T){return oi.apply(this,arguments)}function oi(){return(oi=(0,k.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=Oa)})).apply(this,arguments)}function Fs(){return(Fs=(0,k.Z)(function*(b,T){if(!navigator)throw wt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw wt.create("permission-blocked");return yield qn(b,null==T?void 0:T.vapidKey),yield ls(b,null==T?void 0:T.serviceWorkerRegistration),as(b)})).apply(this,arguments)}function yi(b,T,R){return ul.apply(this,arguments)}function ul(){return(ul=(0,k.Z)(function*(b,T,R){const U=Xu(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[ka],message_name:R[Jo],message_time:R[Ms],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Xu(b){switch(b){case yn.NOTIFICATION_CLICKED:return"notification_open";case yn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ra(){return(ra=(0,k.Z)(function*(b,T){const R=T.data;if(!R.isFirebaseMessaging)return;b.onMessageHandler&&R.messageType===yn.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Ie(R)):b.onMessageHandler.next(Ie(R)));const U=R.data;Qu(U)&&"1"===U[sl]&&(yield yi(b,R.messageType,U))})).apply(this,arguments)}const tc="@firebase/messaging";function jd(){return ds.apply(this,arguments)}function ds(){return(ds=(0,k.Z)(function*(){return"undefined"!=typeof window&&(0,te.hl)()&&(yield(0,te.eu)())&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new re.wA("messaging",b=>{const T=new ks(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function(b,T){return ra.apply(this,arguments)}(T,R)),T},"PUBLIC")),(0,ce._registerComponent)(new re.wA("messaging-internal",b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:U=>function(b,T){return Fs.apply(this,arguments)}(T,U)}},"PRIVATE")),(0,ce.registerVersion)(tc,"0.9.4"),(0,ce.registerVersion)(tc,"0.9.4","esm2017");const Br="analytics",ln="firebase_id",Wa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hd="https://www.googletagmanager.com/gtag/js",Nn=new pe.Yd("@firebase/analytics");function Gd(b){return Promise.all(b.map(T=>T.catch(R=>R)))}function sc(b,T){const R=document.createElement("script");R.src=`${Hd}?l=${b}&id=${T}`,R.async=!0,document.head.appendChild(R)}function za(b,T,R,U,z,ae){return oc.apply(this,arguments)}function oc(){return(oc=(0,k.Z)(function*(b,T,R,U,z,ae){const be=U[z];try{if(be)yield T[be];else{const je=(yield Gd(R)).find(kt=>kt.measurementId===z);je&&(yield T[je.appId])}}catch(Ue){Nn.error(Ue)}b("config",z,ae)})).apply(this,arguments)}function wo(b,T,R,U,z){return ac.apply(this,arguments)}function ac(){return(ac=(0,k.Z)(function*(b,T,R,U,z){try{let ae=[];if(z&&z.send_to){let be=z.send_to;Array.isArray(be)||(be=[be]);const Ue=yield Gd(R);for(const je of be){const kt=Ue.find(zn=>zn.measurementId===je),Bt=kt&&T[kt.appId];if(!Bt){ae=[];break}ae.push(Bt)}}0===ae.length&&(ae=Object.values(T)),yield Promise.all(ae),b("event",U,z||{})}catch(ae){Nn.error(ae)}})).apply(this,arguments)}function Hg(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(Hd))return T;return null}const rr=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wg=new class{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function x_(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Za(b){return uc.apply(this,arguments)}function uc(){return(uc=(0,k.Z)(function*(b){var T;const{appId:R,apiKey:U}=b,z={method:"GET",headers:x_(U)},ae=Wa.replace("{app-id}",R),be=yield fetch(ae,z);if(200!==be.status&&304!==be.status){let Ue="";try{const je=yield be.json();(null===(T=je.error)||void 0===T?void 0:T.message)&&(Ue=je.error.message)}catch(je){}throw rr.create("config-fetch-failed",{httpStatus:be.status,responseMessage:Ue})}return be.json()})).apply(this,arguments)}function cc(b){return _i.apply(this,arguments)}function _i(){return(_i=(0,k.Z)(function*(b,T=Wg,R){const{appId:U,apiKey:z,measurementId:ae}=b.options;if(!U)throw rr.create("no-app-id");if(!z){if(ae)return{measurementId:ae,appId:U};throw rr.create("no-api-key")}const be=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new Qa;return setTimeout((0,k.Z)(function*(){Ue.abort()}),void 0!==R?R:6e4),lc({appId:U,apiKey:z,measurementId:ae},be,Ue,T)})).apply(this,arguments)}function lc(b,T,R){return dc.apply(this,arguments)}function dc(){return(dc=(0,k.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:R},U,z=Wg){const{appId:ae,measurementId:be}=b;try{yield Ya(U,T)}catch(Ue){if(be)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${be} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:ae,measurementId:be};throw Ue}try{const Ue=yield Za(b);return z.deleteThrottleMetadata(ae),Ue}catch(Ue){if(!$f(Ue)){if(z.deleteThrottleMetadata(ae),be)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${be} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:ae,measurementId:be};throw Ue}const je=503===Number(Ue.customData.httpStatus)?(0,te.$s)(R,z.intervalMillis,30):(0,te.$s)(R,z.intervalMillis),kt={throttleEndTimeMillis:Date.now()+je,backoffCount:R+1};return z.setThrottleMetadata(ae,kt),Nn.debug(`Calling attemptFetch again in ${je} millis`),lc(b,kt,U,z)}})).apply(this,arguments)}function Ya(b,T){return new Promise((R,U)=>{const z=Math.max(T-Date.now(),0),ae=setTimeout(R,z);b.addEventListener(()=>{clearTimeout(ae),U(rr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function $f(b){if(!(b instanceof te.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Qa{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function hc(){return bo.apply(this,arguments)}function bo(){return(bo=(0,k.Z)(function*(){if(!(0,te.hl)())return Nn.warn(rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(b){return Nn.warn(rr.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function sa(){return(sa=(0,k.Z)(function*(b,T,R,U,z,ae,be){var Ue;const je=cc(b);je.then(Zn=>{R[Zn.measurementId]=Zn.appId,b.options.measurementId&&Zn.measurementId!==b.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Zn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Zn=>Nn.error(Zn)),T.push(je);const kt=hc().then(Zn=>{if(Zn)return U.getId()}),[Bt,zn]=yield Promise.all([je,kt]);Hg()||sc(ae,Bt.measurementId),z("js",new Date);const Kn=null!==(Ue=null==be?void 0:be.config)&&void 0!==Ue?Ue:{};return Kn.origin="firebase",Kn.update=!0,null!=zn&&(Kn[ln]=zn),z("config",Bt.measurementId,Kn),Bt.measurementId})).apply(this,arguments)}class dn{constructor(T){this.app=T}_delete(){return delete Qe[this.app.options.appId],Promise.resolve()}}let Qe={},hs=[];const Co={};let fc,tn,pr="dataLayer",cl=!1;function vi(b,T,R){!function(){const b=[];if((0,te.ru)()&&b.push("This is a browser extension environment."),(0,te.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((U,z)=>`(${z+1}) ${U}`).join(" "),R=rr.create("invalid-analytics-context",{errorInfo:T});Nn.warn(R.message)}}();const U=b.options.appId;if(!U)throw rr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw rr.create("no-api-key");Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qe[U])throw rr.create("already-exists",{id:U});if(!cl){!function(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(pr);const{wrappedGtag:ae,gtagCore:be}=function(b,T,R,U,z){let ae=function(...be){window[U].push(arguments)};return window[z]&&"function"==typeof window[z]&&(ae=window[z]),window[z]=function(b,T,R,U){function ae(){return(ae=(0,k.Z)(function*(be,Ue,je){try{"event"===be?yield wo(b,T,R,Ue,je):"config"===be?yield za(b,T,R,U,Ue,je):b("set",Ue)}catch(kt){Nn.error(kt)}})).apply(this,arguments)}return function(be,Ue,je){return ae.apply(this,arguments)}}(ae,b,T,R),{gtagCore:ae,wrappedGtag:window[z]}}(Qe,hs,Co,pr,"gtag");tn=ae,fc=be,cl=!0}return Qe[U]=function(b,T,R,U,z,ae,be){return sa.apply(this,arguments)}(b,hs,Co,T,fc,pr,R),new dn(b)}function ll(){return(ll=(0,k.Z)(function*(b,T,R,U,z){if(z&&z.global)b("event",R,U);else{const ae=yield T;b("event",R,Object.assign(Object.assign({},U),{send_to:ae}))}})).apply(this,arguments)}function ki(){return js.apply(this,arguments)}function js(){return(js=(0,k.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(b){return!1}})).apply(this,arguments)}const Wf="@firebase/analytics";(0,ce._registerComponent)(new re.wA(Br,(T,{options:R})=>vi(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ce._registerComponent)(new re.wA("analytics-internal",function(T){try{const R=T.getProvider(Br).getImmediate();return{logEvent:(U,z,ae)=>function(b,T,R,U){b=(0,te.m9)(b),function(b,T,R,U,z){return ll.apply(this,arguments)}(tn,Qe[b.app.options.appId],T,R,U).catch(z=>Nn.error(z))}(R,U,z,ae)}}catch(R){throw rr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ce.registerVersion)(Wf,"0.7.4"),(0,ce.registerVersion)(Wf,"0.7.4","esm2017");var zg=L(7771),Jt=L(3637),gc=L(3342),la=L(3101),Kg=L(309);const zd=new E.GfV("7.2.0"),fl="__angularfire_symbol__analyticsIsSupported",Bs="__angularfire_symbol__remoteConfigIsSupported",Xa="__angularfire_symbol__messagingIsSupported";function mc(b,T,R){if(T){if(1===T.length)return T[0];const ae=T.filter(be=>be.app===R);if(1===ae.length)return ae[0]}return R.container.getProvider(b).getImmediate({optional:!0})}globalThis[fl]||(globalThis[fl]=ki().then(b=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=b)),globalThis[Xa]||(globalThis[Xa]=jd().then(b=>globalThis.__angularfire_symbol__messagingIsSupportedValue=b)),globalThis[Bs]||(globalThis[Bs]=il().then(b=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=b));const eu=(b,T)=>{const R=T?[T]:(0,X.C6)(),U=[];return R.forEach(z=>{z.container.getProvider(b).instances.forEach(be=>{U.includes(be)||U.push(be)})}),U};function tu(){}class Zd{constructor(T,R=zg.N){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,U){const z=this.zone;return this.delegate.schedule(function(be){z.runGuarded(()=>{T.apply(this,[be])})},R,U)}}class ai{constructor(T){this.zone=T,this.task=null}call(T,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tu,{},tu,tu)),R.pipe((0,gc.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ui=(()=>{class b{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Zd(Zone.current)),this.insideAngular=R.run(()=>new Zd(Zone.current,Jt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(R){return new(R||b)(E.LFG(E.R0b))},b.\u0275prov=E.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Li(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function sr(b){return Li(),function(b){return function(R){return(R=R.lift(new ai(b.ngZone))).pipe((0,la.R)(b.outsideAngular),(0,Kg.QV)(b.insideAngular))}}(Li())(b)}},3854:(Ye,Ee,L)=>{"use strict";L.d(Ee,{BH:()=>Z,LL:()=>ze,ZR:()=>St,zI:()=>_t,US:()=>re,tV:()=>ee,$s:()=>Gt,r3:()=>un,Sg:()=>se,ne:()=>er,vZ:()=>Ft,ZB:()=>V,pd:()=>dr,m9:()=>$u,z$:()=>we,jU:()=>ge,ru:()=>fe,d:()=>Se,xb:()=>$n,w1:()=>Ge,hl:()=>fn,uI:()=>de,UG:()=>q,b$:()=>he,G6:()=>ht,Mn:()=>Pe,xO:()=>Na,zd:()=>Tr,eu:()=>gt});const ce=function(G){const H=[];let $=0;for(let ve=0;ve<G.length;ve++){let ie=G.charCodeAt(ve);ie<128?H[$++]=ie:ie<2048?(H[$++]=ie>>6|192,H[$++]=63&ie|128):55296==(64512&ie)&&ve+1<G.length&&56320==(64512&G.charCodeAt(ve+1))?(ie=65536+((1023&ie)<<10)+(1023&G.charCodeAt(++ve)),H[$++]=ie>>18|240,H[$++]=ie>>12&63|128,H[$++]=ie>>6&63|128,H[$++]=63&ie|128):(H[$++]=ie>>12|224,H[$++]=ie>>6&63|128,H[$++]=63&ie|128)}return H},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,H){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let ie=0;ie<G.length;ie+=3){const Ve=G[ie],Le=ie+1<G.length,Wt=Le?G[ie+1]:0,Fn=ie+2<G.length,cn=Fn?G[ie+2]:0;let sn=(15&Wt)<<2|cn>>6,Si=63&cn;Fn||(Si=64,Le||(sn=64)),ve.push($[Ve>>2],$[(3&Ve)<<4|Wt>>4],$[sn],$[Si])}return ve.join("")},encodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(G):this.encodeByteArray(ce(G),H)},decodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(G):function(G){const H=[];let $=0,ve=0;for(;$<G.length;){const ie=G[$++];if(ie<128)H[ve++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const Ve=G[$++];H[ve++]=String.fromCharCode((31&ie)<<6|63&Ve)}else if(ie>239&&ie<365){const Fn=((7&ie)<<18|(63&G[$++])<<12|(63&G[$++])<<6|63&G[$++])-65536;H[ve++]=String.fromCharCode(55296+(Fn>>10)),H[ve++]=String.fromCharCode(56320+(1023&Fn))}else{const Ve=G[$++],Le=G[$++];H[ve++]=String.fromCharCode((15&ie)<<12|(63&Ve)<<6|63&Le)}}return H.join("")}(this.decodeStringToByteArray(G,H))},decodeStringToByteArray(G,H){this.init_();const $=H?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let ie=0;ie<G.length;){const Ve=$[G.charAt(ie++)],Wt=ie<G.length?$[G.charAt(ie)]:0;++ie;const cn=ie<G.length?$[G.charAt(ie)]:64;++ie;const At=ie<G.length?$[G.charAt(ie)]:64;if(++ie,null==Ve||null==Wt||null==cn||null==At)throw Error();ve.push(Ve<<2|Wt>>4),64!==cn&&(ve.push(Wt<<4&240|cn>>2),64!==At&&ve.push(cn<<6&192|At))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},ue=function(G){return function(G){const H=ce(G);return re.encodeByteArray(H,!0)}(G).replace(/\./g,"")},ee=function(G){try{return re.decodeString(G,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function V(G,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return H}for(const $ in H)!H.hasOwnProperty($)||!Y($)||(G[$]=V(G[$],H[$]));return G}function Y(G){return"__proto__"!==G}class Z{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,$)=>{this.resolve=H,this.reject=$})}wrapCallback(H){return($,ve)=>{$?this.reject($):this.resolve(ve),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H($):H($,ve))}}}function se(G,H){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=H||"demo-project",ie=G.iat||0,Ve=G.sub||G.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Le=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:ie,exp:ie+3600,auth_time:ie,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},G);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Le)),""].join(".")}function we(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function q(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(G){return!1}}function ge(){return"object"==typeof self&&self.self===self}function fe(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function he(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){return we().indexOf("Electron/")>=0}function Ge(){const G=we();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Pe(){return we().indexOf("MSAppHost/")>=0}function ht(){return!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fn(){return"object"==typeof indexedDB}function gt(){return new Promise((G,H)=>{try{let $=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(ve);ie.onsuccess=()=>{ie.result.close(),$||self.indexedDB.deleteDatabase(ve),G(!0)},ie.onupgradeneeded=()=>{$=!1},ie.onerror=()=>{var Ve;H((null===(Ve=ie.error)||void 0===Ve?void 0:Ve.message)||"")}}catch($){H($)}})}function _t(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class St extends Error{constructor(H,$,ve){super($),this.code=H,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,St.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ze.prototype.create)}}class ze{constructor(H,$,ve){this.service=H,this.serviceName=$,this.errors=ve}create(H,...$){const ve=$[0]||{},ie=`${this.service}/${H}`,Ve=this.errors[H],Le=Ve?function(G,H){return G.replace(bs,($,ve)=>{const ie=H[ve];return null!=ie?String(ie):`<${ve}?>`})}(Ve,ve):"Error";return new St(ie,`${this.serviceName}: ${Le} (${ie}).`,ve)}}const bs=/\{\$([^}]+)}/g;function un(G,H){return Object.prototype.hasOwnProperty.call(G,H)}function $n(G){for(const H in G)if(Object.prototype.hasOwnProperty.call(G,H))return!1;return!0}function Ft(G,H){if(G===H)return!0;const $=Object.keys(G),ve=Object.keys(H);for(const ie of $){if(!ve.includes(ie))return!1;const Ve=G[ie],Le=H[ie];if(Et(Ve)&&Et(Le)){if(!Ft(Ve,Le))return!1}else if(Ve!==Le)return!1}for(const ie of ve)if(!$.includes(ie))return!1;return!0}function Et(G){return null!==G&&"object"==typeof G}function Na(G){const H=[];for(const[$,ve]of Object.entries(G))Array.isArray(ve)?ve.forEach(ie=>{H.push(encodeURIComponent($)+"="+encodeURIComponent(ie))}):H.push(encodeURIComponent($)+"="+encodeURIComponent(ve));return H.length?"&"+H.join("&"):""}function Tr(G){const H={};return G.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[ie,Ve]=ve.split("=");H[decodeURIComponent(ie)]=decodeURIComponent(Ve)}}),H}function dr(G){const H=G.indexOf("?");if(!H)return"";const $=G.indexOf("#",H);return G.substring(H,$>0?$:void 0)}function er(G,H){const $=new xn(G,H);return $.subscribe.bind($)}class xn{constructor(H,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{H(this)}).catch(ve=>{this.error(ve)})}next(H){this.forEachObserver($=>{$.next(H)})}error(H){this.forEachObserver($=>{$.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,$,ve){let ie;if(void 0===H&&void 0===$&&void 0===ve)throw new Error("Missing Observer.");ie=function(G,H){if("object"!=typeof G||null===G)return!1;for(const $ of["next","error","complete"])if($ in G&&"function"==typeof G[$])return!0;return!1}(H)?H:{next:H,error:$,complete:ve},void 0===ie.next&&(ie.next=Ur),void 0===ie.error&&(ie.error=Ur),void 0===ie.complete&&(ie.complete=Ur);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch(Le){}}),this.observers.push(ie),Ve}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,H)}sendOne(H,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{$(this.observers[H])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ur(){}function Gt(G,H=1e3,$=2){const ve=H*Math.pow($,G),ie=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+ie)}function $u(G){return G&&G._delegate?G._delegate:G}},2329:(Ye,Ee,L)=>{"use strict";L.d(Ee,{Mq:()=>E.getApp,C6:()=>E.getApps});var E=L(8026);(0,E.registerVersion)("firebase","9.6.0","app")},7841:(Ye,Ee,L)=>{"use strict";L.d(Ee,{Z:()=>E.Z});var E=L(3394);E.Z.registerVersion("firebase","9.6.0","app-compat")},941:(Ye,Ee,L)=>{"use strict";L.r(Ee);var E=L(8239),X=L(3394),k=L(3854),ce=L(8026);function ue(m,h){var f={};for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&h.indexOf(v)<0&&(f[v]=m[v]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(v=Object.getOwnPropertySymbols(m);D<v.length;D++)h.indexOf(v[D])<0&&Object.prototype.propertyIsEnumerable.call(m,v[D])&&(f[v[D]]=m[v[D]])}return f}var St=L(5422),ze=L(3910);const Ds=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},rs=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},un=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$n=new St.Yd("@firebase/auth");function Ts(m,...h){$n.logLevel<=St.in.ERROR&&$n.error(`Auth (${ce.SDK_VERSION}): ${m}`,...h)}function Ft(m,...h){throw dr(m,...h)}function Et(m,...h){return dr(m,...h)}function Na(m,h,f){const v=Object.assign(Object.assign({},rs()),{[h]:f});return new k.LL("auth","Firebase",v).create(h,{appName:m.name})}function Tr(m,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&Ft(m,"argument-error"),Na(m,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dr(m,...h){if("string"!=typeof m){const f=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=m.name),m._errorFactory.create(f,...v)}return un.create(m,...h)}function Ce(m,h,...f){if(!m)throw dr(h,...f)}function er(m){const h="INTERNAL ASSERTION FAILED: "+m;throw Ts(h),new Error(h)}function xn(m,h){m||er(h)}const gi=new Map;function Rt(m){xn(m instanceof Function,"Expected a class definition");let h=gi.get(m);return h?(xn(h instanceof m,"Instance stored in cache mismatched with class"),h):(h=new m,gi.set(m,h),h)}function et(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function De(){return"http:"===Lt()||"https:"===Lt()}function Lt(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Ot{constructor(h,f){this.shortDelay=h,this.longDelay=f,xn(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(De()||(0,k.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ke(m,h){xn(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class We{static initialize(h,f,v){this.fetchImpl=h,f&&(this.headersImpl=f),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},co=new Ot(3e4,6e4);function Gt(m,h){return m.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:m.tenantId}):h}function mt(m,h,f,v){return hr.apply(this,arguments)}function hr(){return(hr=(0,E.Z)(function*(m,h,f,v,D={}){return $u(m,D,()=>{let x={},B={};v&&("GET"===h?B=v:x={body:JSON.stringify(v)});const ne=(0,k.xO)(Object.assign({key:m.config.apiKey},B)).slice(1),Ne=new(We.headers());return Ne.set("Content-Type","application/json"),Ne.set("X-Client-Version",m._getSdkClientVersion()),m.languageCode&&Ne.set("X-Firebase-Locale",m.languageCode),We.fetch()(ve(m,m.config.apiHost,f,ne),Object.assign({method:h,headers:Ne,referrerPolicy:"no-referrer"},x))})})).apply(this,arguments)}function $u(m,h,f){return G.apply(this,arguments)}function G(){return(G=(0,E.Z)(function*(m,h,f){m._canInitEmulator=!1;const v=Object.assign(Object.assign({},Sr),h);try{const D=new ie(m),x=yield Promise.race([f(),D.promise]);D.clearNetworkTimeout();const B=yield x.json();if("needConfirmation"in B)throw Ve(m,"account-exists-with-different-credential",B);if(x.ok&&!("errorMessage"in B))return B;{const ne=x.ok?B.errorMessage:B.error.message,[Ne,xe]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw Ve(m,"credential-already-in-use",B);if("EMAIL_EXISTS"===Ne)throw Ve(m,"email-already-in-use",B);const $e=v[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(xe)throw Na(m,$e,xe);Ft(m,$e)}}catch(D){if(D instanceof k.ZR)throw D;Ft(m,"network-request-failed")}})).apply(this,arguments)}function H(m,h,f,v){return $.apply(this,arguments)}function $(){return($=(0,E.Z)(function*(m,h,f,v,D={}){const x=yield mt(m,h,f,v,D);return"mfaPendingCredential"in x&&Ft(m,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function ve(m,h,f,v){const D=`${h}${f}?${v}`;return m.config.emulator?Ke(m.config,D):`${m.config.apiScheme}://${D}`}class ie{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,v)=>{this.timer=setTimeout(()=>v(Et(this.auth,"timeout")),co.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ve(m,h,f){const v={appName:m.name};f.email&&(v.email=f.email),f.phoneNumber&&(v.phoneNumber=f.phoneNumber);const D=Et(m,h,v);return D.customData._tokenResponse=f,D}function Wt(){return(Wt=(0,E.Z)(function*(m,h){return mt(m,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Fn(m,h){return cn.apply(this,arguments)}function cn(){return(cn=(0,E.Z)(function*(m,h){return mt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ar(m,h){return At.apply(this,arguments)}function At(){return(At=(0,E.Z)(function*(m,h){return mt(m,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function sn(m){if(m)try{const h=new Date(Number(m));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function lo(){return(lo=(0,E.Z)(function*(m,h=!1){const f=(0,k.m9)(m),v=yield f.getIdToken(h),D=ho(v);Ce(D&&D.exp&&D.auth_time&&D.iat,f.auth,"internal-error");const x="object"==typeof D.firebase?D.firebase:void 0,B=null==x?void 0:x.sign_in_provider;return{claims:D,token:v,authTime:sn(el(D.auth_time)),issuedAtTime:sn(el(D.iat)),expirationTime:sn(el(D.exp)),signInProvider:B||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function el(m){return 1e3*Number(m)}function ho(m){const[h,f,v]=m.split(".");if(void 0===h||void 0===f||void 0===v)return Ts("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,k.tV)(f);return D?JSON.parse(D):(Ts("Failed to decode base64 JWT payload"),null)}catch(D){return Ts("Caught error parsing JWT payload as JSON",D),null}}function ni(m,h){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,E.Z)(function*(m,h,f=!1){if(f)return h;try{return yield h}catch(v){throw v instanceof k.ZR&&fo(v)&&m.auth.currentUser===m&&(yield m.auth.signOut()),v}})).apply(this,arguments)}function fo({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class qo{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const D=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,E.Z)(function*(){yield f.iteration()}),v)}iteration(){var h=this;return(0,E.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&h.schedule(!0))}h.schedule()})()}}class Id{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=sn(this.lastLoginAt),this.creationTime=sn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ss(m){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,E.Z)(function*(m){var h;const f=m.auth,v=yield m.getIdToken(),D=yield ni(m,Ar(f,{idToken:v}));Ce(null==D?void 0:D.users.length,f,"internal-error");const x=D.users[0];m._notifyReloadListener(x);const B=(null===(h=x.providerUserInfo)||void 0===h?void 0:h.length)?bd(x.providerUserInfo):[],ne=tr(m.providerData,B),$e=!!m.isAnonymous&&!(m.email&&x.passwordHash||(null==ne?void 0:ne.length)),qe={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:ne,metadata:new Id(x.createdAt,x.lastLoginAt),isAnonymous:$e};Object.assign(m,qe)})).apply(this,arguments)}function is(){return(is=(0,E.Z)(function*(m){const h=(0,k.m9)(m);yield Ss(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function tr(m,h){return[...m.filter(v=>!h.some(D=>D.providerId===v.providerId)),...h]}function bd(m){return m.map(h=>{var{providerId:f}=h,v=ue(h,["providerId"]);return{providerId:f,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Oe(){return(Oe=(0,E.Z)(function*(m,h){const f=yield $u(m,{},()=>{const v=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:D,apiKey:x}=m.config,B=ve(m,D,"/v1/token",`key=${x}`);return We.fetch()(B,{method:"POST",headers:{"X-Client-Version":m._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:v})});return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class it{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Ce(h.idToken,"internal-error"),Ce(void 0!==h.idToken,"internal-error"),Ce(void 0!==h.refreshToken,"internal-error");const f="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(m){const h=ho(m);return Ce(h,"internal-error"),Ce(void 0!==h.exp,"internal-error"),Ce(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var v=this;return(0,E.Z)(function*(){return Ce(!v.accessToken||v.refreshToken,h,"user-token-expired"),f||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var v=this;return(0,E.Z)(function*(){const{accessToken:D,refreshToken:x,expiresIn:B}=yield function(m,h){return Oe.apply(this,arguments)}(h,f);v.updateTokensAndExpiration(D,x,Number(B))})()}updateTokensAndExpiration(h,f,v){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,f){const{refreshToken:v,accessToken:D,expirationTime:x}=f,B=new it;return v&&(Ce("string"==typeof v,"internal-error",{appName:h}),B.refreshToken=v),D&&(Ce("string"==typeof D,"internal-error",{appName:h}),B.accessToken=D),x&&(Ce("number"==typeof x,"internal-error",{appName:h}),B.expirationTime=x),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new it,this.toJSON())}_performRefresh(){return er("not implemented")}}function Vt(m,h){Ce("string"==typeof m||void 0===m,"internal-error",{appName:h})}class gn{constructor(h){var{uid:f,auth:v,stsTokenManager:D}=h,x=ue(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new qo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=v,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.metadata=new Id(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,E.Z)(function*(){const v=yield ni(f,f.stsTokenManager.getToken(f.auth,h));return Ce(v,f.auth,"internal-error"),f.accessToken!==v&&(f.accessToken=v,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),v})()}getIdTokenResult(h){return function(m){return lo.apply(this,arguments)}(this,h)}reload(){return function(m){return is.apply(this,arguments)}(this)}_assign(h){this!==h&&(Ce(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new gn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var v=this;return(0,E.Z)(function*(){let D=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),D=!0),f&&(yield Ss(v)),yield v.auth._persistUserIfCurrent(v),D&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,E.Z)(function*(){const f=yield h.getIdToken();return yield ni(h,function(m,h){return Wt.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var v,D,x,B,ne,Ne,xe,$e;const qe=null!==(v=f.displayName)&&void 0!==v?v:void 0,Dt=null!==(D=f.email)&&void 0!==D?D:void 0,Pn=null!==(x=f.phoneNumber)&&void 0!==x?x:void 0,zs=null!==(B=f.photoURL)&&void 0!==B?B:void 0,Al=null!==(ne=f.tenantId)&&void 0!==ne?ne:void 0,wm=null!==(Ne=f._redirectEventId)&&void 0!==Ne?Ne:void 0,pu=null!==(xe=f.createdAt)&&void 0!==xe?xe:void 0,yh=null!==($e=f.lastLoginAt)&&void 0!==$e?$e:void 0,{uid:xc,emailVerified:Im,isAnonymous:_h,providerData:gp,stsTokenManager:vh}=f;Ce(xc&&vh,h,"internal-error");const bm=it.fromJSON(this.name,vh);Ce("string"==typeof xc,h,"internal-error"),Vt(qe,h.name),Vt(Dt,h.name),Ce("boolean"==typeof Im,h,"internal-error"),Ce("boolean"==typeof _h,h,"internal-error"),Vt(Pn,h.name),Vt(zs,h.name),Vt(Al,h.name),Vt(wm,h.name),Vt(pu,h.name),Vt(yh,h.name);const mp=new gn({uid:xc,auth:h,email:Dt,emailVerified:Im,displayName:qe,isAnonymous:_h,photoURL:zs,phoneNumber:Pn,tenantId:Al,stsTokenManager:bm,createdAt:pu,lastLoginAt:yh});return gp&&Array.isArray(gp)&&(mp.providerData=gp.map(Rc=>Object.assign({},Rc))),wm&&(mp._redirectEventId=wm),mp}static _fromIdTokenResponse(h,f,v=!1){return(0,E.Z)(function*(){const D=new it;D.updateFromServerResponse(f);const x=new gn({uid:f.localId,auth:h,stsTokenManager:D,isAnonymous:v});return yield Ss(x),x})()}}const rn=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(f,v){var D=this;return(0,E.Z)(function*(){D.storage[f]=v})()}_get(f){var v=this;return(0,E.Z)(function*(){const D=v.storage[f];return void 0===D?null:D})()}_remove(f){var v=this;return(0,E.Z)(function*(){delete v.storage[f]})()}_addListener(f,v){}_removeListener(f,v){}}return m.type="NONE",m})();function Hn(m,h,f){return`firebase:${m}:${h}:${f}`}class zt{constructor(h,f,v){this.persistence=h,this.auth=f,this.userKey=v;const{config:D,name:x}=this.auth;this.fullUserKey=Hn(this.userKey,D.apiKey,x),this.fullPersistenceKey=Hn("persistence",D.apiKey,x),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,E.Z)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?gn._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,E.Z)(function*(){if(f.persistence===h)return;const v=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,v?f.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,v="authUser"){return(0,E.Z)(function*(){if(!f.length)return new zt(Rt(rn),h,v);const D=(yield Promise.all(f.map(function(){var xe=(0,E.Z)(function*($e){if(yield $e._isAvailable())return $e});return function($e){return xe.apply(this,arguments)}}()))).filter(xe=>xe);let x=D[0]||Rt(rn);const B=Hn(v,h.config.apiKey,h.name);let ne=null;for(const xe of f)try{const $e=yield xe._get(B);if($e){const qe=gn._fromJSON(h,$e);xe!==x&&(ne=qe),x=xe;break}}catch($e){}const Ne=D.filter(xe=>xe._shouldAllowMigration);return x._shouldAllowMigration&&Ne.length?(x=Ne[0],ne&&(yield x._set(B,ne.toJSON())),yield Promise.all(f.map(function(){var xe=(0,E.Z)(function*($e){if($e!==x)try{yield $e._remove(B)}catch(qe){}});return function($e){return xe.apply(this,arguments)}}())),new zt(x,h,v)):new zt(x,h,v)})()}}function Rn(m){const h=m.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(xs(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(zo(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ai(h))return"Blackberry";if(fr(h))return"Webos";if(at(h))return"Safari";if((h.includes("chrome/")||Ma(h))&&!h.includes("edge/"))return"Chrome";if(go(h))return"Android";{const v=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function zo(m=(0,k.z$)()){return/firefox\//i.test(m)}function at(m=(0,k.z$)()){const h=m.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ma(m=(0,k.z$)()){return/crios\//i.test(m)}function xs(m=(0,k.z$)()){return/iemobile/i.test(m)}function go(m=(0,k.z$)()){return/android/i.test(m)}function Ai(m=(0,k.z$)()){return/blackberry/i.test(m)}function fr(m=(0,k.z$)()){return/webos/i.test(m)}function xi(m=(0,k.z$)()){return/iphone|ipad|ipod/i.test(m)}function Ko(m=(0,k.z$)()){return xi(m)||go(m)||fr(m)||Ai(m)||/windows phone/i.test(m)||xs(m)}function Hu(m,h=[]){let f;switch(m){case"Browser":f=Rn((0,k.z$)());break;case"Worker":f=`${Rn((0,k.z$)())}-${m}`;break;default:f=m}const v=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${ce.SDK_VERSION}/${v}`}class Dd{constructor(h,f){this.app=h,this.config=f,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ss(this),this.idTokenSubscription=new ss(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=un,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=f.sdkClientVersion}_initializeWithPersistence(h,f){var v=this;return f&&(this._popupRedirectResolver=Rt(f)),this._initializationPromise=this.queue((0,E.Z)(function*(){var D,x;v._deleted||(v.persistenceManager=yield zt.create(v,h),!v._deleted&&((null===(D=v._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)&&(yield v._popupRedirectResolver._initialize(v)),yield v.initializeCurrentUser(f),v.lastNotifiedUid=(null===(x=v.currentUser)||void 0===x?void 0:x.uid)||null,!v._deleted&&(v._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,E.Z)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f)}})()}initializeCurrentUser(h){var f=this;return(0,E.Z)(function*(){var v;let D=yield f.assertedPersistence.getCurrentUser();if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const x=null===(v=f.redirectUser)||void 0===v?void 0:v._redirectEventId,B=null==D?void 0:D._redirectEventId,ne=yield f.tryRedirectSignIn(h);(!x||x===B)&&(null==ne?void 0:ne.user)&&(D=ne.user)}return D?D._redirectEventId?(Ce(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===D._redirectEventId?f.directlySetCurrentUser(D):f.reloadAndSetCurrentUserOrClear(D)):f.reloadAndSetCurrentUserOrClear(D):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var f=this;return(0,E.Z)(function*(){let v=null;try{v=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch(D){yield f._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,E.Z)(function*(){try{yield Ss(h)}catch(v){if("auth/network-request-failed"!==v.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var h=this;return(0,E.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,E.Z)(function*(){const v=h?(0,k.m9)(h):null;return v&&Ce(v.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(v&&v._clone(f))})()}_updateCurrentUser(h){var f=this;return(0,E.Z)(function*(){if(!f._deleted)return h&&Ce(f.tenantId===h.tenantId,f,"tenant-id-mismatch"),f.queue((0,E.Z)(function*(){yield f.directlySetCurrentUser(h),f.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,E.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var f=this;return this.queue((0,E.Z)(function*(){yield f.assertedPersistence.setPersistence(Rt(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,f,v){return this.registerStateListener(this.authStateSubscription,h,f,v)}onIdTokenChanged(h,f,v){return this.registerStateListener(this.idTokenSubscription,h,f,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var v=this;return(0,E.Z)(function*(){const D=yield v.getOrInitRedirectPersistenceManager(f);return null===h?D.removeCurrentUser():D.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,E.Z)(function*(){if(!f.redirectPersistenceManager){const v=h&&Rt(h)||f._popupRedirectResolver;Ce(v,f,"argument-error"),f.redirectPersistenceManager=yield zt.create(f,[Rt(v._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,E.Z)(function*(){var v,D;return f._isInitialized&&(yield f.queue((0,E.Z)(function*(){}))),(null===(v=f._currentUser)||void 0===v?void 0:v._redirectEventId)===h?f._currentUser:(null===(D=f.redirectUser)||void 0===D?void 0:D._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,E.Z)(function*(){if(h===f.currentUser)return f.queue((0,E.Z)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,v,D){if(this._deleted)return()=>{};const x="function"==typeof f?f:f.next.bind(f),B=this._isInitialized?Promise.resolve():this._initializationPromise;return Ce(B,this,"internal-error"),B.then(()=>x(this.currentUser)),"function"==typeof f?h.addObserver(f,v,D):h.addObserver(f)}directlySetCurrentUser(h){var f=this;return(0,E.Z)(function*(){f.currentUser&&f.currentUser!==h&&(f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh()),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Hu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function bn(m){return(0,k.m9)(m)}class ss{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(f=>this.observer=f)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Gn(m){const h=m.indexOf(":");return h<0?"":m.substr(0,h+1)}function Ri(m){if(!m)return null;const h=Number(m);return isNaN(h)?null:h}class Ns{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return er("not implemented")}_getIdTokenResponse(h){return er("not implemented")}_linkToIdToken(h,f){return er("not implemented")}_getReauthenticationResolver(h){return er("not implemented")}}function Pa(m,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,E.Z)(function*(m,h){return mt(m,"POST","/v1/accounts:resetPassword",Gt(m,h))})).apply(this,arguments)}function ii(m,h){return nl.apply(this,arguments)}function nl(){return(nl=(0,E.Z)(function*(m,h){return mt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ug(m,h){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,E.Z)(function*(m,h){return mt(m,"POST","/v1/accounts:update",Gt(m,h))})).apply(this,arguments)}function Td(){return(Td=(0,E.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPassword",Gt(m,h))})).apply(this,arguments)}function rl(m,h){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,E.Z)(function*(m,h){return mt(m,"POST","/v1/accounts:sendOobCode",Gt(m,h))})).apply(this,arguments)}function jg(m,h){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,E.Z)(function*(m,h){return rl(m,h)})).apply(this,arguments)}function Pf(m,h){return Of.apply(this,arguments)}function Of(){return(Of=(0,E.Z)(function*(m,h){return rl(m,h)})).apply(this,arguments)}function xd(m,h){return il.apply(this,arguments)}function il(){return(il=(0,E.Z)(function*(m,h){return rl(m,h)})).apply(this,arguments)}function Rd(m,h){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,E.Z)(function*(m,h){return rl(m,h)})).apply(this,arguments)}function Oa(){return(Oa=(0,E.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithEmailLink",Gt(m,h))})).apply(this,arguments)}function ka(){return(ka=(0,E.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithEmailLink",Gt(m,h))})).apply(this,arguments)}class Jo extends Ns{constructor(h,f,v,D=null){super("password",v),this._email=h,this._password=f,this._tenantId=D}static _fromEmailAndPassword(h,f){return new Jo(h,f,"password")}static _fromEmailAndCode(h,f,v=null){return new Jo(h,f,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,E.Z)(function*(){switch(f.signInMethod){case"password":return function(m,h){return Td.apply(this,arguments)}(h,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function(m,h){return Oa.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:Ft(h,"internal-error")}})()}_linkToIdToken(h,f){var v=this;return(0,E.Z)(function*(){switch(v.signInMethod){case"password":return ii(h,{idToken:f,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function(m,h){return ka.apply(this,arguments)}(h,{idToken:f,email:v._email,oobCode:v._password});default:Ft(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ms(m,h){return sl.apply(this,arguments)}function sl(){return(sl=(0,E.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithIdp",Gt(m,h))})).apply(this,arguments)}class yn extends Ns{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new yn(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):Ft("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:D}=f,x=ue(f,["providerId","signInMethod"]);if(!v||!D)return null;const B=new yn(v,D);return B.idToken=x.idToken||void 0,B.accessToken=x.accessToken||void 0,B.secret=x.secret,B.nonce=x.nonce,B.pendingToken=x.pendingToken||null,B}_getIdTokenResponse(h){return Ms(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,Ms(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ms(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,k.xO)(f)}return h}}function Ni(m,h){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,E.Z)(function*(m,h){return mt(m,"POST","/v1/accounts:sendVerificationCode",Gt(m,h))})).apply(this,arguments)}function Pd(){return(Pd=(0,E.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPhoneNumber",Gt(m,h))})).apply(this,arguments)}function ol(){return(ol=(0,E.Z)(function*(m,h){const f=yield H(m,"POST","/v1/accounts:signInWithPhoneNumber",Gt(m,h));if(f.temporaryProof)throw Ve(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const La={USER_NOT_FOUND:"user-not-found"};function Xo(){return(Xo=(0,E.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPhoneNumber",Gt(m,Object.assign(Object.assign({},h),{operation:"REAUTH"})),La)})).apply(this,arguments)}class yo extends Ns{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new yo({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new yo({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function(m,h){return Pd.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function(m,h){return ol.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function(m,h){return Xo.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:v,verificationCode:D}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:v,code:D}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:v,phoneNumber:D,temporaryProof:x}=h;return v||f||D||x?new yo({verificationId:f,verificationCode:v,phoneNumber:D,temporaryProof:x}):null}}class Ps{constructor(h){var f,v,D,x,B,ne;const Ne=(0,k.zd)((0,k.pd)(h)),xe=null!==(f=Ne.apiKey)&&void 0!==f?f:null,$e=null!==(v=Ne.oobCode)&&void 0!==v?v:null,qe=function(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Ne.mode)&&void 0!==D?D:null);Ce(xe&&$e&&qe,"argument-error"),this.apiKey=xe,this.operation=qe,this.code=$e,this.continueUrl=null!==(x=Ne.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(B=Ne.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(ne=Ne.tenantId)&&void 0!==ne?ne:null}static parseLink(h){const f=function(m){const h=(0,k.zd)((0,k.pd)(m)).link,f=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,v=(0,k.zd)((0,k.pd)(m)).deep_link_id;return(v?(0,k.zd)((0,k.pd)(v)).link:null)||v||f||h||m}(h);try{return new Ps(f)}catch(v){return null}}}let os=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,v){return Jo._fromEmailAndPassword(f,v)}static credentialWithLink(f,v){const D=Ps.parseLink(v);return Ce(D,"argument-error"),Jo._fromEmailAndCode(f,D.code,D.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class jr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Mi extends jr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Zt extends Mi{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return Ce("providerId"in f&&"signInMethod"in f,"argument-error"),yn._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Ce(h.idToken||h.accessToken,"argument-error"),yn._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Zt.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Zt.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:v,oauthTokenSecret:D,pendingToken:x,nonce:B,providerId:ne}=h;if(!v&&!D&&!f&&!x||!ne)return null;try{return new Zt(ne)._credential({idToken:f,accessToken:v,nonce:B,pendingToken:x})}catch(Ne){return null}}}let qu=(()=>{class m extends Mi{constructor(){super("facebook.com")}static credential(f){return yn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(v){return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Ua=(()=>{class m extends Mi{constructor(){super("google.com"),this.addScope("profile")}static credential(f,v){return yn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:v})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:v,oauthAccessToken:D}=f;if(!v&&!D)return null;try{return m.credential(v,D)}catch(x){return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Od=(()=>{class m extends Mi{constructor(){super("github.com")}static credential(f){return yn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(v){return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class ea extends Ns{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Ms(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,Ms(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ms(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:D,pendingToken:x}=f;return v&&D&&x&&v===D?new ea(v,x):null}static _create(h,f){return new ea(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _o extends jr{constructor(h){Ce(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return _o.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return _o.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=ea.fromJSON(h);return Ce(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:v}=h;if(!f||!v)return null;try{return ea._create(v,f)}catch(D){return null}}}let xr=(()=>{class m extends Mi{constructor(){super("twitter.com")}static credential(f,v){return yn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:v})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:v,oauthTokenSecret:D}=f;if(!v||!D)return null;try{return m.credential(v,D)}catch(x){return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Fd(m,h){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,E.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signUp",Gt(m,h))})).apply(this,arguments)}class Vn{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,v,D=!1){return(0,E.Z)(function*(){const x=yield gn._fromIdTokenResponse(h,v,D),B=nr(v);return new Vn({user:x,providerId:B,_tokenResponse:v,operationType:f})})()}static _forOperation(h,f,v){return(0,E.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const D=nr(v);return new Vn({user:h,providerId:D,_tokenResponse:v,operationType:f})})()}}function nr(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function ta(){return(ta=(0,E.Z)(function*(m){var h;const f=bn(m);if(yield f._initializationPromise,null===(h=f.currentUser)||void 0===h?void 0:h.isAnonymous)return new Vn({user:f.currentUser,providerId:null,operationType:"signIn"});const v=yield Fd(f,{returnSecureToken:!0}),D=yield Vn._fromIdTokenResponse(f,"signIn",v,!0);return yield f._updateCurrentUser(D.user),D})).apply(this,arguments)}class ja extends k.ZR{constructor(h,f,v,D){var x;super(f.code,f.message),this.operationType=v,this.user=D,Object.setPrototypeOf(this,ja.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:f.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,f,v,D){return new ja(h,f,v,D)}}function as(m,h,f,v){return("reauthenticate"===h?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?ja._fromErrorAndOperation(m,x,h,v):x})}function Ba(m){return new Set(m.map(({providerId:h})=>h).filter(h=>!!h))}function nt(){return(nt=(0,E.Z)(function*(m,h){const f=(0,k.m9)(m);yield Os(!0,f,h);const{providerUserInfo:v}=yield Fn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),D=Ba(v||[]);return f.providerData=f.providerData.filter(x=>D.has(x.providerId)),D.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Ld(m,h){return us.apply(this,arguments)}function us(){return(us=(0,E.Z)(function*(m,h,f=!1){const v=yield ni(m,h._linkToIdToken(m.auth,yield m.getIdToken()),f);return Vn._forOperation(m,"link",v)})).apply(this,arguments)}function Os(m,h,f){return vo.apply(this,arguments)}function vo(){return(vo=(0,E.Z)(function*(m,h,f){yield Ss(h);const D=!1===m?"provider-already-linked":"no-such-provider";Ce(Ba(h.providerData).has(f)===m,h.auth,D)})).apply(this,arguments)}function Zu(m,h){return cs.apply(this,arguments)}function cs(){return(cs=(0,E.Z)(function*(m,h,f=!1){const{auth:v}=m,D="reauthenticate";try{const x=yield ni(m,as(v,D,h,m),f);Ce(x.idToken,v,"internal-error");const B=ho(x.idToken);Ce(B,v,"internal-error");const{sub:ne}=B;return Ce(m.uid===ne,v,"user-mismatch"),Vn._forOperation(m,D,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&Ft(v,"user-mismatch"),x}})).apply(this,arguments)}function al(m,h){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,E.Z)(function*(m,h,f=!1){const v="signIn",D=yield as(m,v,h),x=yield Vn._fromIdTokenResponse(m,v,D);return f||(yield m._updateCurrentUser(x.user)),x})).apply(this,arguments)}function vt(m,h){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,E.Z)(function*(m,h){return al(bn(m),h)})).apply(this,arguments)}function _n(m,h){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,E.Z)(function*(m,h){const f=(0,k.m9)(m);return yield Os(!1,f,h.providerId),Ld(f,h)})).apply(this,arguments)}function Eo(m,h){return si.apply(this,arguments)}function si(){return(si=(0,E.Z)(function*(m,h){return Zu((0,k.m9)(m),h)})).apply(this,arguments)}function $a(m,h){return ks.apply(this,arguments)}function ks(){return(ks=(0,E.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithCustomToken",Gt(m,h))})).apply(this,arguments)}function Ju(){return(Ju=(0,E.Z)(function*(m,h){const f=bn(m),v=yield $a(f,{token:h,returnSecureToken:!0}),D=yield Vn._fromIdTokenResponse(f,"signIn",v);return yield f._updateCurrentUser(D.user),D})).apply(this,arguments)}class ls{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?Oi._fromServerResponse(h,f):Ft(h,"internal-error")}}class Oi extends ls{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new Oi(f)}}function qn(m,h,f){var v;Ce((null===(v=f.url)||void 0===v?void 0:v.length)>0,m,"invalid-continue-uri"),Ce(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Ce(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(Ce(f.android.packageName.length>0,m,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function na(){return(na=(0,E.Z)(function*(m,h,f){const v=(0,k.m9)(m),D={requestType:"PASSWORD_RESET",email:h};f&&qn(v,D,f),yield Pf(v,D)})).apply(this,arguments)}function yi(){return(yi=(0,E.Z)(function*(m,h,f){yield Pa((0,k.m9)(m),{oobCode:h,newPassword:f})})).apply(this,arguments)}function Xu(){return(Xu=(0,E.Z)(function*(m,h){yield Ug((0,k.m9)(m),{oobCode:h})})).apply(this,arguments)}function ec(m,h){return ra.apply(this,arguments)}function ra(){return(ra=(0,E.Z)(function*(m,h){const f=(0,k.m9)(m),v=yield Pa(f,{oobCode:h}),D=v.requestType;switch(Ce(D,f,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ce(v.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ce(v.mfaInfo,f,"internal-error");default:Ce(v.email,f,"internal-error")}let x=null;return v.mfaInfo&&(x=ls._fromServerResponse(bn(f),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:x},operation:D}})).apply(this,arguments)}function ia(){return(ia=(0,E.Z)(function*(m,h){const{data:f}=yield ec((0,k.m9)(m),h);return f.email})).apply(this,arguments)}function nc(){return(nc=(0,E.Z)(function*(m,h,f){const v=bn(m),D=yield Fd(v,{returnSecureToken:!0,email:h,password:f}),x=yield Vn._fromIdTokenResponse(v,"signIn",D);return yield v._updateCurrentUser(x.user),x})).apply(this,arguments)}function ds(){return(ds=(0,E.Z)(function*(m,h,f){const v=(0,k.m9)(m),D={requestType:"EMAIL_SIGNIN",email:h};Ce(f.handleCodeInApp,v,"argument-error"),f&&qn(v,D,f),yield xd(v,D)})).apply(this,arguments)}function Ha(){return(Ha=(0,E.Z)(function*(m,h,f){const v=(0,k.m9)(m),D=os.credentialWithLink(h,f||et());return Ce(D._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),vt(v,D)})).apply(this,arguments)}function $g(m,h){return ic.apply(this,arguments)}function ic(){return(ic=(0,E.Z)(function*(m,h){return mt(m,"POST","/v1/accounts:createAuthUri",Gt(m,h))})).apply(this,arguments)}function Vf(){return(Vf=(0,E.Z)(function*(m,h){const v={identifier:h,continueUri:De()?et():"http://localhost"},{signinMethods:D}=yield $g((0,k.m9)(m),v);return D||[]})).apply(this,arguments)}function Br(){return(Br=(0,E.Z)(function*(m,h){const f=(0,k.m9)(m),D={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};h&&qn(f.auth,D,h);const{email:x}=yield jg(f.auth,D);x!==m.email&&(yield m.reload())})).apply(this,arguments)}function Ga(){return(Ga=(0,E.Z)(function*(m,h,f){const v=(0,k.m9)(m),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:h};f&&qn(v.auth,x,f);const{email:B}=yield Rd(v.auth,x);B!==m.email&&(yield m.reload())})).apply(this,arguments)}function Uf(m,h){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,E.Z)(function*(m,h){return mt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Nn(){return(Nn=(0,E.Z)(function*(m,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const v=(0,k.m9)(m),x={idToken:yield v.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},B=yield ni(v,Uf(v.auth,x));v.displayName=B.displayName||null,v.photoURL=B.photoUrl||null;const ne=v.providerData.find(({providerId:Ne})=>"password"===Ne);ne&&(ne.displayName=v.displayName,ne.photoURL=v.photoURL),yield v._updateTokensIfNecessary(B)})).apply(this,arguments)}function qa(m,h,f){return za.apply(this,arguments)}function za(){return(za=(0,E.Z)(function*(m,h,f){const{auth:v}=m,x={idToken:yield m.getIdToken(),returnSecureToken:!0};h&&(x.email=h),f&&(x.password=f);const B=yield ni(m,ii(v,x));yield m._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class wo{constructor(h,f,v={}){this.isNewUser=h,this.providerId=f,this.profile=v}}class ac extends wo{constructor(h,f,v,D){super(h,f,v),this.username=D}}class Ls extends wo{constructor(h,f){super(h,"facebook.com",f)}}class Ka extends ac{constructor(h,f){super(h,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class Hg extends wo{constructor(h,f){super(h,"google.com",f)}}class jf extends ac{constructor(h,f,v){super(h,"twitter.com",f,v)}}function rr(m){const{user:h,_tokenResponse:f}=m;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function(m){var h,f;if(!m)return null;const{providerId:v}=m,D=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},x=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!v&&(null==m?void 0:m.idToken)){const B=null===(f=null===(h=ho(m.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(B)return new wo(x,"anonymous"!==B&&"custom"!==B?B:null)}if(!v)return null;switch(v){case"facebook.com":return new Ls(x,D);case"github.com":return new Ka(x,D);case"google.com":return new Hg(x,D);case"twitter.com":return new jf(x,D,m.screenName||null);case"custom":case"anonymous":return new wo(x,null);default:return new wo(x,v,D)}}(f)}class _i{constructor(h,f){this.type=h,this.credential=f}static _fromIdtoken(h){return new _i("enroll",h)}static _fromMfaPendingCredential(h){return new _i("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,v;if(null==h?void 0:h.multiFactorSession){if(null===(f=h.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return _i._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return _i._fromIdtoken(h.multiFactorSession.idToken)}return null}}class lc{constructor(h,f,v){this.session=h,this.hints=f,this.signInResolver=v}static _fromError(h,f){const v=bn(h),D=f.customData._serverResponse,x=(D.mfaInfo||[]).map(ne=>ls._fromServerResponse(v,ne));Ce(D.mfaPendingCredential,v,"internal-error");const B=_i._fromMfaPendingCredential(D.mfaPendingCredential);return new lc(B,x,function(){var ne=(0,E.Z)(function*(Ne){const xe=yield Ne._process(v,B);delete D.mfaInfo,delete D.mfaPendingCredential;const $e=Object.assign(Object.assign({},D),{idToken:xe.idToken,refreshToken:xe.refreshToken});switch(f.operationType){case"signIn":const qe=yield Vn._fromIdTokenResponse(v,f.operationType,$e);return yield v._updateCurrentUser(qe.user),qe;case"reauthenticate":return Ce(f.user,v,"internal-error"),Vn._forOperation(f.user,f.operationType,$e);default:Ft(v,"internal-error")}});return function(Ne){return ne.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,E.Z)(function*(){return f.signInResolver(h)})()}}function Ya(m,h){return mt(m,"POST","/v2/accounts/mfaEnrollment:start",Gt(m,h))}class hc{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(v=>ls._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new hc(h)}getSession(){var h=this;return(0,E.Z)(function*(){return _i._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,f){var v=this;return(0,E.Z)(function*(){const D=h,x=yield v.getSession(),B=yield ni(v.user,D._process(v.user.auth,x,f));return yield v.user._updateTokensIfNecessary(B),v.user.reload()})()}unenroll(h){var f=this;return(0,E.Z)(function*(){const v="string"==typeof h?h:h.uid,D=yield f.user.getIdToken(),x=yield ni(f.user,function(m,h){return mt(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(m,h))}(f.user.auth,{idToken:D,mfaEnrollmentId:v}));f.enrolledFactors=f.enrolledFactors.filter(({uid:B})=>B!==v),yield f.user._updateTokensIfNecessary(x);try{yield f.user.reload()}catch(B){if("auth/user-token-expired"!==B.code)throw B}})()}}const bo=new WeakMap,sa="__sak";class dn{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(sa,"1"),this.storage.removeItem(sa),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vs=(()=>{class m extends dn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,v)=>this.onStorageEvent(f,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const m=(0,k.z$)();return at(m)||xi(m)}()&&function(){try{return!(!window||window===window.top)}catch(m){return!1}}(),this.fallbackToPolling=Ko(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const v of Object.keys(this.listeners)){const D=this.storage.getItem(v),x=this.localCache[v];D!==x&&f(v,x,D)}}onStorageEvent(f,v=!1){if(!f.key)return void this.forAllChangedKeys((ne,Ne,xe)=>{this.notifyListeners(ne,xe)});const D=f.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(D);if(f.newValue!==ne)null!==f.newValue?this.storage.setItem(D,f.newValue):this.storage.removeItem(D);else if(this.localCache[D]===f.newValue&&!v)return}const x=()=>{const ne=this.storage.getItem(D);!v&&this.localCache[D]===ne||this.notifyListeners(D,ne)},B=this.storage.getItem(D);(0,k.w1)()&&10===document.documentMode&&B!==f.newValue&&f.newValue!==f.oldValue?setTimeout(x,10):x()}notifyListeners(f,v){this.localCache[f]=v;const D=this.listeners[f];if(D)for(const x of Array.from(D))x(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,v,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:v,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,v){var D=()=>super._set,x=this;return(0,E.Z)(function*(){yield D().call(x,f,v),x.localCache[f]=JSON.stringify(v)})()}_get(f){var v=()=>super._get,D=this;return(0,E.Z)(function*(){const x=yield v().call(D,f);return D.localCache[f]=JSON.stringify(x),x})()}_remove(f){var v=()=>super._remove,D=this;return(0,E.Z)(function*(){yield v().call(D,f),delete D.localCache[f]})()}}return m.type="LOCAL",m})(),tn=(()=>{class m extends dn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,v){}_removeListener(f,v){}}return m.type="SESSION",m})();let Hf=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const v=this.receivers.find(x=>x.isListeningto(f));if(v)return v;const D=new m(f);return this.receivers.push(D),D}isListeningto(f){return this.eventTarget===f}handleEvent(f){var v=this;return(0,E.Z)(function*(){const D=f,{eventId:x,eventType:B,data:ne}=D.data,Ne=v.handlersMap[B];if(!(null==Ne?void 0:Ne.size))return;D.ports[0].postMessage({status:"ack",eventId:x,eventType:B});const xe=Array.from(Ne).map(function(){var qe=(0,E.Z)(function*(Dt){return Dt(D.origin,ne)});return function(Dt){return qe.apply(this,arguments)}}()),$e=yield function(m){return Promise.all(m.map(function(){var h=(0,E.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(v){return{fulfilled:!1,reason:v}}});return function(f){return h.apply(this,arguments)}}()))}(xe);D.ports[0].postMessage({status:"done",eventId:x,eventType:B,response:$e})})()}_subscribe(f,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(v)}_unsubscribe(f,v){this.handlersMap[f]&&v&&this.handlersMap[f].delete(v),(!v||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function oa(m="",h=10){let f="";for(let v=0;v<h;v++)f+=Math.floor(10*Math.random());return m+f}class vi{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,v=50){var D=this;return(0,E.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let B,ne;return new Promise((Ne,xe)=>{const $e=oa("",20);x.port1.start();const qe=setTimeout(()=>{xe(new Error("unsupported_event"))},v);ne={messageChannel:x,onMessage(Dt){const Pn=Dt;if(Pn.data.eventId===$e)switch(Pn.data.status){case"ack":clearTimeout(qe),B=setTimeout(()=>{xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Ne(Pn.data.response);break;default:clearTimeout(qe),clearTimeout(B),xe(new Error("invalid_response"))}}},D.handlers.add(ne),x.port1.addEventListener("message",ne.onMessage),D.target.postMessage({eventType:h,eventId:$e,data:f},[x.port2])}).finally(()=>{ne&&D.removeMessageHandler(ne)})})()}}function Cn(){return window}function pc(){return void 0!==Cn().WorkerGlobalScope&&"function"==typeof Cn().importScripts}function Do(){return(Do=(0,E.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(m){return null}})).apply(this,arguments)}const Us="firebaseLocalStorageDb",ua="firebaseLocalStorage",Ja="fbase_key";class Nr{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function ki(m,h){return m.transaction([ua],h?"readwrite":"readonly").objectStore(ua)}function ut(){const m=indexedDB.open(Us,1);return new Promise((h,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const v=m.result;try{v.createObjectStore(ua,{keyPath:Ja})}catch(D){f(D)}}),m.addEventListener("success",(0,E.Z)(function*(){const v=m.result;v.objectStoreNames.contains(ua)?h(v):(v.close(),yield function(){const m=indexedDB.deleteDatabase(Us);return new Nr(m).toPromise()}(),h(yield ut()))}))})}function Fi(m,h,f){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,E.Z)(function*(m,h,f){const v=ki(m,!0).put({[Ja]:h,value:f});return new Nr(v).toPromise()})).apply(this,arguments)}function Wd(){return(Wd=(0,E.Z)(function*(m,h){const f=ki(m,!1).get(h),v=yield new Nr(f).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Wf(m,h){const f=ki(m,!0).delete(h);return new Nr(f).toPromise()}const Jt=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,E.Z)(function*(){return f.db||(f.db=yield ut()),f.db})()}_withRetries(f){var v=this;return(0,E.Z)(function*(){let D=0;for(;;)try{const x=yield v._openDb();return yield f(x)}catch(x){if(D++>3)throw x;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,E.Z)(function*(){return pc()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,E.Z)(function*(){f.receiver=Hf._getInstance(pc()?self:null),f.receiver._subscribe("keyChanged",function(){var v=(0,E.Z)(function*(D,x){return{keyProcessed:(yield f._poll()).includes(x.key)}});return function(D,x){return v.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var v=(0,E.Z)(function*(D,x){return["keyChanged"]});return function(D,x){return v.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,E.Z)(function*(){var v,D;if(f.activeServiceWorker=yield function(){return Do.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new vi(f.activeServiceWorker);const x=yield f.sender._send("ping",{},800);!x||(null===(v=x[0])||void 0===v?void 0:v.fulfilled)&&(null===(D=x[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var v=this;return(0,E.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function(){var m;return(null===(m=null==navigator?void 0:navigator.serviceWorker)||void 0===m?void 0:m.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:f},v.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const f=yield ut();return yield Fi(f,sa,"1"),yield Wf(f,sa),!0}catch(f){}return!1})()}_withPendingWrite(f){var v=this;return(0,E.Z)(function*(){v.pendingWrites++;try{yield f()}finally{v.pendingWrites--}})()}_set(f,v){var D=this;return(0,E.Z)(function*(){return D._withPendingWrite((0,E.Z)(function*(){return yield D._withRetries(x=>Fi(x,f,v)),D.localCache[f]=v,D.notifyServiceWorker(f)}))})()}_get(f){var v=this;return(0,E.Z)(function*(){const D=yield v._withRetries(x=>function(m,h){return Wd.apply(this,arguments)}(x,f));return v.localCache[f]=D,D})()}_remove(f){var v=this;return(0,E.Z)(function*(){return v._withPendingWrite((0,E.Z)(function*(){return yield v._withRetries(D=>Wf(D,f)),delete v.localCache[f],v.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,E.Z)(function*(){const v=yield f._withRetries(B=>{const ne=ki(B,!1).getAll();return new Nr(ne).toPromise()});if(!v)return[];if(0!==f.pendingWrites)return[];const D=[],x=new Set;for(const{fbase_key:B,value:ne}of v)x.add(B),JSON.stringify(f.localCache[B])!==JSON.stringify(ne)&&(f.notifyListeners(B,ne),D.push(B));for(const B of Object.keys(f.localCache))f.localCache[B]&&!x.has(B)&&(f.notifyListeners(B,null),D.push(B));return D})()}notifyListeners(f,v){this.localCache[f]=v;const D=this.listeners[f];if(D)for(const x of Array.from(D))x(v)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function gc(m,h){return mt(m,"POST","/v2/accounts/mfaSignIn:start",Gt(m,h))}function zd(){return(zd=(0,E.Z)(function*(m){return(yield mt(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fl(m){return new Promise((h,f)=>{const v=document.createElement("script");v.setAttribute("src",m),v.onload=h,v.onerror=D=>{const x=Et("internal-error");x.customData=D,f(x)},v.type="text/javascript",v.charset="UTF-8",function(){var m,h;return null!==(h=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==h?h:document}().appendChild(v)})}function Kd(m){return`__${m}${Math.floor(1e6*Math.random())}`}const Xa=1e12;class ir{constructor(h){this.auth=h,this.counter=Xa,this._widgets=new Map}render(h,f){const v=this.counter;return this._widgets.set(v,new $s(h,this.auth.name,f||{})),this.counter++,v}reset(h){var f;const v=h||Xa;null===(f=this._widgets.get(v))||void 0===f||f.delete(),this._widgets.delete(v)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Xa))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,E.Z)(function*(){var v;return null===(v=f._widgets.get(h||Xa))||void 0===v||v.execute(),""})()}}class $s{constructor(h,f,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof h?document.getElementById(h):h;Ce(D,"argument-error",{appName:f}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(m){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<50;v++)h.push(f.charAt(Math.floor(Math.random()*f.length)));return h.join("")}();const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Dn=Kd("rcb"),mc=new Ot(3e4,6e4);class tu{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Cn().grecaptcha}load(h,f=""){return Ce((m=f).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m),h,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Cn().grecaptcha):new Promise((v,D)=>{const x=Cn().setTimeout(()=>{D(Et(h,"network-request-failed"))},mc.get());Cn()[Dn]=()=>{Cn().clearTimeout(x),delete Cn()[Dn];const ne=Cn().grecaptcha;if(!ne)return void D(Et(h,"internal-error"));const Ne=ne.render;ne.render=(xe,$e)=>{const qe=Ne(xe,$e);return this.counter++,qe},this.hostLanguage=f,v(ne)},fl(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Dn,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(x),D(Et(h,"internal-error"))})});var m}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Cn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ai{load(h){return(0,E.Z)(function*(){return new ir(h)})()}clearedOneInstance(){}}const ui="recaptcha",Li={theme:"light",type:"image"};class To{constructor(h,f=Object.assign({},Li),v){this.parameters=f,this.type=ui,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bn(v),this.isInvisible="invisible"===this.parameters.size,Ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof h?document.getElementById(h):h;Ce(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ai:new tu,this.validateStartingState()}verify(){var h=this;return(0,E.Z)(function*(){h.assertNotDestroyed();const f=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(f)||new Promise(x=>{const B=ne=>{!ne||(h.tokenChangeListeners.delete(B),x(ne))};h.tokenChangeListeners.add(B),h.isInvisible&&v.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Ce(!this.parameters.sitekey,this.auth,"argument-error"),Ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ce("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(v=>v(f)),"function"==typeof h)h(f);else if("string"==typeof h){const v=Cn()[h];"function"==typeof v&&v(f)}}}assertNotDestroyed(){Ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,E.Z)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const v=document.createElement("div");f.appendChild(v),f=v}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,E.Z)(function*(){Ce(De()&&!pc(),h.auth,"internal-error"),yield function(){let m=null;return new Promise(h=>{"complete"!==document.readyState?(m=()=>h(),window.addEventListener("load",m)):h()}).catch(h=>{throw m&&window.removeEventListener("load",m),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function(m){return zd.apply(this,arguments)}(h.auth);Ce(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return Ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class pl{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=yo._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function sr(){return(sr=(0,E.Z)(function*(m,h,f){const v=bn(m),D=yield T(v,h,(0,k.m9)(f));return new pl(D,x=>vt(v,x))})).apply(this,arguments)}function gl(){return(gl=(0,E.Z)(function*(m,h,f){const v=(0,k.m9)(m);yield Os(!1,v,"phone");const D=yield T(v.auth,h,(0,k.m9)(f));return new pl(D,x=>_n(v,x))})).apply(this,arguments)}function b(){return(b=(0,E.Z)(function*(m,h,f){const v=(0,k.m9)(m),D=yield T(v.auth,h,(0,k.m9)(f));return new pl(D,x=>Eo(v,x))})).apply(this,arguments)}function T(m,h,f){return R.apply(this,arguments)}function R(){return(R=(0,E.Z)(function*(m,h,f){var v;const D=yield f.verify();try{let x;if(Ce("string"==typeof D,m,"argument-error"),Ce(f.type===ui,m,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const B=x.session;if("phoneNumber"in x)return Ce("enroll"===B.type,m,"internal-error"),(yield Ya(m,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Ce("signin"===B.type,m,"internal-error");const ne=(null===(v=x.multiFactorHint)||void 0===v?void 0:v.uid)||x.multiFactorUid;return Ce(ne,m,"missing-multi-factor-info"),(yield gc(m,{mfaPendingCredential:B.credential,mfaEnrollmentId:ne,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield Ni(m,{phoneNumber:x.phoneNumber,recaptchaToken:D});return B}}finally{f._reset()}})).apply(this,arguments)}function z(){return(z=(0,E.Z)(function*(m,h){yield Ld((0,k.m9)(m),h)})).apply(this,arguments)}let ae=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=bn(f)}verifyPhoneNumber(f,v){return T(this.auth,f,(0,k.m9)(v))}static credential(f,v){return yo._fromVerification(f,v)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:v,temporaryProof:D}=f;return v&&D?yo._fromTokenResponse(v,D):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function be(m,h){return h?Rt(h):(Ce(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Ue extends Ns{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ms(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Ms(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Ms(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function je(m){return al(m.auth,new Ue(m),m.bypassAuthState)}function kt(m){const{auth:h,user:f}=m;return Ce(f,h,"internal-error"),Zu(f,new Ue(m),m.bypassAuthState)}function Bt(m){return zn.apply(this,arguments)}function zn(){return(zn=(0,E.Z)(function*(m){const{auth:h,user:f}=m;return Ce(f,h,"internal-error"),Ld(f,new Ue(m),m.bypassAuthState)})).apply(this,arguments)}class Kn{constructor(h,f,v,D,x=!1){this.auth=h,this.resolver=v,this.user=D,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,E.Z)(function*(v,D){h.pendingPromise={resolve:v,reject:D};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(v,D){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,E.Z)(function*(){const{urlResponse:v,sessionId:D,postBody:x,tenantId:B,error:ne,type:Ne}=h;if(ne)return void f.reject(ne);const xe={auth:f.auth,requestUri:v,sessionId:D,tenantId:B||void 0,postBody:x||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Ne)(xe))}catch($e){f.reject($e)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return je;case"linkViaPopup":case"linkViaRedirect":return Bt;case"reauthViaPopup":case"reauthViaRedirect":return kt;default:Ft(this.auth,"internal-error")}}resolve(h){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zn=new Ot(2e3,1e4);function So(){return(So=(0,E.Z)(function*(m,h,f){const v=bn(m);Tr(m,h,jr);const D=be(v,f);return new ml(v,"signInViaPopup",h,D).executeNotNull()})).apply(this,arguments)}function gs(){return(gs=(0,E.Z)(function*(m,h,f){const v=(0,k.m9)(m);Tr(v.auth,h,jr);const D=be(v.auth,f);return new ml(v.auth,"reauthViaPopup",h,D,v).executeNotNull()})).apply(this,arguments)}function ft(){return(ft=(0,E.Z)(function*(m,h,f){const v=(0,k.m9)(m);Tr(v.auth,h,jr);const D=be(v.auth,f);return new ml(v.auth,"linkViaPopup",h,D,v).executeNotNull()})).apply(this,arguments)}let ml=(()=>{class m extends Kn{constructor(f,v,D,x,B){super(f,v,x,B),this.provider=D,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,E.Z)(function*(){const v=yield f.execute();return Ce(v,f.auth,"internal-error"),v})()}onExecution(){var f=this;return(0,E.Z)(function*(){xn(1===f.filter.length,"Popup operations only handle one event");const v=oa();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],v),f.authWindow.associatedEvent=v,f.resolver._originValidation(f.auth).catch(D=>{f.reject(D)}),f.resolver._isIframeWebStorageSupported(f.auth,D=>{D||f.reject(Et(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var v,D;this.pollId=(null===(D=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Et(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,Zn.get())};f()}}return m.currentPopupAction=null,m})();const nu=new Map;class ru extends Kn{constructor(h,f,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,E.Z)(function*(){let v=nu.get(f.auth._key());if(!v){try{const x=(yield function(m,h){return Zf.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;v=()=>Promise.resolve(x)}catch(D){v=()=>Promise.reject(D)}nu.set(f.auth._key(),v)}return f.bypassAuthState||nu.set(f.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,v=this;return(0,E.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(v,h);if("unknown"!==h.type){if(h.eventId){const D=yield v.auth._redirectUserForId(h.eventId);if(D)return v.user=D,f().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Zf(){return(Zf=(0,E.Z)(function*(m,h){const f=iu(h),v=xo(m);if(!(yield v._isAvailable()))return!1;const D="true"===(yield v._get(f));return yield v._remove(f),D})).apply(this,arguments)}function Tn(m,h){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,E.Z)(function*(m,h){return xo(m)._set(iu(h),"true")})).apply(this,arguments)}function xo(m){return Rt(m._redirectPersistence)}function iu(m){return Hn("pendingRedirect",m.config.apiKey,m.name)}function wi(){return(wi=(0,E.Z)(function*(m,h,f){const v=bn(m);Tr(m,h,jr);const D=be(v,f);return yield Tn(D,v),D._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function Ui(){return(Ui=(0,E.Z)(function*(m,h,f){const v=(0,k.m9)(m);Tr(v.auth,h,jr);const D=be(v.auth,f);yield Tn(D,v.auth);const x=yield pa(v);return D._openRedirect(v.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function Yd(){return(Yd=(0,E.Z)(function*(m,h,f){const v=(0,k.m9)(m);Tr(v.auth,h,jr);const D=be(v.auth,f);yield Os(!1,v,h.providerId),yield Tn(D,v.auth);const x=yield pa(v);return D._openRedirect(v.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function vc(){return(vc=(0,E.Z)(function*(m,h){return yield bn(m)._initializationPromise,fa(m,h,!1)})).apply(this,arguments)}function fa(m,h){return su.apply(this,arguments)}function su(){return(su=(0,E.Z)(function*(m,h,f=!1){const v=bn(m),D=be(v,h),B=yield new ru(v,D,f).execute();return B&&!f&&(delete B.user._redirectEventId,yield v._persistUserIfCurrent(B.user),yield v._setRedirectUser(null,h)),B})).apply(this,arguments)}function pa(m){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,E.Z)(function*(m){const h=oa(`${m.uid}:::`);return m._redirectEventId=h,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),h})).apply(this,arguments)}class Ec{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(f=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N_(m);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var v;if(h.error&&!N_(h)){const D=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";f.onError(Et(this.auth,D))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const v=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ga(h))}saveEventToCache(h){this.cachedEventUids.add(ga(h)),this.lastProcessedEventTime=Date.now()}}function ga(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(h=>h).join("-")}function N_({type:m,error:h}){return"unknown"===m&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Yf(m){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,E.Z)(function*(m,h={}){return mt(m,"GET","/v1/projects",h)})).apply(this,arguments)}const Jd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vl=/^https?/;function Ro(){return(Ro=(0,E.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:h}=yield Yf(m);for(const f of h)try{if(Qf(f))return}catch(v){}Ft(m,"unauthorized-domain")})).apply(this,arguments)}function Qf(m){const h=et(),{protocol:f,hostname:v}=new URL(h);if(m.startsWith("chrome-extension://")){const B=new URL(m);return""===B.hostname&&""===v?"chrome-extension:"===f&&m.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&B.hostname===v}if(!vl.test(f))return!1;if(Jd.test(m))return v===m;const D=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(v)}const ma=new Ot(3e4,6e4);function El(){const m=Cn().___jsl;if(null==m?void 0:m.H)for(const h of Object.keys(m.H))if(m.H[h].r=m.H[h].r||[],m.H[h].L=m.H[h].L||[],m.H[h].r=[...m.H[h].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let Xd=null;function eh(m){return Xd=Xd||function(m){return new Promise((h,f)=>{var v,D,x;function B(){El(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{El(),f(Et(m,"network-request-failed"))},timeout:ma.get()})}if(null===(D=null===(v=Cn().gapi)||void 0===v?void 0:v.iframes)||void 0===D?void 0:D.Iframe)h(gapi.iframes.getContext());else{if(!(null===(x=Cn().gapi)||void 0===x?void 0:x.load)){const ne=Kd("iframefcb");return Cn()[ne]=()=>{gapi.load?B():f(Et(m,"network-request-failed"))},fl(`https://apis.google.com/js/api.js?onload=${ne}`)}B()}}).catch(h=>{throw Xd=null,h})}(m),Xd}const Jf=new Ot(5e3,15e3),tm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ou=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M_(m){const h=m.config;Ce(h.authDomain,m,"auth-domain-config-required");const f=h.emulator?Ke(h,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:m.name,v:ce.SDK_VERSION},D=ou.get(m.config.apiHost);D&&(v.eid=D);const x=m._getFrameworks();return x.length&&(v.fw=x.join(",")),`${f}?${(0,k.xO)(v).slice(1)}`}function Xf(){return(Xf=(0,E.Z)(function*(m){const h=yield eh(m),f=Cn().gapi;return Ce(f,m,"internal-error"),h.open({where:document.body,url:M_(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tm,dontclear:!0},v=>new Promise(function(){var D=(0,E.Z)(function*(x,B){yield v.restyle({setHideOnLeave:!1});const ne=Et(m,"network-request-failed"),Ne=Cn().setTimeout(()=>{B(ne)},Jf.get());function xe(){Cn().clearTimeout(Ne),x(v)}v.ping(xe).then(xe,()=>{B(ne)})});return function(x,B){return D.apply(this,arguments)}}()))})).apply(this,arguments)}const nm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class tp{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function th(m,h,f,v,D,x){Ce(m.config.authDomain,m,"auth-domain-config-required"),Ce(m.config.apiKey,m,"invalid-api-key");const B={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:v,v:ce.SDK_VERSION,eventId:D};if(h instanceof jr){h.setDefaultLanguage(m.languageCode),B.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(B.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ne,xe]of Object.entries(x||{}))B[Ne]=xe}if(h instanceof Mi){const Ne=h.getScopes().filter(xe=>""!==xe);Ne.length>0&&(B.scopes=Ne.join(","))}m.tenantId&&(B.tid=m.tenantId);const ne=B;for(const Ne of Object.keys(ne))void 0===ne[Ne]&&delete ne[Ne];return`${function({config:m}){return m.emulator?Ke(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,k.xO)(ne).slice(1)}`}const rh="webStorageSupport";class Il extends class{constructor(h){this.factorId=h}_process(h,f,v){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,v);case"signin":return this._finalizeSignIn(h,f.credential);default:return er("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Il(h)}_finalizeEnroll(h,f,v){return function(m,h){return mt(m,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(m,h))}(h,{idToken:f,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function(m,h){return mt(m,"POST","/v2/accounts/mfaSignIn:finalize",Gt(m,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let bl=(()=>{class m{constructor(){}static assertion(f){return Il._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var m,bc="@firebase/auth";class Cl{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,E.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(v=>{var D;h((null===(D=v)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);!f||(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ws(){return window}function Cc(){return(Cc=(0,E.Z)(function*(m,h,f){var v;const{BuildInfo:D}=Ws();xn(h.sessionId,"AuthEvent did not contain a session ID");const x=yield oh(h.sessionId),B={};return xi()?B.ibi=D.packageName:go()?B.apn=D.packageName:Ft(m,"operation-not-supported-in-this-environment"),D.displayName&&(B.appDisplayName=D.displayName),B.sessionId=x,th(m,f,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,B)})).apply(this,arguments)}function au(){return(au=(0,E.Z)(function*(m){const{BuildInfo:h}=Ws(),f={};xi()?f.iosBundleId=h.packageName:go()?f.androidPackageName=h.packageName:Ft(m,"operation-not-supported-in-this-environment"),yield Yf(m,f)})).apply(this,arguments)}function sh(){return(sh=(0,E.Z)(function*(m,h,f){const{cordova:v}=Ws();let D=()=>{};try{yield new Promise((x,B)=>{let ne=null;function Ne(){var qe;x();const Dt=null===(qe=v.plugins.browsertab)||void 0===qe?void 0:qe.close;"function"==typeof Dt&&Dt(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function xe(){ne||(ne=window.setTimeout(()=>{B(Et(m,"redirect-cancelled-by-user"))},2e3))}function $e(){"visible"===(null==document?void 0:document.visibilityState)&&xe()}h.addPassiveListener(Ne),document.addEventListener("resume",xe,!1),go()&&document.addEventListener("visibilitychange",$e,!1),D=()=>{h.removePassiveListener(Ne),document.removeEventListener("resume",xe,!1),document.removeEventListener("visibilitychange",$e,!1),ne&&window.clearTimeout(ne)}})}finally{D()}})).apply(this,arguments)}function oh(m){return sp.apply(this,arguments)}function sp(){return(sp=(0,E.Z)(function*(m){const h=op(m),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function op(m){if(xn(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(m);const h=new ArrayBuffer(m.length),f=new Uint8Array(h);for(let v=0;v<m.length;v++)f[v]=m.charCodeAt(v);return f}m="Browser",(0,ce._registerComponent)(new ze.wA("auth",(h,{options:f})=>{const v=h.getProvider("app").getImmediate(),{apiKey:D,authDomain:x}=v.options;return(B=>{Ce(D&&!D.includes(":"),"invalid-api-key",{appName:B.name}),Ce(!(null==x?void 0:x.includes(":")),"argument-error",{appName:B.name});const ne={apiKey:D,authDomain:x,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hu(m)},Ne=new Dd(B,ne);return function(m,h){const f=(null==h?void 0:h.persistence)||[],v=(Array.isArray(f)?f:[f]).map(Rt);(null==h?void 0:h.errorMap)&&m._updateErrorMap(h.errorMap),m._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(Ne,f),Ne})(v)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,v)=>{h.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new ze.wA("auth-internal",h=>{const f=bn(h.getProvider("auth").getImmediate());return new Cl(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(bc,"0.19.3",void 0),(0,ce.registerVersion)(bc,"0.19.3","esm2017");class Dl extends Ec{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,E.Z)(function*(){yield h.initPromise})()}}function dm(m){return on.apply(this,arguments)}function on(){return(on=(0,E.Z)(function*(m){const h=yield Bi()._get(ah(m));return h&&(yield Bi()._remove(ah(m))),h})).apply(this,arguments)}function cp(){const m=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const v=Math.floor(Math.random()*h.length);m.push(h.charAt(v))}return m.join("")}function Bi(){return Rt(Vs)}function ah(m){return Hn("authEvent",m.config.apiKey,m.name)}function uh(m){if(!(null==m?void 0:m.includes("?")))return{};const[h,...f]=m.split("?");return(0,k.zd)(f.join("?"))}function Tl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Et("no-auth-event")}}function cu(){var m;return(null===(m=null==self?void 0:self.location)||void 0===m?void 0:m.protocol)||null}function lu(m=(0,k.z$)()){return!("file:"!==cu()&&"ionic:"!==cu()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function pm(){try{const m=self.localStorage,h=oa();if(m)return m.setItem(h,"1"),m.removeItem(h),!function(m=(0,k.z$)()){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)||function(m=(0,k.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,k.hl)()}catch(m){return fh()&&(0,k.hl)()}return!1}function fh(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function dp(){return("http:"===cu()||"https:"===cu()||(0,k.ru)()||lu())&&!((0,k.b$)()||(0,k.UG)())&&pm()&&!fh()}function Tc(){return lu()&&"undefined"!=typeof document}function ph(){return(ph=(0,E.Z)(function*(){return!!Tc()&&new Promise(m=>{const h=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),m(!0)})})})).apply(this,arguments)}const mr={LOCAL:"local",NONE:"none",SESSION:"session"},du=Ce,hu="persistence";function fp(m){return mm.apply(this,arguments)}function mm(){return(mm=(0,E.Z)(function*(m){yield m._initializationPromise;const h=Sl(),f=Hn(hu,m.config.apiKey,m.name);(null==h?void 0:h.sessionStorage)&&h.sessionStorage.setItem(f,m._getPersistence())})).apply(this,arguments)}function Sl(){return"undefined"!=typeof window?window:null}const j_=Ce;class qs{constructor(){this.browserResolver=Rt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tn,this._completeRedirectFn=fa}_openPopup(h,f,v,D){var x=this;return(0,E.Z)(function*(){var B;xn(null===(B=x.eventManagers[h._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const ne=th(h,f,v,et(),D);return function(m,h,f,v=500,D=600){const x=Math.max((window.screen.availHeight-D)/2,0).toString(),B=Math.max((window.screen.availWidth-v)/2,0).toString();let ne="";const Ne=Object.assign(Object.assign({},nm),{width:v.toString(),height:D.toString(),top:x,left:B}),xe=(0,k.z$)().toLowerCase();f&&(ne=Ma(xe)?"_blank":f),zo(xe)&&(h=h||"http://localhost",Ne.scrollbars="yes");const $e=Object.entries(Ne).reduce((Dt,[Pn,zs])=>`${Dt}${Pn}=${zs},`,"");if(function(m=(0,k.z$)()){var h;return xi(m)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(xe)&&"_self"!==ne)return function(m,h){const f=document.createElement("a");f.href=m,f.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(v)}(h||"",ne),new tp(null);const qe=window.open(h||"",ne,$e);Ce(qe,m,"popup-blocked");try{qe.focus()}catch(Dt){}return new tp(qe)}(h,ne,oa())})()}_openRedirect(h,f,v,D){var x=this;return(0,E.Z)(function*(){return yield x._originValidation(h),m=th(h,f,v,et(),D),Cn().location.href=m,new Promise(()=>{});var m})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:D,promise:x}=this.eventManagers[f];return D?Promise.resolve(D):(xn(x,"If manager is not set, promise should be"),x)}const v=this.initAndGetManager(h);return this.eventManagers[f]={promise:v},v}initAndGetManager(h){var f=this;return(0,E.Z)(function*(){const v=yield function(m){return Xf.apply(this,arguments)}(h),D=new Ec(h);return v.register("authEvent",x=>(Ce(null==x?void 0:x.authEvent,h,"invalid-auth-event"),{status:D.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:D},f.iframes[h._key()]=v,D})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(rh,{type:rh},D=>{var x;const B=null===(x=null==D?void 0:D[0])||void 0===x?void 0:x[rh];void 0!==B&&f(!!B),Ft(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function(m){return Ro.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return Ko()||at()||xi()}}),this.cordovaResolver=Rt(class{constructor(){this._redirectPersistence=tn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fa}_initialize(h){var f=this;return(0,E.Z)(function*(){const v=h._key();let D=f.eventManagers.get(v);return D||(D=new Dl(h),f.eventManagers.set(v,D),f.attachCallbackListeners(h,D)),D})()}_openPopup(h){Ft(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,v,D){var x=this;return(0,E.Z)(function*(){!function(m){var h,f,v,D,x,B,ne,Ne,xe,$e;const qe=Ws();Ce("function"==typeof(null===(h=null==qe?void 0:qe.universalLinks)||void 0===h?void 0:h.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ce(void 0!==(null===(f=null==qe?void 0:qe.BuildInfo)||void 0===f?void 0:f.packageName),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ce("function"==typeof(null===(x=null===(D=null===(v=null==qe?void 0:qe.cordova)||void 0===v?void 0:v.plugins)||void 0===D?void 0:D.browsertab)||void 0===x?void 0:x.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ce("function"==typeof(null===(Ne=null===(ne=null===(B=null==qe?void 0:qe.cordova)||void 0===B?void 0:B.plugins)||void 0===ne?void 0:ne.browsertab)||void 0===Ne?void 0:Ne.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ce("function"==typeof(null===($e=null===(xe=null==qe?void 0:qe.cordova)||void 0===xe?void 0:xe.InAppBrowser)||void 0===$e?void 0:$e.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const B=yield x._initialize(h);yield B.initialized(),B.resetRedirect(),nu.clear(),yield x._originValidation(h);const ne=function(m,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:cp(),postBody:null,tenantId:m.tenantId,error:Et(m,"no-auth-event")}}(h,v,D);yield function(m,h){return Bi()._set(ah(m),h)}(h,ne);const Ne=yield function(m,h,f){return Cc.apply(this,arguments)}(h,ne,f),xe=yield function(m){const{cordova:h}=Ws();return new Promise(f=>{h.plugins.browsertab.isAvailable(v=>{let D=null;v?h.plugins.browsertab.openUrl(m):D=h.InAppBrowser.open(m,function(m=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(D)})})}(Ne);return function(m,h,f){return sh.apply(this,arguments)}(h,B,xe)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function(m){return au.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:v,handleOpenURL:D,BuildInfo:x}=Ws(),B=setTimeout((0,E.Z)(function*(){yield dm(h),f.onEvent(Tl())}),500),ne=function(){var $e=(0,E.Z)(function*(qe){clearTimeout(B);const Dt=yield dm(h);let Pn=null;Dt&&(null==qe?void 0:qe.url)&&(Pn=function(m,h){var f,v;const D=function(m){const h=uh(m),f=h.link?decodeURIComponent(h.link):void 0,v=uh(f).link,D=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return uh(D).link||D||v||f||m}(h);if(D.includes("/__/auth/callback")){const x=uh(D),B=x.firebaseError?function(m){try{return JSON.parse(m)}catch(h){return null}}(decodeURIComponent(x.firebaseError)):null,ne=null===(v=null===(f=null==B?void 0:B.code)||void 0===f?void 0:f.split("auth/"))||void 0===v?void 0:v[1],Ne=ne?Et(ne):null;return Ne?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Ne,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:D,postBody:null}}return null}(Dt,qe.url)),f.onEvent(Pn||Tl())});return function(Dt){return $e.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ne);const Ne=D,xe=`${x.packageName.toLowerCase()}://`;Ws().handleOpenURL=function(){var $e=(0,E.Z)(function*(qe){if(qe.toLowerCase().startsWith(xe)&&ne({url:qe}),"function"==typeof Ne)try{Ne(qe)}catch(Dt){console.error(Dt)}});return function(qe){return $e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=tn,this._completeRedirectFn=fa}_initialize(h){var f=this;return(0,E.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,v,D){var x=this;return(0,E.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,f,v,D)})()}_openRedirect(h,f,v,D){var x=this;return(0,E.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,f,v,D)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Tc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return j_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,E.Z)(function*(){if(h.underlyingResolver)return;const f=yield function(){return ph.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function fu(m){return m.unwrap()}function gh(m){return vm(m)}function vm(m){const{_tokenResponse:h}=m instanceof k.ZR?m.customData:m;if(!h)return null;if(!(m instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ae.credentialFromResult(m);const f=h.providerId;if(!f||"password"===f)return null;let v;switch(f){case"google.com":v=Ua;break;case"facebook.com":v=qu;break;case"github.com":v=Od;break;case"twitter.com":v=xr;break;default:const{oauthIdToken:D,oauthAccessToken:x,oauthTokenSecret:B,pendingToken:ne,nonce:Ne}=h;return x||B||D||ne?ne?f.startsWith("saml.")?ea._create(f,ne):yn._fromParams({providerId:f,signInMethod:f,pendingToken:ne,idToken:D,accessToken:x}):new Zt(f).credential({idToken:D,accessToken:x,rawNonce:Ne}):null}return m instanceof k.ZR?v.credentialFromError(m):v.credentialFromResult(m)}function yr(m,h){return h.catch(f=>{throw f instanceof k.ZR&&function(m,h){var f;const v=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Em(m,function(m,h){var f;const v=(0,k.m9)(m),D=h;return Ce(h.customData.operationType,v,"argument-error"),Ce(null===(f=D.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,v,"argument-error"),lc._fromError(v,D)}(m,h));else if(v){const D=vm(h),x=h;D&&(x.credential=D,x.tenantId=v.tenantId||void 0,x.email=v.email||void 0,x.phoneNumber=v.phoneNumber||void 0)}}(m,f),f}).then(f=>{const D=f.user;return{operationType:f.operationType,credential:gh(f),additionalUserInfo:rr(f),user:No.getOrCreate(D)}})}function Sc(m,h){return ar.apply(this,arguments)}function ar(){return(ar=(0,E.Z)(function*(m,h){const f=yield h;return{verificationId:f.verificationId,confirm:v=>yr(m,f.confirm(v))}})).apply(this,arguments)}class Em{constructor(h,f){this.resolver=f,this.auth=function(m){return m.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return yr(fu(this.auth),this.resolver.resolveSignIn(h))}}class No{constructor(h){this._delegate=h,this.multiFactor=function(m){const h=(0,k.m9)(m);return bo.has(h)||bo.set(h,hc._fromUser(h)),bo.get(h)}(h)}static getOrCreate(h){return No.USER_MAP.has(h)||No.USER_MAP.set(h,new No(h)),No.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,E.Z)(function*(){return yr(f.auth,_n(f._delegate,h))})()}linkWithPhoneNumber(h,f){var v=this;return(0,E.Z)(function*(){return Sc(v.auth,function(m,h,f){return gl.apply(this,arguments)}(v._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,E.Z)(function*(){return yr(f.auth,function(m,h,f){return ft.apply(this,arguments)}(f._delegate,h,qs))})()}linkWithRedirect(h){var f=this;return(0,E.Z)(function*(){return yield fp(bn(f.auth)),function(m,h,f){return function(m,h,f){return Yd.apply(this,arguments)}(m,h,f)}(f._delegate,h,qs)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,E.Z)(function*(){return yr(f.auth,Eo(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return Sc(this.auth,function(m,h,f){return b.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return yr(this.auth,function(m,h,f){return gs.apply(this,arguments)}(this._delegate,h,qs))}reauthenticateWithRedirect(h){var f=this;return(0,E.Z)(function*(){return yield fp(bn(f.auth)),function(m,h,f){return function(m,h,f){return Ui.apply(this,arguments)}(m,h,f)}(f._delegate,h,qs)})()}sendEmailVerification(h){return function(m,h){return Br.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,E.Z)(function*(){return yield function(m,h){return nt.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function(m,h){return qa((0,k.m9)(m),h,null)}(this._delegate,h)}updatePassword(h){return function(m,h){return qa((0,k.m9)(m),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function(m,h){return z.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function(m,h){return Nn.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function(m,h,f){return Ga.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}No.USER_MAP=new WeakMap;const Mo=Ce;let pp=(()=>{class m{constructor(f,v){if(this.app=f,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=f.options;Mo(D,"invalid-api-key",{appName:f.name});let x=[rn];if("undefined"!=typeof window){x=function(m,h){const f=Sl();if(!(null==f?void 0:f.sessionStorage))return[];const v=Hn(hu,m,h);switch(f.sessionStorage.getItem(v)){case mr.NONE:return[rn];case mr.LOCAL:return[Jt,tn];case mr.SESSION:return[tn];default:return[]}}(D,f.name);for(const ne of[Jt,Vs,tn])x.includes(ne)||x.push(ne)}Mo(D,"invalid-api-key",{appName:f.name});const B="undefined"!=typeof window?qs:void 0;this._delegate=v.initialize({options:{persistence:x,popupRedirectResolver:B}}),this._delegate._updateErrorMap(Ds),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?No.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,v){!function(m,h,f){const v=bn(m);Ce(v._canInitEmulator,v,"emulator-config-failed"),Ce(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const D=!!(null==f?void 0:f.disableWarnings),x=Gn(h),{host:B,port:ne}=function(m){const h=Gn(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(h.length));if(!f)return{host:"",port:null};const v=f[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(v);if(D){const x=D[1];return{host:x,port:Ri(v.substr(x.length+1))}}{const[x,B]=v.split(":");return{host:x,port:Ri(B)}}}(h);v.config.emulator={url:`${x}//${B}${null===ne?"":`:${ne}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:B,port:ne,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function(){function m(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,v)}applyActionCode(f){return function(m,h){return Xu.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return ec(this._delegate,f)}confirmPasswordReset(f,v){return function(m,h,f){return yi.apply(this,arguments)}(this._delegate,f,v)}createUserWithEmailAndPassword(f,v){var D=this;return(0,E.Z)(function*(){return yr(D._delegate,function(m,h,f){return nc.apply(this,arguments)}(D._delegate,f,v))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function(m,h){return Vf.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function(m,h){const f=Ps.parseLink(h);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,E.Z)(function*(){Mo(dp(),f._delegate,"operation-not-supported-in-this-environment");const v=yield function(m,h){return vc.apply(this,arguments)}(f._delegate,qs);return v?yr(f._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function(m,h){bn(m)._logFramework(h)}(this._delegate,f)}onAuthStateChanged(f,v,D){const{next:x,error:B,complete:ne}=$_(f,v,D);return this._delegate.onAuthStateChanged(x,B,ne)}onIdTokenChanged(f,v,D){const{next:x,error:B,complete:ne}=$_(f,v,D);return this._delegate.onIdTokenChanged(x,B,ne)}sendSignInLinkToEmail(f,v){return function(m,h,f){return ds.apply(this,arguments)}(this._delegate,f,v)}sendPasswordResetEmail(f,v){return function(m,h,f){return na.apply(this,arguments)}(this._delegate,f,v||void 0)}setPersistence(f){var v=this;return(0,E.Z)(function*(){let D;switch(function(m,h){du(Object.values(mr).includes(h),m,"invalid-persistence-type"),(0,k.b$)()?du(h!==mr.SESSION,m,"unsupported-persistence-type"):(0,k.UG)()?du(h===mr.NONE,m,"unsupported-persistence-type"):fh()?du(h===mr.NONE||h===mr.LOCAL&&(0,k.hl)(),m,"unsupported-persistence-type"):du(h===mr.NONE||pm(),m,"unsupported-persistence-type")}(v._delegate,f),f){case mr.SESSION:D=tn;break;case mr.LOCAL:D=(yield Rt(Jt)._isAvailable())?Jt:Vs;break;case mr.NONE:D=rn;break;default:return Ft("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return yr(this._delegate,function(m){return ta.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return yr(this._delegate,vt(this._delegate,f))}signInWithCustomToken(f){return yr(this._delegate,function(m,h){return Ju.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,v){return yr(this._delegate,function(m,h,f){return vt((0,k.m9)(m),os.credential(h,f))}(this._delegate,f,v))}signInWithEmailLink(f,v){return yr(this._delegate,function(m,h,f){return Ha.apply(this,arguments)}(this._delegate,f,v))}signInWithPhoneNumber(f,v){return Sc(this._delegate,function(m,h,f){return sr.apply(this,arguments)}(this._delegate,f,v))}signInWithPopup(f){var v=this;return(0,E.Z)(function*(){return Mo(dp(),v._delegate,"operation-not-supported-in-this-environment"),yr(v._delegate,function(m,h,f){return So.apply(this,arguments)}(v._delegate,f,qs))})()}signInWithRedirect(f){var v=this;return(0,E.Z)(function*(){return Mo(dp(),v._delegate,"operation-not-supported-in-this-environment"),yield fp(v._delegate),function(m,h,f){return function(m,h,f){return wi.apply(this,arguments)}(m,h,f)}(v._delegate,f,qs)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function(m,h){return ia.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=mr,m})();function $_(m,h,f){let v=m;"function"!=typeof m&&({next:v,error:h,complete:f}=m);const D=v;return{next:B=>D(B&&No.getOrCreate(B)),error:h,complete:f}}class mh{constructor(){this.providerId="phone",this._delegate=new ae(fu(X.Z.auth()))}static credential(h,f){return ae.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}mh.PHONE_SIGN_IN_METHOD=ae.PHONE_SIGN_IN_METHOD,mh.PROVIDER_ID=ae.PROVIDER_ID;const H_=Ce;class G_{constructor(h,f,v=X.Z.app()){var D;H_(null===(D=v.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new To(h,f,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(m){m.INTERNAL.registerComponent(new ze.wA("auth-compat",h=>{const f=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new pp(f,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:os,FacebookAuthProvider:qu,GithubAuthProvider:Od,GoogleAuthProvider:Ua,OAuthProvider:Zt,SAMLAuthProvider:_o,PhoneAuthProvider:mh,PhoneMultiFactorGenerator:bl,RecaptchaVerifier:G_,TwitterAuthProvider:xr,Auth:pp,AuthCredential:Ns,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.3")}(X.Z)},6676:function(Ye,Ee){!function(L){"use strict";function E(q){return Array.prototype.slice.call(q)}function X(q){return new Promise(function(ge,fe){q.onsuccess=function(){ge(q.result)},q.onerror=function(){fe(q.error)}})}function k(q,ge,fe){var he,Se=new Promise(function(Ge,Pe){X(he=q[ge].apply(q,fe)).then(Ge,Pe)});return Se.request=he,Se}function ce(q,ge,fe){var he=k(q,ge,fe);return he.then(function(Se){if(Se)return new F(Se,he.request)})}function te(q,ge,fe){fe.forEach(function(he){Object.defineProperty(q.prototype,he,{get:function(){return this[ge][he]},set:function(Se){this[ge][he]=Se}})})}function re(q,ge,fe,he){he.forEach(function(Se){Se in fe.prototype&&(q.prototype[Se]=function(){return k(this[ge],Se,arguments)})})}function pe(q,ge,fe,he){he.forEach(function(Se){Se in fe.prototype&&(q.prototype[Se]=function(){return this[ge][Se].apply(this[ge],arguments)})})}function ue(q,ge,fe,he){he.forEach(function(Se){Se in fe.prototype&&(q.prototype[Se]=function(){return ce(this[ge],Se,arguments)})})}function ee(q){this._index=q}function F(q,ge){this._cursor=q,this._request=ge}function V(q){this._store=q}function Y(q){this._tx=q,this.complete=new Promise(function(ge,fe){q.oncomplete=function(){ge()},q.onerror=function(){fe(q.error)},q.onabort=function(){fe(q.error)}})}function Z(q,ge,fe){this._db=q,this.oldVersion=ge,this.transaction=new Y(fe)}function se(q){this._db=q}te(ee,"_index",["name","keyPath","multiEntry","unique"]),re(ee,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ue(ee,"_index",IDBIndex,["openCursor","openKeyCursor"]),te(F,"_cursor",["direction","key","primaryKey","value"]),re(F,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(q){q in IDBCursor.prototype&&(F.prototype[q]=function(){var ge=this,fe=arguments;return Promise.resolve().then(function(){return ge._cursor[q].apply(ge._cursor,fe),X(ge._request).then(function(he){if(he)return new F(he,ge._request)})})})}),V.prototype.createIndex=function(){return new ee(this._store.createIndex.apply(this._store,arguments))},V.prototype.index=function(){return new ee(this._store.index.apply(this._store,arguments))},te(V,"_store",["name","keyPath","indexNames","autoIncrement"]),re(V,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ue(V,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),pe(V,"_store",IDBObjectStore,["deleteIndex"]),Y.prototype.objectStore=function(){return new V(this._tx.objectStore.apply(this._tx,arguments))},te(Y,"_tx",["objectStoreNames","mode"]),pe(Y,"_tx",IDBTransaction,["abort"]),Z.prototype.createObjectStore=function(){return new V(this._db.createObjectStore.apply(this._db,arguments))},te(Z,"_db",["name","version","objectStoreNames"]),pe(Z,"_db",IDBDatabase,["deleteObjectStore","close"]),se.prototype.transaction=function(){return new Y(this._db.transaction.apply(this._db,arguments))},te(se,"_db",["name","version","objectStoreNames"]),pe(se,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(q){[V,ee].forEach(function(ge){q in ge.prototype&&(ge.prototype[q.replace("open","iterate")]=function(){var fe=E(arguments),he=fe[fe.length-1],Se=this._store||this._index,Ge=Se[q].apply(Se,fe.slice(0,-1));Ge.onsuccess=function(){he(Ge.result)}})})}),[ee,V].forEach(function(q){q.prototype.getAll||(q.prototype.getAll=function(ge,fe){var he=this,Se=[];return new Promise(function(Ge){he.iterateCursor(ge,function(Pe){Pe?(Se.push(Pe.value),void 0===fe||Se.length!=fe?Pe.continue():Ge(Se)):Ge(Se)})})})}),L.openDb=function(q,ge,fe){var he=k(indexedDB,"open",[q,ge]),Se=he.request;return Se&&(Se.onupgradeneeded=function(Ge){fe&&fe(new Z(Se.result,Ge.oldVersion,Se.transaction))}),he.then(function(Ge){return new se(Ge)})},L.deleteDb=function(q){return k(indexedDB,"deleteDatabase",[q])},Object.defineProperty(L,"__esModule",{value:!0})}(Ee)},7574:(Ye,Ee,L)=>{"use strict";L.d(Ee,{y:()=>V});var E=L(7393),k=L(9181),ce=L(6490),re=L(6554),pe=L(4487);var F=L(2494);let V=(()=>{class Z{constructor(we){this._isScalar=!1,we&&(this._subscribe=we)}lift(we){const de=new Z;return de.source=this,de.operator=we,de}subscribe(we,de,q){const{operator:ge}=this,fe=function(Z,se,we){if(Z){if(Z instanceof E.L)return Z;if(Z[k.b])return Z[k.b]()}return Z||se||we?new E.L(Z,se,we):new E.L(ce.c)}(we,de,q);if(fe.add(ge?ge.call(fe,this.source):this.source||F.v.useDeprecatedSynchronousErrorHandling&&!fe.syncErrorThrowable?this._subscribe(fe):this._trySubscribe(fe)),F.v.useDeprecatedSynchronousErrorHandling&&fe.syncErrorThrowable&&(fe.syncErrorThrowable=!1,fe.syncErrorThrown))throw fe.syncErrorValue;return fe}_trySubscribe(we){try{return this._subscribe(we)}catch(de){F.v.useDeprecatedSynchronousErrorHandling&&(we.syncErrorThrown=!0,we.syncErrorValue=de),function(Z){for(;Z;){const{closed:se,destination:we,isStopped:de}=Z;if(se||de)return!1;Z=we&&we instanceof E.L?we:null}return!0}(we)?we.error(de):console.warn(de)}}forEach(we,de){return new(de=Y(de))((q,ge)=>{let fe;fe=this.subscribe(he=>{try{we(he)}catch(Se){ge(Se),fe&&fe.unsubscribe()}},ge,q)})}_subscribe(we){const{source:de}=this;return de&&de.subscribe(we)}[re.L](){return this}pipe(...we){return 0===we.length?this:function(Z){return 0===Z.length?pe.y:1===Z.length?Z[0]:function(we){return Z.reduce((de,q)=>q(de),we)}}(we)(this)}toPromise(we){return new(we=Y(we))((de,q)=>{let ge;this.subscribe(fe=>ge=fe,fe=>q(fe),()=>de(ge))})}}return Z.create=se=>new Z(se),Z})();function Y(Z){if(Z||(Z=F.v.Promise||Promise),!Z)throw new Error("no Promise impl found");return Z}},6490:(Ye,Ee,L)=>{"use strict";L.d(Ee,{c:()=>k});var E=L(2494),X=L(4449);const k={closed:!0,next(ce){},error(ce){if(E.v.useDeprecatedSynchronousErrorHandling)throw ce;(0,X.z)(ce)},complete(){}}},9765:(Ye,Ee,L)=>{"use strict";L.d(Ee,{Yc:()=>pe,xQ:()=>ue});var E=L(7574),X=L(7393),k=L(5319),ce=L(7971),te=L(8858),re=L(9181);class pe extends X.L{constructor(V){super(V),this.destination=V}}let ue=(()=>{class F extends E.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[re.b](){return new pe(this)}lift(Y){const Z=new ee(this,this);return Z.operator=Y,Z}next(Y){if(this.closed)throw new ce.N;if(!this.isStopped){const{observers:Z}=this,se=Z.length,we=Z.slice();for(let de=0;de<se;de++)we[de].next(Y)}}error(Y){if(this.closed)throw new ce.N;this.hasError=!0,this.thrownError=Y,this.isStopped=!0;const{observers:Z}=this,se=Z.length,we=Z.slice();for(let de=0;de<se;de++)we[de].error(Y);this.observers.length=0}complete(){if(this.closed)throw new ce.N;this.isStopped=!0;const{observers:Y}=this,Z=Y.length,se=Y.slice();for(let we=0;we<Z;we++)se[we].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Y){if(this.closed)throw new ce.N;return super._trySubscribe(Y)}_subscribe(Y){if(this.closed)throw new ce.N;return this.hasError?(Y.error(this.thrownError),k.w.EMPTY):this.isStopped?(Y.complete(),k.w.EMPTY):(this.observers.push(Y),new te.W(this,Y))}asObservable(){const Y=new E.y;return Y.source=this,Y}}return F.create=(V,Y)=>new ee(V,Y),F})();class ee extends ue{constructor(V,Y){super(),this.destination=V,this.source=Y}next(V){const{destination:Y}=this;Y&&Y.next&&Y.next(V)}error(V){const{destination:Y}=this;Y&&Y.error&&this.destination.error(V)}complete(){const{destination:V}=this;V&&V.complete&&this.destination.complete()}_subscribe(V){const{source:Y}=this;return Y?this.source.subscribe(V):k.w.EMPTY}}},8858:(Ye,Ee,L)=>{"use strict";L.d(Ee,{W:()=>X});var E=L(5319);class X extends E.w{constructor(ce,te){super(),this.subject=ce,this.subscriber=te,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ce=this.subject,te=ce.observers;if(this.subject=null,!te||0===te.length||ce.isStopped||ce.closed)return;const re=te.indexOf(this.subscriber);-1!==re&&te.splice(re,1)}}},7393:(Ye,Ee,L)=>{"use strict";L.d(Ee,{L:()=>pe});var E=L(9105),X=L(6490),k=L(5319),ce=L(9181),te=L(2494),re=L(4449);class pe extends k.w{constructor(F,V,Y){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!F){this.destination=X.c;break}if("object"==typeof F){F instanceof pe?(this.syncErrorThrowable=F.syncErrorThrowable,this.destination=F,F.add(this)):(this.syncErrorThrowable=!0,this.destination=new ue(this,F));break}default:this.syncErrorThrowable=!0,this.destination=new ue(this,F,V,Y)}}[ce.b](){return this}static create(F,V,Y){const Z=new pe(F,V,Y);return Z.syncErrorThrowable=!1,Z}next(F){this.isStopped||this._next(F)}error(F){this.isStopped||(this.isStopped=!0,this._error(F))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(F){this.destination.next(F)}_error(F){this.destination.error(F),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:F}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=F,this}}class ue extends pe{constructor(F,V,Y,Z){super(),this._parentSubscriber=F;let se,we=this;(0,E.m)(V)?se=V:V&&(se=V.next,Y=V.error,Z=V.complete,V!==X.c&&(we=Object.create(V),(0,E.m)(we.unsubscribe)&&this.add(we.unsubscribe.bind(we)),we.unsubscribe=this.unsubscribe.bind(this))),this._context=we,this._next=se,this._error=Y,this._complete=Z}next(F){if(!this.isStopped&&this._next){const{_parentSubscriber:V}=this;te.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?this.__tryOrSetError(V,this._next,F)&&this.unsubscribe():this.__tryOrUnsub(this._next,F)}}error(F){if(!this.isStopped){const{_parentSubscriber:V}=this,{useDeprecatedSynchronousErrorHandling:Y}=te.v;if(this._error)Y&&V.syncErrorThrowable?(this.__tryOrSetError(V,this._error,F),this.unsubscribe()):(this.__tryOrUnsub(this._error,F),this.unsubscribe());else if(V.syncErrorThrowable)Y?(V.syncErrorValue=F,V.syncErrorThrown=!0):(0,re.z)(F),this.unsubscribe();else{if(this.unsubscribe(),Y)throw F;(0,re.z)(F)}}}complete(){if(!this.isStopped){const{_parentSubscriber:F}=this;if(this._complete){const V=()=>this._complete.call(this._context);te.v.useDeprecatedSynchronousErrorHandling&&F.syncErrorThrowable?(this.__tryOrSetError(F,V),this.unsubscribe()):(this.__tryOrUnsub(V),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(F,V){try{F.call(this._context,V)}catch(Y){if(this.unsubscribe(),te.v.useDeprecatedSynchronousErrorHandling)throw Y;(0,re.z)(Y)}}__tryOrSetError(F,V,Y){if(!te.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{V.call(this._context,Y)}catch(Z){return te.v.useDeprecatedSynchronousErrorHandling?(F.syncErrorValue=Z,F.syncErrorThrown=!0,!0):((0,re.z)(Z),!0)}return!1}_unsubscribe(){const{_parentSubscriber:F}=this;this._context=null,this._parentSubscriber=null,F.unsubscribe()}}},5319:(Ye,Ee,L)=>{"use strict";L.d(Ee,{w:()=>re});var E=L(9796),X=L(1555),k=L(9105);const te=(()=>{function ue(ee){return Error.call(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((F,V)=>`${V+1}) ${F.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee,this}return ue.prototype=Object.create(Error.prototype),ue})();class re{constructor(ee){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ee&&(this._ctorUnsubscribe=!0,this._unsubscribe=ee)}unsubscribe(){let ee;if(this.closed)return;let{_parentOrParents:F,_ctorUnsubscribe:V,_unsubscribe:Y,_subscriptions:Z}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,F instanceof re)F.remove(this);else if(null!==F)for(let se=0;se<F.length;++se)F[se].remove(this);if((0,k.m)(Y)){V&&(this._unsubscribe=void 0);try{Y.call(this)}catch(se){ee=se instanceof te?pe(se.errors):[se]}}if((0,E.k)(Z)){let se=-1,we=Z.length;for(;++se<we;){const de=Z[se];if((0,X.K)(de))try{de.unsubscribe()}catch(q){ee=ee||[],q instanceof te?ee=ee.concat(pe(q.errors)):ee.push(q)}}}if(ee)throw new te(ee)}add(ee){let F=ee;if(!ee)return re.EMPTY;switch(typeof ee){case"function":F=new re(ee);case"object":if(F===this||F.closed||"function"!=typeof F.unsubscribe)return F;if(this.closed)return F.unsubscribe(),F;if(!(F instanceof re)){const Z=F;F=new re,F._subscriptions=[Z]}break;default:throw new Error("unrecognized teardown "+ee+" added to Subscription.")}let{_parentOrParents:V}=F;if(null===V)F._parentOrParents=this;else if(V instanceof re){if(V===this)return F;F._parentOrParents=[V,this]}else{if(-1!==V.indexOf(this))return F;V.push(this)}const Y=this._subscriptions;return null===Y?this._subscriptions=[F]:Y.push(F),F}remove(ee){const F=this._subscriptions;if(F){const V=F.indexOf(ee);-1!==V&&F.splice(V,1)}}}var ue;function pe(ue){return ue.reduce((ee,F)=>ee.concat(F instanceof te?F.errors:F),[])}re.EMPTY=((ue=new re).closed=!0,ue)},2494:(Ye,Ee,L)=>{"use strict";L.d(Ee,{v:()=>X});let E=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(k){if(k){const ce=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ce.stack)}else E&&console.log("RxJS: Back to a better error behavior. Thank you. <3");E=k},get useDeprecatedSynchronousErrorHandling(){return E}}},5345:(Ye,Ee,L)=>{"use strict";L.d(Ee,{IY:()=>ce,Ds:()=>re,ft:()=>ue});var E=L(7393),X=L(7574),k=L(7444);class ce extends E.L{constructor(F){super(),this.parent=F}_next(F){this.parent.notifyNext(F)}_error(F){this.parent.notifyError(F),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class re extends E.L{notifyNext(F){this.destination.next(F)}notifyError(F){this.destination.error(F)}notifyComplete(){this.destination.complete()}}function ue(ee,F){if(F.closed)return;if(ee instanceof X.y)return ee.subscribe(F);let V;try{V=(0,k.s)(ee)(F)}catch(Y){F.error(Y)}return V}},2441:(Ye,Ee,L)=>{"use strict";L.d(Ee,{c:()=>te,N:()=>re});var E=L(9765),X=L(7574),k=L(5319),ce=L(1307);class te extends X.y{constructor(V,Y){super(),this.source=V,this.subjectFactory=Y,this._refCount=0,this._isComplete=!1}_subscribe(V){return this.getSubject().subscribe(V)}getSubject(){const V=this._subject;return(!V||V.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let V=this._connection;return V||(this._isComplete=!1,V=this._connection=new k.w,V.add(this.source.subscribe(new pe(this.getSubject(),this))),V.closed&&(this._connection=null,V=k.w.EMPTY)),V}refCount(){return(0,ce.x)()(this)}}const re=(()=>{const F=te.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:F._subscribe},_isComplete:{value:F._isComplete,writable:!0},getSubject:{value:F.getSubject},connect:{value:F.connect},refCount:{value:F.refCount}}})();class pe extends E.Yc{constructor(V,Y){super(V),this.connectable=Y}_error(V){this._unsubscribe(),super._error(V)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const V=this.connectable;if(V){this.connectable=null;const Y=V._connection;V._refCount=0,V._subject=null,V._connection=null,Y&&Y.unsubscribe()}}}},9193:(Ye,Ee,L)=>{"use strict";L.d(Ee,{E:()=>X,c:()=>k});var E=L(7574);const X=new E.y(te=>te.complete());function k(te){return te?function(te){return new E.y(re=>te.schedule(()=>re.complete()))}(te):X}},4402:(Ye,Ee,L)=>{"use strict";L.d(Ee,{D:()=>we});var E=L(7574),X=L(7444),k=L(5319),ce=L(6554),pe=L(4087),ue=L(377),V=L(4072),Y=L(9489);function we(de,q){return q?function(de,q){if(null!=de){if(function(de){return de&&"function"==typeof de[ce.L]}(de))return function(de,q){return new E.y(ge=>{const fe=new k.w;return fe.add(q.schedule(()=>{const he=de[ce.L]();fe.add(he.subscribe({next(Se){fe.add(q.schedule(()=>ge.next(Se)))},error(Se){fe.add(q.schedule(()=>ge.error(Se)))},complete(){fe.add(q.schedule(()=>ge.complete()))}}))})),fe})}(de,q);if((0,V.t)(de))return function(de,q){return new E.y(ge=>{const fe=new k.w;return fe.add(q.schedule(()=>de.then(he=>{fe.add(q.schedule(()=>{ge.next(he),fe.add(q.schedule(()=>ge.complete()))}))},he=>{fe.add(q.schedule(()=>ge.error(he)))}))),fe})}(de,q);if((0,Y.z)(de))return(0,pe.r)(de,q);if(function(de){return de&&"function"==typeof de[ue.hZ]}(de)||"string"==typeof de)return function(de,q){if(!de)throw new Error("Iterable cannot be null");return new E.y(ge=>{const fe=new k.w;let he;return fe.add(()=>{he&&"function"==typeof he.return&&he.return()}),fe.add(q.schedule(()=>{he=de[ue.hZ](),fe.add(q.schedule(function(){if(ge.closed)return;let Se,Ge;try{const Pe=he.next();Se=Pe.value,Ge=Pe.done}catch(Pe){return void ge.error(Pe)}Ge?ge.complete():(ge.next(Se),this.schedule())}))})),fe})}(de,q)}throw new TypeError((null!==de&&typeof de||de)+" is not observable")}(de,q):de instanceof E.y?de:new E.y((0,X.s)(de))}},6693:(Ye,Ee,L)=>{"use strict";L.d(Ee,{n:()=>ce});var E=L(7574),X=L(5015),k=L(4087);function ce(te,re){return re?(0,k.r)(te,re):new E.y((0,X.V)(te))}},6682:(Ye,Ee,L)=>{"use strict";L.d(Ee,{T:()=>te});var E=L(7574),X=L(4869),k=L(3282),ce=L(6693);function te(...re){let pe=Number.POSITIVE_INFINITY,ue=null,ee=re[re.length-1];return(0,X.K)(ee)?(ue=re.pop(),re.length>1&&"number"==typeof re[re.length-1]&&(pe=re.pop())):"number"==typeof ee&&(pe=re.pop()),null===ue&&1===re.length&&re[0]instanceof E.y?re[0]:(0,k.J)(pe)((0,ce.n)(re,ue))}},5917:(Ye,Ee,L)=>{"use strict";L.d(Ee,{of:()=>ce});var E=L(4869),X=L(6693),k=L(4087);function ce(...te){let re=te[te.length-1];return(0,E.K)(re)?(te.pop(),(0,k.r)(te,re)):(0,X.n)(te)}},8002:(Ye,Ee,L)=>{"use strict";L.d(Ee,{U:()=>X});var E=L(7393);function X(te,re){return function(ue){if("function"!=typeof te)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ue.lift(new k(te,re))}}class k{constructor(re,pe){this.project=re,this.thisArg=pe}call(re,pe){return pe.subscribe(new ce(re,this.project,this.thisArg))}}class ce extends E.L{constructor(re,pe,ue){super(re),this.project=pe,this.count=0,this.thisArg=ue||this}_next(re){let pe;try{pe=this.project.call(this.thisArg,re,this.count++)}catch(ue){return void this.destination.error(ue)}this.destination.next(pe)}}},3282:(Ye,Ee,L)=>{"use strict";L.d(Ee,{J:()=>k});var E=L(9773),X=L(4487);function k(ce=Number.POSITIVE_INFINITY){return(0,E.zg)(X.y,ce)}},9773:(Ye,Ee,L)=>{"use strict";L.d(Ee,{zg:()=>ce});var E=L(8002),X=L(4402),k=L(5345);function ce(ue,ee,F=Number.POSITIVE_INFINITY){return"function"==typeof ee?V=>V.pipe(ce((Y,Z)=>(0,X.D)(ue(Y,Z)).pipe((0,E.U)((se,we)=>ee(Y,se,Z,we))),F)):("number"==typeof ee&&(F=ee),V=>V.lift(new te(ue,F)))}class te{constructor(ee,F=Number.POSITIVE_INFINITY){this.project=ee,this.concurrent=F}call(ee,F){return F.subscribe(new re(ee,this.project,this.concurrent))}}class re extends k.Ds{constructor(ee,F,V=Number.POSITIVE_INFINITY){super(ee),this.project=F,this.concurrent=V,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ee){this.active<this.concurrent?this._tryNext(ee):this.buffer.push(ee)}_tryNext(ee){let F;const V=this.index++;try{F=this.project(ee,V)}catch(Y){return void this.destination.error(Y)}this.active++,this._innerSub(F)}_innerSub(ee){const F=new k.IY(this),V=this.destination;V.add(F);const Y=(0,k.ft)(ee,F);Y!==F&&V.add(Y)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ee){this.destination.next(ee)}notifyComplete(){const ee=this.buffer;this.active--,ee.length>0?this._next(ee.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Ye,Ee,L)=>{"use strict";L.d(Ee,{ht:()=>V,QV:()=>ee});var E=L(7393),X=L(9193),k=L(5917),ce=L(7574);class ue{constructor(se,we,de){this.kind=se,this.value=we,this.error=de,this.hasValue="N"===se}observe(se){switch(this.kind){case"N":return se.next&&se.next(this.value);case"E":return se.error&&se.error(this.error);case"C":return se.complete&&se.complete()}}do(se,we,de){switch(this.kind){case"N":return se&&se(this.value);case"E":return we&&we(this.error);case"C":return de&&de()}}accept(se,we,de){return se&&"function"==typeof se.next?this.observe(se):this.do(se,we,de)}toObservable(){switch(this.kind){case"N":return(0,k.of)(this.value);case"E":return Z=this.error,new ce.y(we=>we.error(Z));case"C":return(0,X.c)()}var Z;throw new Error("unexpected notification kind value")}static createNext(se){return void 0!==se?new ue("N",se):ue.undefinedValueNotification}static createError(se){return new ue("E",void 0,se)}static createComplete(){return ue.completeNotification}}function ee(Z,se=0){return function(de){return de.lift(new F(Z,se))}}ue.completeNotification=new ue("C"),ue.undefinedValueNotification=new ue("N",void 0);class F{constructor(se,we=0){this.scheduler=se,this.delay=we}call(se,we){return we.subscribe(new V(se,this.scheduler,this.delay))}}class V extends E.L{constructor(se,we,de=0){super(se),this.scheduler=we,this.delay=de}static dispatch(se){const{notification:we,destination:de}=se;we.observe(de),this.unsubscribe()}scheduleMessage(se){this.destination.add(this.scheduler.schedule(V.dispatch,this.delay,new Y(se,this.destination)))}_next(se){this.scheduleMessage(ue.createNext(se))}_error(se){this.scheduleMessage(ue.createError(se)),this.unsubscribe()}_complete(){this.scheduleMessage(ue.createComplete()),this.unsubscribe()}}class Y{constructor(se,we){this.notification=se,this.destination=we}}},1307:(Ye,Ee,L)=>{"use strict";L.d(Ee,{x:()=>X});var E=L(7393);function X(){return function(re){return re.lift(new k(re))}}class k{constructor(re){this.connectable=re}call(re,pe){const{connectable:ue}=this;ue._refCount++;const ee=new ce(re,ue),F=pe.subscribe(ee);return ee.closed||(ee.connection=ue.connect()),F}}class ce extends E.L{constructor(re,pe){super(re),this.connectable=pe}_unsubscribe(){const{connectable:re}=this;if(!re)return void(this.connection=null);this.connectable=null;const pe=re._refCount;if(pe<=0)return void(this.connection=null);if(re._refCount=pe-1,pe>1)return void(this.connection=null);const{connection:ue}=this,ee=re._connection;this.connection=null,ee&&(!ue||ee===ue)&&ee.unsubscribe()}}},3101:(Ye,Ee,L)=>{"use strict";L.d(Ee,{R:()=>q});var E=L(7574);let X=1;const k=Promise.resolve(),ce={};function te(fe){return fe in ce&&(delete ce[fe],!0)}const re={setImmediate(fe){const he=X++;return ce[he]=!0,k.then(()=>te(he)&&fe()),he},clearImmediate(fe){te(fe)}};var ue=L(6465),F=L(6102);const Z=new class extends F.v{flush(he){this.active=!0,this.scheduled=void 0;const{actions:Se}=this;let Ge,Pe=-1,Tt=Se.length;he=he||Se.shift();do{if(Ge=he.execute(he.state,he.delay))break}while(++Pe<Tt&&(he=Se.shift()));if(this.active=!1,Ge){for(;++Pe<Tt&&(he=Se.shift());)he.unsubscribe();throw Ge}}}(class extends ue.o{constructor(he,Se){super(he,Se),this.scheduler=he,this.work=Se}requestAsyncId(he,Se,Ge=0){return null!==Ge&&Ge>0?super.requestAsyncId(he,Se,Ge):(he.actions.push(this),he.scheduled||(he.scheduled=re.setImmediate(he.flush.bind(he,null))))}recycleAsyncId(he,Se,Ge=0){if(null!==Ge&&Ge>0||null===Ge&&this.delay>0)return super.recycleAsyncId(he,Se,Ge);0===he.actions.length&&(re.clearImmediate(Se),he.scheduled=void 0)}});var se=L(9796);class de extends E.y{constructor(he,Se=0,Ge=Z){var fe;super(),this.source=he,this.delayTime=Se,this.scheduler=Ge,(!(!(0,se.k)(fe=Se)&&fe-parseFloat(fe)+1>=0)||Se<0)&&(this.delayTime=0),(!Ge||"function"!=typeof Ge.schedule)&&(this.scheduler=Z)}static create(he,Se=0,Ge=Z){return new de(he,Se,Ge)}static dispatch(he){const{source:Se,subscriber:Ge}=he;return this.add(Se.subscribe(Ge))}_subscribe(he){return this.scheduler.schedule(de.dispatch,this.delayTime,{source:this.source,subscriber:he})}}function q(fe,he=0){return function(Ge){return Ge.lift(new ge(fe,he))}}class ge{constructor(he,Se){this.scheduler=he,this.delay=Se}call(he,Se){return new de(Se,this.delay,this.scheduler).subscribe(he)}}},3342:(Ye,Ee,L)=>{"use strict";L.d(Ee,{b:()=>ce});var E=L(7393);function X(){}var k=L(9105);function ce(pe,ue,ee){return function(V){return V.lift(new te(pe,ue,ee))}}class te{constructor(ue,ee,F){this.nextOrObserver=ue,this.error=ee,this.complete=F}call(ue,ee){return ee.subscribe(new re(ue,this.nextOrObserver,this.error,this.complete))}}class re extends E.L{constructor(ue,ee,F,V){super(ue),this._tapNext=X,this._tapError=X,this._tapComplete=X,this._tapError=F||X,this._tapComplete=V||X,(0,k.m)(ee)?(this._context=this,this._tapNext=ee):ee&&(this._context=ee,this._tapNext=ee.next||X,this._tapError=ee.error||X,this._tapComplete=ee.complete||X)}_next(ue){try{this._tapNext.call(this._context,ue)}catch(ee){return void this.destination.error(ee)}this.destination.next(ue)}_error(ue){try{this._tapError.call(this._context,ue)}catch(ee){return void this.destination.error(ee)}this.destination.error(ue)}_complete(){try{this._tapComplete.call(this._context)}catch(ue){return void this.destination.error(ue)}return this.destination.complete()}}},4087:(Ye,Ee,L)=>{"use strict";L.d(Ee,{r:()=>k});var E=L(7574),X=L(5319);function k(ce,te){return new E.y(re=>{const pe=new X.w;let ue=0;return pe.add(te.schedule(function(){ue!==ce.length?(re.next(ce[ue++]),re.closed||pe.add(this.schedule())):re.complete()})),pe})}},6465:(Ye,Ee,L)=>{"use strict";L.d(Ee,{o:()=>k});var E=L(5319);class X extends E.w{constructor(te,re){super()}schedule(te,re=0){return this}}class k extends X{constructor(te,re){super(te,re),this.scheduler=te,this.work=re,this.pending=!1}schedule(te,re=0){if(this.closed)return this;this.state=te;const pe=this.id,ue=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(ue,pe,re)),this.pending=!0,this.delay=re,this.id=this.id||this.requestAsyncId(ue,this.id,re),this}requestAsyncId(te,re,pe=0){return setInterval(te.flush.bind(te,this),pe)}recycleAsyncId(te,re,pe=0){if(null!==pe&&this.delay===pe&&!1===this.pending)return re;clearInterval(re)}execute(te,re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(te,re);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(te,re){let ue,pe=!1;try{this.work(te)}catch(ee){pe=!0,ue=!!ee&&ee||new Error(ee)}if(pe)return this.unsubscribe(),ue}_unsubscribe(){const te=this.id,re=this.scheduler,pe=re.actions,ue=pe.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ue&&pe.splice(ue,1),null!=te&&(this.id=this.recycleAsyncId(re,te,null)),this.delay=null}}},6102:(Ye,Ee,L)=>{"use strict";L.d(Ee,{v:()=>X});let E=(()=>{class k{constructor(te,re=k.now){this.SchedulerAction=te,this.now=re}schedule(te,re=0,pe){return new this.SchedulerAction(this,te).schedule(pe,re)}}return k.now=()=>Date.now(),k})();class X extends E{constructor(ce,te=E.now){super(ce,()=>X.delegate&&X.delegate!==this?X.delegate.now():te()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ce,te=0,re){return X.delegate&&X.delegate!==this?X.delegate.schedule(ce,te,re):super.schedule(ce,te,re)}flush(ce){const{actions:te}=this;if(this.active)return void te.push(ce);let re;this.active=!0;do{if(re=ce.execute(ce.state,ce.delay))break}while(ce=te.shift());if(this.active=!1,re){for(;ce=te.shift();)ce.unsubscribe();throw re}}}},3637:(Ye,Ee,L)=>{"use strict";L.d(Ee,{z:()=>k});var E=L(6465);const k=new(L(6102).v)(E.o)},7771:(Ye,Ee,L)=>{"use strict";L.d(Ee,{c:()=>re,N:()=>te});var E=L(6465),k=L(6102);const te=new class extends k.v{}(class extends E.o{constructor(ue,ee){super(ue,ee),this.scheduler=ue,this.work=ee}schedule(ue,ee=0){return ee>0?super.schedule(ue,ee):(this.delay=ee,this.state=ue,this.scheduler.flush(this),this)}execute(ue,ee){return ee>0||this.closed?super.execute(ue,ee):this._execute(ue,ee)}requestAsyncId(ue,ee,F=0){return null!==F&&F>0||null===F&&this.delay>0?super.requestAsyncId(ue,ee,F):ue.flush(this)}}),re=te},377:(Ye,Ee,L)=>{"use strict";L.d(Ee,{hZ:()=>X});const X="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ye,Ee,L)=>{"use strict";L.d(Ee,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ye,Ee,L)=>{"use strict";L.d(Ee,{b:()=>E});const E="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ye,Ee,L)=>{"use strict";L.d(Ee,{N:()=>X});const X=(()=>{function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return k.prototype=Object.create(Error.prototype),k})()},4449:(Ye,Ee,L)=>{"use strict";function E(X){setTimeout(()=>{throw X},0)}L.d(Ee,{z:()=>E})},4487:(Ye,Ee,L)=>{"use strict";function E(X){return X}L.d(Ee,{y:()=>E})},9796:(Ye,Ee,L)=>{"use strict";L.d(Ee,{k:()=>E});const E=Array.isArray||(X=>X&&"number"==typeof X.length)},9489:(Ye,Ee,L)=>{"use strict";L.d(Ee,{z:()=>E});const E=X=>X&&"number"==typeof X.length&&"function"!=typeof X},9105:(Ye,Ee,L)=>{"use strict";function E(X){return"function"==typeof X}L.d(Ee,{m:()=>E})},1555:(Ye,Ee,L)=>{"use strict";function E(X){return null!==X&&"object"==typeof X}L.d(Ee,{K:()=>E})},4072:(Ye,Ee,L)=>{"use strict";function E(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}L.d(Ee,{t:()=>E})},4869:(Ye,Ee,L)=>{"use strict";function E(X){return X&&"function"==typeof X.schedule}L.d(Ee,{K:()=>E})},7444:(Ye,Ee,L)=>{"use strict";L.d(Ee,{s:()=>V});var E=L(5015),X=L(4449),ce=L(377),re=L(6554),ue=L(9489),ee=L(4072),F=L(1555);const V=Y=>{if(Y&&"function"==typeof Y[re.L])return(Y=>Z=>{const se=Y[re.L]();if("function"!=typeof se.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return se.subscribe(Z)})(Y);if((0,ue.z)(Y))return(0,E.V)(Y);if((0,ee.t)(Y))return(Y=>Z=>(Y.then(se=>{Z.closed||(Z.next(se),Z.complete())},se=>Z.error(se)).then(null,X.z),Z))(Y);if(Y&&"function"==typeof Y[ce.hZ])return(Y=>Z=>{const se=Y[ce.hZ]();for(;;){let we;try{we=se.next()}catch(de){return Z.error(de),Z}if(we.done){Z.complete();break}if(Z.next(we.value),Z.closed)break}return"function"==typeof se.return&&Z.add(()=>{se.return&&se.return()}),Z})(Y);{const se=`You provided ${(0,F.K)(Y)?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(se)}}},5015:(Ye,Ee,L)=>{"use strict";L.d(Ee,{V:()=>E});const E=X=>k=>{for(let ce=0,te=X.length;ce<te&&!k.closed;ce++)k.next(X[ce]);k.complete()}},8688:(Ye,Ee,L)=>{"use strict";var E=L(3018);let X=null;function k(){return X}const pe=new E.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,E.Yz7)({factory:ee,token:n,providedIn:"platform"}),n})();function ee(){return(0,E.LFG)(V)}const F=new E.OlP("Location Initialized");let V=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const s=k().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",t,!1),()=>s.removeEventListener("popstate",t)}onHashChange(t){const s=k().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",t,!1),()=>s.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,s,a){Y()?this._history.pushState(t,s,a):this.location.hash=a}replaceState(t,s,a){Y()?this._history.replaceState(t,s,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(pe))},n.\u0275prov=(0,E.Yz7)({factory:Z,token:n,providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Z(){return new V((0,E.LFG)(pe))}function se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function de(n){return n&&"?"!==n[0]?"?"+n:n}let q=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,E.Yz7)({factory:ge,token:n,providedIn:"root"}),n})();function ge(n){const e=(0,E.LFG)(pe).location;return new he((0,E.LFG)(ue),e&&e.origin||"")}const fe=new E.OlP("appBaseHref");let he=(()=>{class n extends q{constructor(t,s){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return se(this._baseHref,t)}path(t=!1){const s=this._platformLocation.pathname+de(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${s}${a}`:s}pushState(t,s,a,l){const p=this.prepareExternalUrl(a+de(l));this._platformLocation.pushState(t,s,p)}replaceState(t,s,a,l){const p=this.prepareExternalUrl(a+de(l));this._platformLocation.replaceState(t,s,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(ue),E.LFG(fe,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends q{constructor(t,s){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(t){const s=se(this._baseHref,t);return s.length>0?"#"+s:s}pushState(t,s,a,l){let p=this.prepareExternalUrl(a+de(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.pushState(t,s,p)}replaceState(t,s,a,l){let p=this.prepareExternalUrl(a+de(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.replaceState(t,s,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(ue),E.LFG(fe,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})(),Ge=(()=>{class n{constructor(t,s){this._subject=new E.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=we(ht(a)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,s=""){return this.path()==this.normalize(t+de(s))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ht(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,s="",a=null){this._platformStrategy.pushState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+de(s)),a)}replaceState(t,s="",a=null){this._platformStrategy.replaceState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+de(s)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformStrategy).historyGo)||void 0===a||a.call(s,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(t="",s){this._urlChangeListeners.forEach(a=>a(t,s))}subscribe(t,s,a){return this._subject.subscribe({next:t,error:s,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(q),E.LFG(ue))},n.normalizeQueryParams=de,n.joinWithSlash=se,n.stripTrailingSlash=we,n.\u0275prov=(0,E.Yz7)({factory:Pe,token:n,providedIn:"root"}),n})();function Pe(){return new Ge((0,E.LFG)(q),(0,E.LFG)(ue))}function ht(n){return n.replace(/\/index.html$/,"")}var _t=(()=>((_t=_t||{})[_t.Zero=0]="Zero",_t[_t.One=1]="One",_t[_t.Two=2]="Two",_t[_t.Few=3]="Few",_t[_t.Many=4]="Many",_t[_t.Other=5]="Other",_t))();const dr=E.kL8;class Hn{}let Rn=(()=>{class n extends Hn{constructor(t){super(),this.locale=t}getPluralCategory(t,s){switch(dr(s||this.locale)(t)){case _t.Zero:return"zero";case _t.One:return"one";case _t.Two:return"two";case _t.Few:return"few";case _t.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(E.soG))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();class go{constructor(e,t,s,a){this.$implicit=e,this.ngForOf=t,this.index=s,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ai=(()=>{class n{constructor(t,s,a){this._viewContainer=t,this._template=s,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const s=[];t.forEachOperation((a,l,p)=>{if(null==a.previousIndex){const _=this._viewContainer.createEmbeddedView(this._template,new go(null,this._ngForOf,-1,-1),null===p?void 0:p),I=new fr(a,_);s.push(I)}else if(null==p)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const _=this._viewContainer.get(l);this._viewContainer.move(_,p);const I=new fr(a,_);s.push(I)}});for(let a=0;a<s.length;a++)this._perViewChange(s[a].view,s[a].record);for(let a=0,l=this._viewContainer.length;a<l;a++){const p=this._viewContainer.get(a);p.context.index=a,p.context.count=l,p.context.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(t,s){t.context.$implicit=s.item}static ngTemplateContextGuard(t,s){return!0}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},n.\u0275dir=E.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class fr{constructor(e,t){this.record=e,this.view=t}}let Pf=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=E.Yjl({name:"json",type:n,pure:!1}),n})(),Ms=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:[{provide:Hn,useClass:Rn}]}),n})();function Fa(n){return"server"===n}let La=(()=>{class n{}return n.\u0275prov=(0,E.Yz7)({token:n,providedIn:"root",factory:()=>new Ff((0,E.LFG)(pe),window)}),n})();class Ff{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const s=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=s.currentNode;for(;a;){const l=a.shadowRoot;if(l){const p=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(p)return p}a=s.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),s=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(s-l[0],a-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Xo(this.window.history)||Xo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Xo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Va extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Va,X||(X=n)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(os=os||document.querySelector("base"),os?os.getAttribute("href"):null);return null==t?null:function(n){Mi=Mi||document.createElement("a"),Mi.setAttribute("href",n);const e=Mi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){os=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const s=t.indexOf("="),[a,l]=-1==s?[t,""]:[t.slice(0,s),t.slice(s+1)];if(a.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let Mi,os=null;const qu=new E.OlP("TRANSITION_ID"),Od=[{provide:E.ip1,useFactory:function(n,e,t){return()=>{t.get(E.CZH).donePromise.then(()=>{const s=k(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)s.remove(a[l])})}},deps:[qu,pe,E.zs3],multi:!0}];class wt{static init(){(0,E.VLi)(new wt)}addToWindow(e){E.dqk.getAngularTestability=(s,a=!0)=>{const l=e.findTestabilityInTree(s,a);if(null==l)throw new Error("Could not find testability for element.");return l},E.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(s=>{const a=E.dqk.getAllAngularTestabilities();let l=a.length,p=!1;const _=function(I){p=p||I,l--,0==l&&s(p)};a.forEach(function(I){I.whenStable(_)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:s?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ea=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const us=new E.OlP("EventManagerPlugins");let Os=(()=>{class n{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,a){return this._findPluginFor(s).addEventListener(t,s,a)}addGlobalEventListener(t,s,a){return this._findPluginFor(s).addGlobalEventListener(t,s,a)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const a=this._plugins;for(let l=0;l<a.length;l++){const p=a[l];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(us),E.LFG(E.R0b))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();class vo{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const a=k().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,s)}}let Zu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),s.add(a))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})(),cs=(()=>{class n extends Zu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,a){t.forEach(l=>{const p=this._doc.createElement("style");p.textContent=l,a.push(s.appendChild(p))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(al),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,a)=>{this._addStylesToHost(t,a,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(al))}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(pe))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();function al(n){k().remove(n)}const Ie={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},vt=/%COMP%/g;function ks(n,e,t){for(let s=0;s<e.length;s++){let a=e[s];Array.isArray(a)?ks(n,a,t):(a=a.replace(vt,n),t.push(a))}return t}function Vd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ls=(()=>{class n{constructor(t,s,a){this.eventManager=t,this.sharedStylesHost=s,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Oi(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case E.ifc.Emulated:{let a=this.rendererByCompId.get(s.id);return a||(a=new Fs(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,a)),a.applyToHost(t),a}case 1:case E.ifc.ShadowDom:return new yi(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const a=ks(s.id,s.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Os),E.LFG(cs),E.LFG(E.AFp))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();class Oi{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Ie[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,a){if(a){t=a+":"+t;const l=Ie[a];l?e.setAttributeNS(l,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const a=Ie[s];a?e.removeAttributeNS(a,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,a){a&(E.JOm.DashCase|E.JOm.Important)?e.style.setProperty(t,s,a&E.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&E.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Vd(s)):this.eventManager.addEventListener(e,t,Vd(s))}}class Fs extends Oi{constructor(e,t,s,a){super(e),this.component=s;const l=ks(a+"-"+s.id,s.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(vt,a+"-"+s.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(vt,n)}(a+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class yi extends Oi{constructor(e,t,s,a){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=ks(a.id,a.styles,[]);for(let p=0;p<l.length;p++){const _=document.createElement("style");_.textContent=l[p],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ul=(()=>{class n extends vo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,a){return t.addEventListener(s,a,!1),()=>this.removeEventListener(t,s,a)}removeEventListener(t,s,a){return t.removeEventListener(s,a)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(pe))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const ds=["alt","control","meta","shift"],rc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ha={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Rr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Br=(()=>{class n extends vo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,s,a){const l=n.parseEventName(s),p=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,l.domEventName,p))}static parseEventName(t){const s=t.toLowerCase().split("."),a=s.shift();if(0===s.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(s.pop());let p="";if(ds.forEach(I=>{const A=s.indexOf(I);A>-1&&(s.splice(A,1),p+=I+".")}),p+=l,0!=s.length||0===l.length)return null;const _={};return _.domEventName=a,_.fullKey=p,_}static getEventFullKey(t){let s="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ha.hasOwnProperty(e)&&(e=Ha[e]))}return rc[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),ds.forEach(l=>{l!=a&&Rr[l](t)&&(s+=l+".")}),s+=a,s}static eventCallback(t,s,a){return l=>{n.getEventFullKey(l)===t&&a.runGuarded(()=>s(l))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(pe))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const ac=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:"browser"},{provide:E.g9A,useValue:function(){Va.makeCurrent(),wt.init()},multi:!0},{provide:pe,useFactory:function(){return(0,E.RDi)(document),document},deps:[]}]),Ls=[[],{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function(){return new E.qLn},deps:[]},{provide:us,useClass:ul,multi:!0,deps:[pe,E.R0b,E.Lbi]},{provide:us,useClass:Br,multi:!0,deps:[pe]},[],{provide:ls,useClass:ls,deps:[Os,cs,E.AFp]},{provide:E.FYo,useExisting:ls},{provide:Zu,useExisting:cs},{provide:cs,useClass:cs,deps:[pe]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b]},{provide:Os,useClass:Os,deps:[us,E.R0b]},{provide:class{},useClass:ea,deps:[]},[]];let Ka=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:E.AFp,useValue:t.appId},{provide:qu,useExisting:E.AFp},Od]}}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(n,12))},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:Ls,imports:[Ms,E.hGG]}),n})();"undefined"!=typeof window&&window;var dn=L(4402),Qe=L(5917),hs=L(9765),Co=L(7971);class pr extends hs.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Co.N;return this._value}next(e){super.next(this._value=e)}}var Vs=L(4869),fc=L(9796),tn=L(7393);class cl extends tn.L{notifyNext(e,t,s,a,l){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Hf extends tn.L{constructor(e,t,s){super(),this.parent=e,this.outerValue=t,this.outerIndex=s,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var oa=L(7444),vi=L(7574);function Cn(n,e,t,s,a=new Hf(n,t,s)){if(!a.closed)return e instanceof vi.y?e.subscribe(a):(0,oa.s)(e)(a)}var ll=L(6693);const pc={};class Do{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new dl(e,this.resultSelector))}}class dl extends cl{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(pc),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let s=0;s<t;s++)this.add(Cn(this,e[s],void 0,s))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,s){const a=this.values,p=this.toRespond?a[s]===pc?--this.toRespond:this.toRespond:0;a[s]=t,0===p&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(s){return void this.destination.error(s)}this.destination.next(t)}}const Us=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var fs=L(3282);function Ja(...n){return(0,fs.J)(1)((0,Qe.of)(...n))}var Nr=L(9193);function ki(n){return new vi.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,dn.D)(t):(0,Nr.c)()).subscribe(e)})}var js=L(2441),ut=L(8002),Fi=L(5345);function Mn(n,e){return"function"==typeof e?t=>t.pipe(Mn((s,a)=>(0,dn.D)(n(s,a)).pipe((0,ut.U)((l,p)=>e(s,l,a,p))))):t=>t.lift(new ca(n))}class ca{constructor(e){this.project=e}call(e,t){return t.subscribe(new Wd(e,this.project))}}class Wd extends Fi.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const s=this.index++;try{t=this.project(e,s)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const s=new Fi.IY(this),a=this.destination;a.add(s),this.innerSubscription=(0,Fi.ft)(e,s),this.innerSubscription!==s&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const hl=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function qd(n){return e=>0===n?(0,Nr.c)():e.lift(new zg(n))}class zg{constructor(e){if(this.total=e,this.total<0)throw new hl}call(e,t){return t.subscribe(new Jt(e,this.total))}}class Jt extends tn.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,s=++this.count;s<=t&&(this.destination.next(e),s===t&&(this.destination.complete(),this.unsubscribe()))}}function gc(...n){const e=n[n.length-1];return(0,Vs.K)(e)?(n.pop(),t=>Ja(n,t,e)):t=>Ja(n,t)}function la(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new Kg(n,e,t))}}class Kg{constructor(e,t,s=!1){this.accumulator=e,this.seed=t,this.hasSeed=s}call(e,t){return t.subscribe(new zd(e,this.accumulator,this.seed,this.hasSeed))}}class zd extends tn.L{constructor(e,t,s,a){super(e),this.accumulator=t,this._seed=s,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let s;try{s=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=s,this.destination.next(s)}}function ps(n,e){return function(s){return s.lift(new fl(n,e))}}class fl{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Kd(e,this.predicate,this.thisArg))}}class Kd extends tn.L{constructor(e,t,s){super(e),this.predicate=t,this.thisArg=s,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(s){return void this.destination.error(s)}t&&this.destination.next(e)}}function Bs(n){return function(t){const s=new qf(n),a=t.lift(s);return s.caught=a}}class qf{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Xa(e,this.selector,this.caught))}}class Xa extends Fi.Ds{constructor(e,t,s){super(e),this.selector=t,this.caught=s}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const s=new Fi.IY(this);this.add(s);const a=(0,Fi.ft)(t,s);a!==s&&this.add(a)}}}var ir=L(9773);function $s(n,e){return(0,ir.zg)(n,e,1)}function zf(n){return function(t){return 0===n?(0,Nr.c)():t.lift(new Dn(n))}}class Dn{constructor(e){if(this.total=e,this.total<0)throw new hl}call(e,t){return t.subscribe(new mc(e,this.total))}}class mc extends tn.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,s=this.total,a=this.count++;t.length<s?t.push(e):t[a%s]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const s=this.count>=this.total?this.total:this.count,a=this.ring;for(let l=0;l<s;l++){const p=t++%s;e.next(a[p])}}e.complete()}}function eu(n=ai){return e=>e.lift(new tu(n))}class tu{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Zd(e,this.errorFactory))}}class Zd extends tn.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function ai(){return new Us}function ui(n=null){return e=>e.lift(new Li(n))}class Li{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new To(e,this.defaultValue))}}class To extends tn.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var gr=L(4487);function da(n,e){const t=arguments.length>=2;return s=>s.pipe(n?ps((a,l)=>n(a,l,s)):gr.y,qd(1),t?ui(e):eu(()=>new Us))}var sr=L(3342),Zg=L(1307),gl=L(5319);class b{constructor(e){this.callback=e}call(e,t){return t.subscribe(new T(e,this.callback))}}class T extends tn.L{constructor(e,t){super(e),this.add(new gl.w(t))}}class R{constructor(e,t){this.id=e,this.url=t}}class U extends R{constructor(e,t,s="imperative",a=null){super(e,t),this.navigationTrigger=s,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class z extends R{constructor(e,t,s){super(e,t),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ae extends R{constructor(e,t,s){super(e,t),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class be extends R{constructor(e,t,s){super(e,t),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ue extends R{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class je extends R{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kt extends R{constructor(e,t,s,a,l){super(e,t),this.urlAfterRedirects=s,this.state=a,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Bt extends R{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zn extends R{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kn{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zn{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hs{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class So{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vi{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gs{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ao{constructor(e,t,s){this.routerEvent=e,this.position=t,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ft="primary";class ml{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function yl(n){return new ml(n)}const nu="ngNavigationCancelingError";function ru(n){const e=Error("NavigationCancelingError: "+n);return e[nu]=!0,e}function Zf(n,e,t){const s=t.path.split("/");if(s.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||s.length<n.length))return null;const a={};for(let l=0;l<s.length;l++){const p=s[l],_=n[l];if(p.startsWith(":"))a[p.substring(1)]=_;else if(p!==_.path)return null}return{consumed:n.slice(0,s.length),posParams:a}}function Ei(n,e){const t=n?Object.keys(n):void 0,s=e?Object.keys(e):void 0;if(!t||!s||t.length!=s.length)return!1;let a;for(let l=0;l<t.length;l++)if(a=t[l],!R_(n[a],e[a]))return!1;return!0}function R_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),s=[...e].sort();return t.every((a,l)=>s[l]===a)}return n===e}function xo(n){return Array.prototype.concat.apply([],n)}function iu(n){return n.length>0?n[n.length-1]:null}function or(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function wi(n){return(0,E.CqO)(n)?n:(0,E.QGY)(n)?(0,dn.D)(Promise.resolve(n)):(0,Qe.of)(n)}const _c={exact:function Yd(n,e,t){if(!ga(n.segments,e.segments)||!su(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const s in e.children)if(!n.children[s]||!Yd(n.children[s],e.children[s],t))return!1;return!0},subset:vc},Ui={exact:function(n,e){return Ei(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>R_(n[t],e[t]))},ignored:()=>!0};function _l(n,e,t){return _c[t.paths](n.root,e.root,t.matrixParams)&&Ui[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vc(n,e,t){return fa(n,e,e.segments,t)}function fa(n,e,t,s){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!ga(a,t)||e.hasChildren()||!su(a,t,s))}if(n.segments.length===t.length){if(!ga(n.segments,t)||!su(n.segments,t,s))return!1;for(const a in e.children)if(!n.children[a]||!vc(n.children[a],e.children[a],s))return!1;return!0}{const a=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(ga(n.segments,a)&&su(n.segments,a,s)&&n.children[ft])&&fa(n.children[ft],e,l,s)}}function su(n,e,t){return e.every((s,a)=>Ui[t](n[a].parameters,s.parameters))}class pa{constructor(e,t,s){this.root=e,this.queryParams=t,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yl(this.queryParams)),this._queryParamMap}toString(){return Qg.serialize(this)}}class Ct{constructor(e,t){this.segments=e,this.children=t,this.parent=null,or(t,(s,a)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jd(this)}}class Gs{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=yl(this.parameters)),this._parameterMap}toString(){return Xd(this)}}function ga(n,e){return n.length===e.length&&n.every((t,s)=>t.path===e[s].path)}class Qd{}class Yf{parse(e){const t=new Xf(e);return new pa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${vl(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const s=n[t];return Array.isArray(s)?s.map(a=>`${Ro(t)}=${Ro(a)}`).join("&"):`${Ro(t)}=${Ro(s)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Qg=new Yf;function Jd(n){return n.segments.map(e=>Xd(e)).join("/")}function vl(n,e){if(!n.hasChildren())return Jd(n);if(e){const t=n.children[ft]?vl(n.children[ft],!1):"",s=[];return or(n.children,(a,l)=>{l!==ft&&s.push(`${l}:${vl(a,!1)}`)}),s.length>0?`${t}(${s.join("//")})`:t}{const t=function(n,e){let t=[];return or(n.children,(s,a)=>{a===ft&&(t=t.concat(e(s,a)))}),or(n.children,(s,a)=>{a!==ft&&(t=t.concat(e(s,a)))}),t}(n,(s,a)=>a===ft?[vl(n.children[ft],!1)]:[`${a}:${vl(s,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ft]?`${Jd(n)}/${t[0]}`:`${Jd(n)}/(${t.join("//")})`}}function Jg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ro(n){return Jg(n).replace(/%3B/gi,";")}function ma(n){return Jg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function El(n){return decodeURIComponent(n)}function Xg(n){return El(n.replace(/\+/g,"%20"))}function Xd(n){return`${ma(n.path)}${function(n){return Object.keys(n).map(e=>`;${ma(e)}=${ma(n[e])}`).join("")}(n.parameters)}`}const em=/^[^\/()?;=#]+/;function wl(n){const e=n.match(em);return e?e[0]:""}const tm=/^[^=?&#]+/,M_=/^[^?&#]+/;class Xf{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ct([],{}):new Ct([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(s[ft]=new Ct(e,t)),s}parseSegment(){const e=wl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Gs(El(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=wl(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const a=wl(this.remaining);a&&(s=a,this.capture(s))}e[El(t)]=El(s)}parseQueryParam(e){const t=function(n){const e=n.match(tm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const p=function(n){const e=n.match(M_);return e?e[0]:""}(this.remaining);p&&(s=p,this.capture(s))}const a=Xg(t),l=Xg(s);if(e.hasOwnProperty(a)){let p=e[a];Array.isArray(p)||(p=[p],e[a]=p),p.push(l)}else e[a]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=wl(this.remaining),a=this.remaining[s.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let l;s.indexOf(":")>-1?(l=s.substr(0,s.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=ft);const p=this.parseChildren();t[l]=1===Object.keys(p).length?p[ft]:new Ct([],p),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class nm{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ep(e,this._root);return t?t.children.map(s=>s.value):[]}firstChild(e){const t=ep(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ms(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return ms(e,this._root).map(t=>t.value)}}function ep(n,e){if(n===e.value)return e;for(const t of e.children){const s=ep(n,t);if(s)return s}return null}function ms(n,e){if(n===e.value)return[e];for(const t of e.children){const s=ms(n,t);if(s.length)return s.unshift(e),s}return[]}class ci{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function wc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class tp extends nm{constructor(e,t){super(e),this.snapshot=t,np(this,e)}toString(){return this.snapshot.toString()}}function rm(n,e){const t=function(n,e){const p=new nh([],{},{},"",{},ft,e,null,n.root,-1,{});return new rh("",new ci(p,[]))}(n,e),s=new pr([new Gs("",{})]),a=new pr({}),l=new pr({}),p=new pr({}),_=new pr(""),I=new Ic(s,a,p,_,l,ft,e,t.root);return I.snapshot=t.root,new tp(new ci(I,[]),t)}class Ic{constructor(e,t,s,a,l,p,_,I){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=l,this.outlet=p,this.component=_,this._futureSnapshot=I}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ut.U)(e=>yl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ut.U)(e=>yl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function im(n,e="emptyOnly"){const t=n.pathFromRoot;let s=0;if("always"!==e)for(s=t.length-1;s>=1;){const a=t[s],l=t[s-1];if(a.routeConfig&&""===a.routeConfig.path)s--;else{if(l.component)break;s--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(s))}class nh{constructor(e,t,s,a,l,p,_,I,A,M,O){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=l,this.outlet=p,this.component=_,this.routeConfig=I,this._urlSegment=A,this._lastPathIndex=M,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class rh extends nm{constructor(e,t){super(t),this.url=e,np(this,t)}toString(){return rp(this._root)}}function np(n,e){e.value._routerState=n,e.children.forEach(t=>np(n,t))}function rp(n){const e=n.children.length>0?` { ${n.children.map(rp).join(", ")} } `:"";return`${n.value}${e}`}function sm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ei(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ei(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ei(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ei(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Il(n,e){return Ei(n.params,e.params)&&function(n,e){return ga(n,e)&&n.every((t,s)=>Ei(t.parameters,e[s].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||Il(n.parent,e.parent))}function bc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const s=t.value;s._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(s=>{for(const a of t.children)if(n.shouldReuseRoute(s.value,a.value.snapshot))return bc(n,s,a);return bc(n,s)})}(n,e,t);return new ci(s,a)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const p=l.route;return ji(e,p),p}}const s=function(n){return new Ic(new pr(n.url),new pr(n.params),new pr(n.queryParams),new pr(n.fragment),new pr(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(l=>bc(n,l));return new ci(s,a)}}function ji(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)ji(n.children[t],e.children[t])}function ih(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ws(n){return"object"==typeof n&&null!=n&&n.outlets}function um(n,e,t,s,a){let l={};return s&&or(s,(p,_)=>{l[_]=Array.isArray(p)?p.map(I=>`${I}`):`${p}`}),new pa(t.root===n?e:k_(t.root,n,e),l,a)}function k_(n,e,t){const s={};return or(n.children,(a,l)=>{s[l]=a===e?t:k_(a,e,t)}),new Ct(n.segments,s)}class Cc{constructor(e,t,s){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=s,e&&s.length>0&&ih(s[0]))throw new Error("Root segment cannot have matrix parameters");const a=s.find(Ws);if(a&&a!==iu(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class au{constructor(e,t,s){this.segmentGroup=e,this.processChildren=t,this.index=s}}function cm(n,e,t){if(n||(n=new Ct([],{})),0===n.segments.length&&n.hasChildren())return oh(n,e,t);const s=function(n,e,t){let s=0,a=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(s>=t.length)return l;const p=n.segments[a],_=t[s];if(Ws(_))break;const I=`${_}`,A=s<t.length-1?t[s+1]:null;if(a>0&&void 0===I)break;if(I&&A&&"object"==typeof A&&void 0===A.outlets){if(!ap(I,A,p))return l;s+=2}else{if(!ap(I,{},p))return l;s++}a++}return{match:!0,pathIndex:a,commandIndex:s}}(n,e,t),a=t.slice(s.commandIndex);if(s.match&&s.pathIndex<n.segments.length){const l=new Ct(n.segments.slice(0,s.pathIndex),{});return l.children[ft]=new Ct(n.segments.slice(s.pathIndex),n.children),oh(l,0,a)}return s.match&&0===a.length?new Ct(n.segments,{}):s.match&&!n.hasChildren()?op(n,e,t):s.match?oh(n,0,a):op(n,e,t)}function oh(n,e,t){if(0===t.length)return new Ct(n.segments,{});{const s=function(n){return Ws(n[0])?n[0].outlets:{[ft]:n}}(t),a={};return or(s,(l,p)=>{"string"==typeof l&&(l=[l]),null!==l&&(a[p]=cm(n.children[p],e,l))}),or(n.children,(l,p)=>{void 0===s[p]&&(a[p]=l)}),new Ct(n.segments,a)}}function op(n,e,t){const s=n.segments.slice(0,e);let a=0;for(;a<t.length;){const l=t[a];if(Ws(l)){const I=lm(l.outlets);return new Ct(s,I)}if(0===a&&ih(t[0])){s.push(new Gs(n.segments[e].path,Dl(t[0]))),a++;continue}const p=Ws(l)?l.outlets[ft]:`${l}`,_=a<t.length-1?t[a+1]:null;p&&_&&ih(_)?(s.push(new Gs(p,Dl(_))),a+=2):(s.push(new Gs(p,{})),a++)}return new Ct(s,{})}function lm(n){const e={};return or(n,(t,s)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[s]=op(new Ct([],{}),0,t))}),e}function Dl(n){const e={};return or(n,(t,s)=>e[s]=`${t}`),e}function ap(n,e,t){return n==t.path&&Ei(e,t.parameters)}class dm{constructor(e,t,s,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=s,this.forwardEvent=a}activate(e){const t=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,s,e),sm(this.futureState.root),this.activateChildRoutes(t,s,e)}deactivateChildRoutes(e,t,s){const a=wc(t);e.children.forEach(l=>{const p=l.value.outlet;this.deactivateRoutes(l,a[p],s),delete a[p]}),or(a,(l,p)=>{this.deactivateRouteAndItsChildren(l,s)})}deactivateRoutes(e,t,s){const a=e.value,l=t?t.value:null;if(a===l)if(a.component){const p=s.getContext(a.outlet);p&&this.deactivateChildRoutes(e,t,p.children)}else this.deactivateChildRoutes(e,t,s);else l&&this.deactivateRouteAndItsChildren(t,s)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const s=t.getContext(e.value.outlet);if(s&&s.outlet){const a=s.outlet.detach(),l=s.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const s=t.getContext(e.value.outlet),a=s&&e.value.component?s.children:t,l=wc(e);for(const p of Object.keys(l))this.deactivateRouteAndItsChildren(l[p],a);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(e,t,s){const a=wc(t);e.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],s),this.forwardEvent(new gs(l.value.snapshot))}),e.children.length&&this.forwardEvent(new So(e.value.snapshot))}activateRoutes(e,t,s){const a=e.value,l=t?t.value:null;if(sm(a),a===l)if(a.component){const p=s.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,p.children)}else this.activateChildRoutes(e,t,s);else if(a.component){const p=s.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const _=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),p.children.onOutletReAttached(_.contexts),p.attachRef=_.componentRef,p.route=_.route.value,p.outlet&&p.outlet.attach(_.componentRef,_.route.value),on(_.route)}else{const _=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),I=_?_.module.componentFactoryResolver:null;p.attachRef=null,p.route=a,p.resolver=I,p.outlet&&p.outlet.activateWith(a,I),this.activateChildRoutes(e,null,p.children)}}else this.activateChildRoutes(e,null,s)}}function on(n){sm(n.value),n.children.forEach(on)}class cp{constructor(e,t){this.routes=e,this.module=t}}function Bi(n){return"function"==typeof n}function uu(n){return n instanceof pa}const ch=Symbol("INITIAL_VALUE");function Tl(){return Mn(n=>function(...n){let e,t;return(0,Vs.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,fc.k)(n[0])&&(n=n[0]),(0,ll.n)(n,t).lift(new Do(e))}(n.map(e=>e.pipe(qd(1),gc(ch)))).pipe(la((e,t)=>{let s=!1;return t.reduce((a,l,p)=>a!==ch?a:(l===ch&&(s=!0),s||!1!==l&&p!==t.length-1&&!uu(l)?a:l),e)},ch),ps(e=>e!==ch),(0,ut.U)(e=>uu(e)?e:!0===e),qd(1)))}let Dc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=E.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,s){1&t&&E._UZ(0,"router-outlet")},directives:function(){return[Am]},encapsulation:2}),n})();function Mr(n,e=""){for(let t=0;t<n.length;t++){const s=n[t];lp(s,hm(e,s))}}function lp(n,e){n.children&&Mr(n.children,e)}function hm(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function cu(n){const e=n.children&&n.children.map(cu),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ft&&(t.component=Dc),t}function nn(n){return n.outlet||ft}function lu(n,e){const t=n.filter(s=>nn(s)===e);return t.push(...n.filter(s=>nn(s)!==e)),t}const lh={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function dh(n,e,t){var s;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},lh):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||Zf)(t,n,e);if(!l)return Object.assign({},lh);const p={};or(l.posParams,(I,A)=>{p[A]=I.path});const _=l.consumed.length>0?Object.assign(Object.assign({},p),l.consumed[l.consumed.length-1].parameters):p;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:_,positionalParamSegments:null!==(s=l.posParams)&&void 0!==s?s:{}}}function hh(n,e,t,s,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(s=>Tc(n,e,s)&&nn(s)!==ft)}(n,t,s)){const p=new Ct(e,function(n,e,t,s){const a={};a[ft]=s,s._sourceSegment=n,s._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&nn(l)!==ft){const p=new Ct([],{});p._sourceSegment=n,p._segmentIndexShift=e.length,a[nn(l)]=p}return a}(n,e,s,new Ct(t,n.children)));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(s=>Tc(n,e,s))}(n,t,s)){const p=new Ct(n.segments,function(n,e,t,s,a,l){const p={};for(const _ of s)if(Tc(n,t,_)&&!a[nn(_)]){const I=new Ct([],{});I._sourceSegment=n,I._segmentIndexShift="legacy"===l?n.segments.length:e.length,p[nn(_)]=I}return Object.assign(Object.assign({},a),p)}(n,e,t,s,n.children,a));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:t}}const l=new Ct(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function Tc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function gm(n,e,t,s){return!!(nn(n)===s||s!==ft&&Tc(e,t,n))&&("**"===n.path||dh(e,n,t).matched)}function ph(n,e,t){return 0===e.length&&!n.children[t]}class mr{constructor(e){this.segmentGroup=e||null}}class du{constructor(e){this.urlTree=e}}function hu(n){return new vi.y(e=>e.error(new mr(n)))}function hp(n){return new vi.y(e=>e.error(new du(n)))}function fp(n){return new vi.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Sl{constructor(e,t,s,a,l){this.configLoader=t,this.urlSerializer=s,this.urlTree=a,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(E.h0i)}apply(){const e=hh(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ct(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ft).pipe((0,ut.U)(l=>this.createUrlTree(qs(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bs(l=>{if(l instanceof du)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof mr?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ft).pipe((0,ut.U)(a=>this.createUrlTree(qs(a),e.queryParams,e.fragment))).pipe(Bs(a=>{throw a instanceof mr?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,s){const a=e.segments.length>0?new Ct([],{[ft]:e}):e;return new pa(a,t,s)}expandSegmentGroup(e,t,s,a){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(e,t,s).pipe((0,ut.U)(l=>new Ct([],l))):this.expandSegment(e,s,t,s.segments,a,!0)}expandChildren(e,t,s){const a=[];for(const l of Object.keys(s.children))"primary"===l?a.unshift(l):a.push(l);return(0,dn.D)(a).pipe($s(l=>{const p=s.children[l],_=lu(t,l);return this.expandSegmentGroup(e,_,p,l).pipe((0,ut.U)(I=>({segment:I,outlet:l})))}),la((l,p)=>(l[p.outlet]=p.segment,l),{}),function(n,e){const t=arguments.length>=2;return s=>s.pipe(n?ps((a,l)=>n(a,l,s)):gr.y,zf(1),t?ui(e):eu(()=>new Us))}())}expandSegment(e,t,s,a,l,p){return(0,dn.D)(s).pipe($s(_=>this.expandSegmentAgainstRoute(e,t,s,_,a,l,p).pipe(Bs(A=>{if(A instanceof mr)return(0,Qe.of)(null);throw A}))),da(_=>!!_),Bs((_,I)=>{if(_ instanceof Us||"EmptyError"===_.name){if(ph(t,a,l))return(0,Qe.of)(new Ct([],{}));throw new mr(t)}throw _}))}expandSegmentAgainstRoute(e,t,s,a,l,p,_){return gm(a,t,l,p)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,l,p):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p):hu(t):hu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,s,a,p):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,s,a){const l=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?hp(l):this.lineralizeSegments(s,l).pipe((0,ir.zg)(p=>{const _=new Ct(p,{});return this.expandSegment(e,_,t,p,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p){const{matched:_,consumedSegments:I,lastChild:A,positionalParamSegments:M}=dh(t,a,l);if(!_)return hu(t);const O=this.applyRedirectCommands(I,a.redirectTo,M);return a.redirectTo.startsWith("/")?hp(O):this.lineralizeSegments(a,O).pipe((0,ir.zg)(K=>this.expandSegment(e,t,s,K.concat(l.slice(A)),p,!1)))}matchSegmentAgainstRoute(e,t,s,a,l){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,Qe.of)(s._loadedConfig):this.configLoader.load(e.injector,s)).pipe((0,ut.U)(K=>(s._loadedConfig=K,new Ct(a,{})))):(0,Qe.of)(new Ct(a,{}));const{matched:p,consumedSegments:_,lastChild:I}=dh(t,s,a);if(!p)return hu(t);const A=a.slice(I);return this.getChildConfig(e,s,a).pipe((0,ir.zg)(O=>{const K=O.module,Q=O.routes,{segmentGroup:ye,slicedSegments:ke}=hh(t,_,A,Q),Be=new Ct(ye.segments,ye.children);if(0===ke.length&&Be.hasChildren())return this.expandChildren(K,Q,Be).pipe((0,ut.U)(Pt=>new Ct(_,Pt)));if(0===Q.length&&0===ke.length)return(0,Qe.of)(new Ct(_,{}));const bt=nn(s)===l;return this.expandSegment(K,Be,Q,ke,bt?ft:l,!0).pipe((0,ut.U)(In=>new Ct(_.concat(In.segments),In.children)))}))}getChildConfig(e,t,s){return t.children?(0,Qe.of)(new cp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Qe.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,s).pipe((0,ir.zg)(a=>{return a?this.configLoader.load(e.injector,t).pipe((0,ut.U)(l=>(t._loadedConfig=l,l))):(n=t,new vi.y(e=>e.error(ru(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,Qe.of)(new cp([],e))}runCanLoadGuards(e,t,s){const a=t.canLoad;if(!a||0===a.length)return(0,Qe.of)(!0);const l=a.map(p=>{const _=e.get(p);let I;if((n=_)&&Bi(n.canLoad))I=_.canLoad(t,s);else{if(!Bi(_))throw new Error("Invalid CanLoad guard");I=_(t,s)}var n;return wi(I)});return(0,Qe.of)(l).pipe(Tl(),(0,sr.b)(p=>{if(!uu(p))return;const _=ru(`Redirecting to "${this.urlSerializer.serialize(p)}"`);throw _.url=p,_}),(0,ut.U)(p=>!0===p))}lineralizeSegments(e,t){let s=[],a=t.root;for(;;){if(s=s.concat(a.segments),0===a.numberOfChildren)return(0,Qe.of)(s);if(a.numberOfChildren>1||!a.children[ft])return fp(e.redirectTo);a=a.children[ft]}}applyRedirectCommands(e,t,s){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,s)}applyRedirectCreatreUrlTree(e,t,s,a){const l=this.createSegmentGroup(e,t.root,s,a);return new pa(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const s={};return or(e,(a,l)=>{if("string"==typeof a&&a.startsWith(":")){const _=a.substring(1);s[l]=t[_]}else s[l]=a}),s}createSegmentGroup(e,t,s,a){const l=this.createSegments(e,t.segments,s,a);let p={};return or(t.children,(_,I)=>{p[I]=this.createSegmentGroup(e,_,s,a)}),new Ct(l,p)}createSegments(e,t,s,a){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,a):this.findOrReturn(l,s))}findPosParam(e,t,s){const a=s[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let s=0;for(const a of t){if(a.path===e.path)return t.splice(s),a;s++}return e}}function qs(n){const e={};for(const s of Object.keys(n.children)){const l=qs(n.children[s]);(l.segments.length>0||l.hasChildren())&&(e[s]=l)}return function(n){if(1===n.numberOfChildren&&n.children[ft]){const e=n.children[ft];return new Ct(n.segments.concat(e.segments),e.children)}return n}(new Ct(n.segments,e))}class _m{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gh{constructor(e,t){this.component=e,this.route=t}}function B_(n,e,t){const s=n._root;return ar(s,e?e._root:null,t,[s.value])}function yr(n,e,t){const s=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(s?s.module.injector:t).get(n)}function ar(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=wc(e);return n.children.forEach(p=>{(function(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,p=e?e.value:null,_=t?t.getContext(n.value.outlet):null;if(p&&l.routeConfig===p.routeConfig){const I=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ga(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ga(n.url,e.url)||!Ei(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Il(n,e)||!Ei(n.queryParams,e.queryParams);case"paramsChange":default:return!Il(n,e)}}(p,l,l.routeConfig.runGuardsAndResolvers);I?a.canActivateChecks.push(new _m(s)):(l.data=p.data,l._resolvedData=p._resolvedData),ar(n,e,l.component?_?_.children:null:t,s,a),I&&_&&_.outlet&&_.outlet.isActivated&&a.canDeactivateChecks.push(new gh(_.outlet.component,p))}else p&&Mo(e,_,a),a.canActivateChecks.push(new _m(s)),ar(n,null,l.component?_?_.children:null:t,s,a)})(p,l[p.value.outlet],t,s.concat([p.value]),a),delete l[p.value.outlet]}),or(l,(p,_)=>Mo(p,t.getContext(_),a)),a}function Mo(n,e,t){const s=wc(n),a=n.value;or(s,(l,p)=>{Mo(l,a.component?e?e.children.getContext(p):null:e,t)}),t.canDeactivateChecks.push(new gh(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class h{}function f(n){return new vi.y(e=>e.error(n))}class D{constructor(e,t,s,a,l,p){this.rootComponentType=e,this.config=t,this.urlTree=s,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=p}recognize(){const e=hh(this.urlTree.root,[],[],this.config.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ft);if(null===t)return null;const s=new nh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ft,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new ci(s,t),l=new rh(this.url,a);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,s=im(t,this.paramsInheritanceStrategy);t.params=Object.freeze(s.params),t.data=Object.freeze(s.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,s){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,s)}processChildren(e,t){const s=[];for(const l of Object.keys(t.children)){const p=t.children[l],_=lu(e,l),I=this.processSegmentGroup(_,p,l);if(null===I)return null;s.push(...I)}const a=Ne(s);return a.sort((e,t)=>e.value.outlet===ft?-1:t.value.outlet===ft?1:e.value.outlet.localeCompare(t.value.outlet)),a}processSegment(e,t,s,a){for(const l of e){const p=this.processSegmentAgainstRoute(l,t,s,a);if(null!==p)return p}return ph(t,s,a)?[]:null}processSegmentAgainstRoute(e,t,s,a){if(e.redirectTo||!gm(e,t,s,a))return null;let l,p=[],_=[];if("**"===e.path){const Q=s.length>0?iu(s).parameters:{};l=new nh(s,Q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dt(e),nn(e),e.component,e,$e(t),qe(t)+s.length,Pn(e))}else{const Q=dh(t,e,s);if(!Q.matched)return null;p=Q.consumedSegments,_=s.slice(Q.lastChild),l=new nh(p,Q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dt(e),nn(e),e.component,e,$e(t),qe(t)+p.length,Pn(e))}const I=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:A,slicedSegments:M}=hh(t,p,_,I.filter(Q=>void 0===Q.redirectTo),this.relativeLinkResolution);var n;if(0===M.length&&A.hasChildren()){const Q=this.processChildren(I,A);return null===Q?null:[new ci(l,Q)]}if(0===I.length&&0===M.length)return[new ci(l,[])];const O=nn(e)===a,K=this.processSegment(I,A,M,O?ft:a);return null===K?null:[new ci(l,K)]}}function ne(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ne(n){const e=[],t=new Set;for(const s of n){if(!ne(s)){e.push(s);continue}const a=e.find(l=>s.value.routeConfig===l.value.routeConfig);void 0!==a?(a.children.push(...s.children),t.add(a)):e.push(s)}for(const s of t){const a=Ne(s.children);e.push(new ci(s.value,a))}return e.filter(s=>!t.has(s))}function $e(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function qe(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Dt(n){return n.data||{}}function Pn(n){return n.resolve||{}}function xc(n){return Mn(e=>{const t=n(e);return t?(0,dn.D)(t).pipe((0,ut.U)(()=>e)):(0,Qe.of)(e)})}class gp extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const vh=new E.OlP("ROUTES");class bm{constructor(e,t,s,a){this.loader=e,this.compiler=t,this.onLoadStartListener=s,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,ut.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const p=l.create(e);return new cp(xo(p.injector.get(vh,void 0,E.XFs.Self|E.XFs.Optional)).map(cu),p)}),Bs(l=>{throw t._loader$=void 0,l}));return t._loader$=new js.c(a,()=>new hs.xQ).pipe((0,Zg.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,dn.D)(this.loader.load(e)):wi(e()).pipe((0,ir.zg)(t=>t instanceof E.YKP?(0,Qe.of)(t):(0,dn.D)(this.compiler.compileModuleAsync(t))))}}class mp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Rc,this.attachRef=null}}class Rc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const s=this.getOrCreateContext(e);s.outlet=t,this.contexts.set(e,s)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new mp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Cw{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function q_(n){throw n}function Dw(n,e,t){return e.parse("/")}function Cm(n,e){return(0,Qe.of)(null)}const BD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$D={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ii=(()=>{class n{constructor(t,s,a,l,p,_,I,A){this.rootComponentType=t,this.urlSerializer=s,this.rootContexts=a,this.location=l,this.config=A,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new hs.xQ,this.errorHandler=q_,this.malformedUriErrorHandler=Dw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Cm,afterPreactivation:Cm},this.urlHandlingStrategy=new Cw,this.routeReuseStrategy=new gp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=p.get(E.h0i),this.console=p.get(E.c2e);const K=p.get(E.R0b);this.isNgZoneEnabled=K instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(A),this.currentUrlTree=new pa(new Ct([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bm(_,I,Q=>this.triggerEvent(new Kn(Q)),Q=>this.triggerEvent(new Zn(Q))),this.routerState=rm(this.currentUrlTree,this.rootComponentType),this.transitions=new pr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const s=this.events;return t.pipe(ps(a=>0!==a.id),(0,ut.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Mn(a=>{let l=!1,p=!1;return(0,Qe.of)(a).pipe((0,sr.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Mn(_=>{const I=this.browserUrlTree.toString(),A=!this.navigated||_.extractedUrl.toString()!==I||I!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||A)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return ya(_.source)&&(this.browserUrlTree=_.extractedUrl),(0,Qe.of)(_).pipe(Mn(O=>{const K=this.transitions.getValue();return s.next(new U(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),K!==this.transitions.getValue()?Nr.E:Promise.resolve(O)}),function(n,e,t,s){return Mn(a=>function(n,e,t,s,a){return new Sl(n,e,t,s,a).apply()}(n,e,t,a.extractedUrl,s).pipe((0,ut.U)(l=>Object.assign(Object.assign({},a),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,sr.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function(n,e,t,s,a){return(0,ir.zg)(l=>function(n,e,t,s,a="emptyOnly",l="legacy"){try{const p=new D(n,e,t,s,a,l).recognize();return null===p?f(new h):(0,Qe.of)(p)}catch(p){return f(p)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),s,a).pipe((0,ut.U)(p=>Object.assign(Object.assign({},l),{targetSnapshot:p}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,sr.b)(O=>{"eager"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(O.urlAfterRedirects,O),this.browserUrlTree=O.urlAfterRedirects);const K=new Ue(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);s.next(K)}));if(A&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:K,extractedUrl:Q,source:ye,restoredState:ke,extras:Be}=_,bt=new U(K,this.serializeUrl(Q),ye,ke);s.next(bt);const xt=rm(Q,this.rootComponentType).snapshot;return(0,Qe.of)(Object.assign(Object.assign({},_),{targetSnapshot:xt,urlAfterRedirects:Q,extras:Object.assign(Object.assign({},Be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,this.browserUrlTree=_.urlAfterRedirects,_.resolve(null),Nr.E}),xc(_=>{const{targetSnapshot:I,id:A,extractedUrl:M,rawUrl:O,extras:{skipLocationChange:K,replaceUrl:Q}}=_;return this.hooks.beforePreactivation(I,{navigationId:A,appliedUrlTree:M,rawUrlTree:O,skipLocationChange:!!K,replaceUrl:!!Q})}),(0,sr.b)(_=>{const I=new je(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}),(0,ut.U)(_=>Object.assign(Object.assign({},_),{guards:B_(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(n,e){return(0,ir.zg)(t=>{const{targetSnapshot:s,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:p}}=t;return 0===p.length&&0===l.length?(0,Qe.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,s){return(0,dn.D)(n).pipe((0,ir.zg)(a=>function(n,e,t,s,a){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,Qe.of)(!0);const p=l.map(_=>{const I=yr(_,e,a);let A;if(function(n){return n&&Bi(n.canDeactivate)}(I))A=wi(I.canDeactivate(n,e,t,s));else{if(!Bi(I))throw new Error("Invalid CanDeactivate guard");A=wi(I(n,e,t,s))}return A.pipe(da())});return(0,Qe.of)(p).pipe(Tl())}(a.component,a.route,t,e,s)),da(a=>!0!==a,!0))}(p,s,a,n).pipe((0,ir.zg)(_=>_&&function(n){return"boolean"==typeof n}(_)?function(n,e,t,s){return(0,dn.D)(e).pipe($s(a=>Ja(function(n,e){return null!==n&&e&&e(new Hs(n)),(0,Qe.of)(!0)}(a.route.parent,s),function(n,e){return null!==n&&e&&e(new Vi(n)),(0,Qe.of)(!0)}(a.route,s),function(n,e,t){const s=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(p=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(p)).filter(p=>null!==p).map(p=>ki(()=>{const _=p.guards.map(I=>{const A=yr(I,p.node,t);let M;if(function(n){return n&&Bi(n.canActivateChild)}(A))M=wi(A.canActivateChild(s,n));else{if(!Bi(A))throw new Error("Invalid CanActivateChild guard");M=wi(A(s,n))}return M.pipe(da())});return(0,Qe.of)(_).pipe(Tl())}));return(0,Qe.of)(l).pipe(Tl())}(n,a.path,t),function(n,e,t){const s=e.routeConfig?e.routeConfig.canActivate:null;if(!s||0===s.length)return(0,Qe.of)(!0);const a=s.map(l=>ki(()=>{const p=yr(l,e,t);let _;if(function(n){return n&&Bi(n.canActivate)}(p))_=wi(p.canActivate(e,n));else{if(!Bi(p))throw new Error("Invalid CanActivate guard");_=wi(p(e,n))}return _.pipe(da())}));return(0,Qe.of)(a).pipe(Tl())}(n,a.route,t))),da(a=>!0!==a,!0))}(s,l,n,e):(0,Qe.of)(_)),(0,ut.U)(_=>Object.assign(Object.assign({},t),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,sr.b)(_=>{if(uu(_.guardsResult)){const A=ru(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw A.url=_.guardsResult,A}const I=new kt(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(I)}),ps(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),xc(_=>{if(_.guards.canActivateChecks.length)return(0,Qe.of)(_).pipe((0,sr.b)(I=>{const A=new Bt(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);this.triggerEvent(A)}),Mn(I=>{let A=!1;return(0,Qe.of)(I).pipe(function(n,e){return(0,ir.zg)(t=>{const{targetSnapshot:s,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,Qe.of)(t);let l=0;return(0,dn.D)(a).pipe($s(p=>function(n,e,t,s){return function(n,e,t,s){const a=Object.keys(n);if(0===a.length)return(0,Qe.of)({});const l={};return(0,dn.D)(a).pipe((0,ir.zg)(p=>function(n,e,t,s){const a=yr(n,e,s);return wi(a.resolve?a.resolve(e,t):a(e,t))}(n[p],e,t,s).pipe((0,sr.b)(_=>{l[p]=_}))),zf(1),(0,ir.zg)(()=>Object.keys(l).length===a.length?(0,Qe.of)(l):Nr.E))}(n._resolve,n,e,s).pipe((0,ut.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),im(n,t).resolve),null)))}(p.route,s,n,e)),(0,sr.b)(()=>l++),zf(1),(0,ir.zg)(p=>l===a.length?(0,Qe.of)(t):Nr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,sr.b)({next:()=>A=!0,complete:()=>{A||(this.restoreHistory(I),this.cancelNavigationTransition(I,"At least one route resolver didn't emit any value."))}}))}),(0,sr.b)(I=>{const A=new zn(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);this.triggerEvent(A)}))}),xc(_=>{const{targetSnapshot:I,id:A,extractedUrl:M,rawUrl:O,extras:{skipLocationChange:K,replaceUrl:Q}}=_;return this.hooks.afterPreactivation(I,{navigationId:A,appliedUrlTree:M,rawUrlTree:O,skipLocationChange:!!K,replaceUrl:!!Q})}),(0,ut.U)(_=>{const I=function(n,e,t){const s=bc(n,e._root,t?t._root:void 0);return new tp(s,e)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:I})}),(0,sr.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((n,e,t)=>(0,ut.U)(s=>(new dm(e,s.targetRouterState,s.currentRouterState,t).activate(n),s)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,sr.b)({next(){l=!0},complete(){l=!0}}),function(n){return e=>e.lift(new b(n))}(()=>{var _;if(!l&&!p){const I=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,I)):this.cancelNavigationTransition(a,I)}(null===(_=this.currentNavigation)||void 0===_?void 0:_.id)===a.id&&(this.currentNavigation=null)}),Bs(_=>{if(p=!0,function(n){return n&&n[nu]}(_)){const I=uu(_.url);I||(this.navigated=!0,this.restoreHistory(a,!0));const A=new ae(a.id,this.serializeUrl(a.extractedUrl),_.message);s.next(A),I?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),O={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ya(a.source)};this.scheduleNavigation(M,"imperative",null,O,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const I=new be(a.id,this.serializeUrl(a.extractedUrl),_);s.next(I);try{a.resolve(this.errorHandler(_))}catch(A){a.reject(A)}}return Nr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const s=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:a,state:l,urlTree:p}=s,_={replaceUrl:!0};if(l){const I=Object.assign({},l);delete I.navigationId,delete I.\u0275routerPageId,0!==Object.keys(I).length&&(_.state=I)}this.scheduleNavigation(p,a,l,_)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(t){var s;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,s){if(!t)return!0;const a=s.urlTree.toString()===t.urlTree.toString();return s.transitionId!==t.transitionId||!a||!("hashchange"===s.source&&"popstate"===t.source||"popstate"===s.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Mr(t),this.config=t.map(cu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,s={}){const{relativeTo:a,queryParams:l,fragment:p,queryParamsHandling:_,preserveFragment:I}=s,A=a||this.routerState.root,M=I?this.currentUrlTree.fragment:p;let O=null;switch(_){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=l||null}return null!==O&&(O=this.removeEmptyProps(O)),function(n,e,t,s,a){if(0===t.length)return um(e.root,e.root,e,s,a);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Cc(!0,0,n);let e=0,t=!1;const s=n.reduce((a,l,p)=>{if("object"==typeof l&&null!=l){if(l.outlets){const _={};return or(l.outlets,(I,A)=>{_[A]="string"==typeof I?I.split("/"):I}),[...a,{outlets:_}]}if(l.segmentPath)return[...a,l.segmentPath]}return"string"!=typeof l?[...a,l]:0===p?(l.split("/").forEach((_,I)=>{0==I&&"."===_||(0==I&&""===_?t=!0:".."===_?e++:""!=_&&a.push(_))}),a):[...a,l]},[]);return new Cc(t,e,s)}(t);if(l.toRoot())return um(e.root,new Ct([],{}),e,s,a);const p=function(n,e,t){if(n.isAbsolute)return new au(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new au(l,l===e.root,0)}const s=ih(n.commands[0])?0:1;return function(n,e,t){let s=n,a=e,l=t;for(;l>a;){if(l-=a,s=s.parent,!s)throw new Error("Invalid number of '../'");a=s.segments.length}return new au(s,!1,a-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+s,n.numberOfDoubleDots)}(l,e,n),_=p.processChildren?oh(p.segmentGroup,p.index,l.commands):cm(p.segmentGroup,p.index,l.commands);return um(p.segmentGroup,_,e,s,a)}(A,this.currentUrlTree,t,O,null!=M?M:null)}navigateByUrl(t,s={skipLocationChange:!1}){const a=uu(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,s)}navigate(t,s={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,s),s)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let s;try{s=this.urlSerializer.parse(t)}catch(a){s=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return s}isActive(t,s){let a;if(a=!0===s?Object.assign({},BD):!1===s?Object.assign({},$D):s,uu(t))return _l(this.currentUrlTree,t,a);const l=this.parseUrl(t);return _l(this.currentUrlTree,l,a)}removeEmptyProps(t){return Object.keys(t).reduce((s,a)=>{const l=t[a];return null!=l&&(s[a]=l),s},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new z(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,s,a,l,p){var _,I;if(this.disposed)return Promise.resolve(!1);const A=this.getTransition(),M=ya(s)&&A&&!ya(A.source),Q=(this.lastSuccessfulId===A.id||this.currentNavigation?A.rawUrl:A.urlAfterRedirects).toString()===t.toString();if(M&&Q)return Promise.resolve(!0);let ye,ke,Be;p?(ye=p.resolve,ke=p.reject,Be=p.promise):Be=new Promise((In,Pt)=>{ye=In,ke=Pt});const bt=++this.navigationId;let xt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),xt=a&&a.\u0275routerPageId?a.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(I=this.browserPageId)&&void 0!==I?I:0)+1):xt=0,this.setTransition({id:bt,targetPageId:xt,source:s,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:ye,reject:ke,promise:Be,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Be.catch(In=>Promise.reject(In))}setBrowserUrl(t,s){const a=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(a)||s.extras.replaceUrl?this.location.replaceState(a,"",l):this.location.go(a,"",l)}restoreHistory(t,s=!1){var a,l;if("computed"===this.canceledNavigationResolution){const p=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===p?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===p&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(p)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,s){const a=new ae(t.id,this.serializeUrl(t.extractedUrl),s);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,s){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:s}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(E.DyG),E.LFG(Qd),E.LFG(Rc),E.LFG(Ge),E.LFG(E.zs3),E.LFG(E.v3s),E.LFG(E.Sil),E.LFG(void 0))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();function ya(n){return"imperative"!==n}let Am=(()=>{class n{constructor(t,s,a,l,p){this.parentContexts=t,this.location=s,this.resolver=a,this.changeDetector=p,this.activated=null,this._activatedRoute=null,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.name=l||ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,s){this.activated=t,this._activatedRoute=s,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const p=(s=s||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,I=new Sw(t,_,this.location.injector);this.activated=this.location.createComponent(p,this.location.length,I),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(Rc),E.Y36(E.s_b),E.Y36(E._Vd),E.$8M("name"),E.Y36(E.sBO))},n.\u0275dir=E.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class Sw{constructor(e,t,s){this.route=e,this.childContexts=t,this.parent=s}get(e,t){return e===Ic?this.route:e===Rc?this.childContexts:this.parent.get(e,t)}}class z_{}class Z_{preload(e,t){return(0,Qe.of)(null)}}let yp=(()=>{class n{constructor(t,s,a,l,p){this.router=t,this.injector=l,this.preloadingStrategy=p,this.loader=new bm(s,a,A=>t.triggerEvent(new Kn(A)),A=>t.triggerEvent(new Zn(A)))}setUpPreloading(){this.subscription=this.router.events.pipe(ps(t=>t instanceof z),$s(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(E.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,s){const a=[];for(const l of s)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const p=l._loadedConfig;a.push(this.processRoutes(p.module,p.routes))}else l.loadChildren&&!l.canLoad?a.push(this.preloadConfig(t,l)):l.children&&a.push(this.processRoutes(t,l.children));return(0,dn.D)(a).pipe((0,fs.J)(),(0,ut.U)(l=>{}))}preloadConfig(t,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,Qe.of)(s._loadedConfig):this.loader.load(t.injector,s)).pipe((0,ir.zg)(l=>(s._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Ii),E.LFG(E.v3s),E.LFG(E.Sil),E.LFG(E.zs3),E.LFG(z_))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})(),wh=(()=>{class n{constructor(t,s,a={}){this.router=t,this.viewportScroller=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof U?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof z&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ao&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,s){this.router.triggerEvent(new Ao(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Ii),E.LFG(La),E.LFG(void 0))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const gu=new E.OlP("ROUTER_CONFIGURATION"),Y_=new E.OlP("ROUTER_FORROOT_GUARD"),_p=[Ge,{provide:Qd,useClass:Yf},{provide:Ii,useFactory:function(n,e,t,s,a,l,p,_={},I,A){const M=new Ii(null,n,e,t,s,a,l,xo(p));return I&&(M.urlHandlingStrategy=I),A&&(M.routeReuseStrategy=A),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(_,M),_.enableTracing&&M.events.subscribe(O=>{var K,Q;null===(K=console.group)||void 0===K||K.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(Q=console.groupEnd)||void 0===Q||Q.call(console)}),M},deps:[Qd,Rc,Ge,E.zs3,E.v3s,E.Sil,vh,gu,[class{},new E.FiY],[class{},new E.FiY]]},Rc,{provide:Ic,useFactory:function(n){return n.routerState.root},deps:[Ii]},{provide:E.v3s,useClass:E.EAV},yp,Z_,class{preload(e,t){return t().pipe(Bs(()=>(0,Qe.of)(null)))}},{provide:gu,useValue:{enableTracing:!1}}];function WD(){return new E.PXZ("Router",Ii)}let J_=(()=>{class n{constructor(t,s){}static forRoot(t,s){return{ngModule:n,providers:[_p,xm(t),{provide:Y_,useFactory:Aw,deps:[[Ii,new E.FiY,new E.tp0]]},{provide:gu,useValue:s||{}},{provide:q,useFactory:zD,deps:[ue,[new E.tBr(fe),new E.FiY],gu]},{provide:wh,useFactory:qD,deps:[Ii,La,gu]},{provide:z_,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:Z_},{provide:E.PXZ,multi:!0,useFactory:WD},[X_,{provide:E.ip1,multi:!0,useFactory:Nw,deps:[X_]},{provide:Mw,useFactory:KD,deps:[X_]},{provide:E.tb,multi:!0,useExisting:Mw}]]}}static forChild(t){return{ngModule:n,providers:[xm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Y_,8),E.LFG(Ii,8))},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({}),n})();function qD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new wh(n,e,t)}function zD(n,e,t={}){return t.useHash?new Se(n,e):new he(n,e)}function Aw(n){return"guarded"}function xm(n){return[{provide:E.deG,multi:!0,useValue:n},{provide:vh,multi:!0,useValue:n}]}let X_=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new hs.xQ}appInitializer(){return this.injector.get(F,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const a=new Promise(_=>s=_),l=this.injector.get(Ii),p=this.injector.get(gu);return"disabled"===p.initialNavigation?(l.setUpLocationChangeListener(),s(!0)):"enabled"===p.initialNavigation||"enabledBlocking"===p.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,Qe.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),l.initialNavigation()):s(!0),a})}bootstrapListener(t){const s=this.injector.get(gu),a=this.injector.get(yp),l=this.injector.get(wh),p=this.injector.get(Ii),_=this.injector.get(E.z2F);t===_.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&p.initialNavigation(),a.setUpPreloading(),l.init(),p.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(E.zs3))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();function Nw(n){return n.appInitializer.bind(n)}function KD(n){return n.bootstrapListener.bind(n)}const Mw=new E.OlP("Router Initializer");var Pw=L(3637),$r=L(5236);function ev(){return n=>n.lift(new ZD)}class ZD{call(e,t){return t.subscribe(new YD(e))}}class YD extends tn.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class QD{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new JD(e,this.compare,this.keySelector))}}class JD extends tn.L{constructor(e,t,s){super(e),this.keySelector=s,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:a}=this;t=a?a(e):e}catch(a){return this.destination.error(a)}let s=!1;if(this.hasKey)try{const{compare:a}=this;s=a(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=t,this.destination.next(e))}}var He,Oo=L(8939),kw=(L(941),L(3394)),me=L(8239),_a=L(8026),$i=L(3910),mu=L(5422),Nt=L(3854),tv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Hr={},Rm=Rm||{},ct=tv||self;function nv(){}function Nm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Mm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ih="closure_uid_"+(1e9*Math.random()>>>0),Pm=0;function rv(n,e,t){return n.call.apply(n.bind,arguments)}function _x(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Gr(n,e,t){return(Gr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rv:_x).apply(null,arguments)}function vp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function li(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(s,a,l){for(var p=Array(arguments.length-2),_=2;_<arguments.length;_++)p[_-2]=arguments[_];return e.prototype[a].apply(s,p)}}function Nc(){this.s=this.s,this.o=this.o}var Fw={};Nc.prototype.s=!1,Nc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Ih)&&n[Ih]||(n[Ih]=++Pm)}(this);delete Fw[n]}},Nc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const iv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Lw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const s=n.length,a="string"==typeof n?n.split(""):n;for(let l=0;l<s;l++)l in a&&e.call(t,a[l],l,n)};function XD(n){return Array.prototype.concat.apply([],arguments)}function Vw(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function ov(n){return/^[\s\xa0]*$/.test(n)}var Gi,eT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Hi(n,e){return-1!=n.indexOf(e)}function Uw(n,e){return n<e?-1:n>e?1:0}e:{var tT=ct.navigator;if(tT){var nT=tT.userAgent;if(nT){Gi=nT;break e}}Gi=""}function jw(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function rT(n){const e={};for(const t in n)e[t]=n[t];return e}var _u="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Om(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let l=0;l<_u.length;l++)t=_u[l],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function av(n){return av[" "](n),n}av[" "]=nv;var lv,n,uv=Hi(Gi,"Opera"),xl=Hi(Gi,"Trident")||Hi(Gi,"MSIE"),km=Hi(Gi,"Edge"),cv=km||xl,vu=Hi(Gi,"Gecko")&&!(Hi(Gi.toLowerCase(),"webkit")&&!Hi(Gi,"Edge"))&&!(Hi(Gi,"Trident")||Hi(Gi,"MSIE"))&&!Hi(Gi,"Edge"),$w=Hi(Gi.toLowerCase(),"webkit")&&!Hi(Gi,"Edge");function Hw(){var n=ct.document;return n?n.documentMode:void 0}e:{var Ep="",dv=(n=Gi,vu?/rv:([^\);]+)(\)|;)/.exec(n):km?/Edge\/([\d\.]+)/.exec(n):xl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$w?/WebKit\/(\S+)/.exec(n):uv?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(dv&&(Ep=dv?dv[1]:""),xl){var Fm=Hw();if(null!=Fm&&Fm>parseFloat(Ep)){lv=String(Fm);break e}}lv=Ep}var iT={};function sT(){return e=iT,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=eT(String(lv)).split("."),t=eT("9").split("."),s=Math.max(e.length,t.length);for(let p=0;0==n&&p<s;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=Uw(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||Uw(0==a[2].length,0==l[2].length)||Uw(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n}();var e}var hv=ct.document&&xl&&(Hw()||parseInt(lv,10))||void 0,bh=function(){if(!ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ct.addEventListener("test",nv,e),ct.removeEventListener("test",nv,e)}catch(t){}return n}();function ur(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function va(n,e){if(ur.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(vu){e:{try{av(e.nodeName);var a=!0;break e}catch(l){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:oT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&va.Z.h.call(this)}}ur.prototype.h=function(){this.defaultPrevented=!0},li(va,ur);var oT={2:"touch",3:"pen",4:"mouse"};va.prototype.h=function(){va.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ch="closure_listenable_"+(1e6*Math.random()|0),Gw=0;function fv(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=a,this.key=++Gw,this.ca=this.fa=!1}function Dh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function wp(n){this.src=n,this.g={},this.h=0}function Th(n,e){var t=e.type;if(t in n.g){var l,s=n.g[t],a=iv(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(Dh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function pv(n,e,t,s){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==s)return a}return-1}wp.prototype.add=function(n,e,t,s,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var p=pv(n,e,s,a);return-1<p?(e=n[p],t||(e.fa=!1)):((e=new fv(e,this.src,l,!!s,a)).fa=t,n.push(e)),e};var Lm="closure_lm_"+(1e6*Math.random()|0),Ww={};function gv(n,e,t,s,a){if(s&&s.once)return yv(n,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)gv(n,e[l],t,s,a);return null}return t=Kw(t),n&&n[Ch]?n.N(e,t,Mm(s)?!!s.capture:!!s,a):mv(n,e,t,!1,s,a)}function mv(n,e,t,s,a,l){if(!e)throw Error("Invalid event type");var p=Mm(a)?!!a.capture:!!a,_=vv(n);if(_||(n[Lm]=_=new wp(n)),(t=_.add(e,t,s,p,l)).proxy)return t;if(s=function(){var e=uT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)bh||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(Wi(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function yv(n,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)yv(n,e[l],t,s,a);return null}return t=Kw(t),n&&n[Ch]?n.O(e,t,Mm(s)?!!s.capture:!!s,a):mv(n,e,t,!0,s,a)}function qw(n,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)qw(n,e[l],t,s,a);else s=Mm(s)?!!s.capture:!!s,t=Kw(t),n&&n[Ch]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=pv(l=n.g[e],t,s,a))&&(Dh(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=vv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=pv(e,t,s,a)),(t=-1<n?e[n]:null)&&_v(t))}function _v(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ch])Th(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(Wi(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=vv(e))?(Th(t,n),0==t.h&&(t.src=null,e[Lm]=null)):Dh(n)}}}function Wi(n){return n in Ww?Ww[n]:Ww[n]="on"+n}function uT(n,e){if(n.ca)n=!0;else{e=new va(e,this);var t=n.listener,s=n.ia||n.src;n.fa&&_v(n),n=t.call(s,e)}return n}function vv(n){return(n=n[Lm])instanceof wp?n:null}var zw="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kw(n){return"function"==typeof n?n:(n[zw]||(n[zw]=function(e){return n.handleEvent(e)}),n[zw])}function _r(){Nc.call(this),this.i=new wp(this),this.P=this,this.I=null}function di(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new ur(e,n);else if(e instanceof ur)e.target=e.target||n;else{var a=e;Om(e=new ur(s,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=Vm(p,s,!0,e)&&a}if(a=Vm(p=e.g=n,s,!0,e)&&a,a=Vm(p,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=Vm(p=e.g=t[l],s,!1,e)&&a}function Vm(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.ca&&p.capture==t){var _=p.listener,I=p.ia||p.src;p.fa&&Th(n.i,p),a=!1!==_.call(I,s)&&a}}return a&&!s.defaultPrevented}li(_r,Nc),_r.prototype[Ch]=!0,_r.prototype.removeEventListener=function(n,e,t,s){qw(this,n,e,t,s)},_r.prototype.M=function(){if(_r.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)Dh(t[s]);delete n.g[e],n.h--}}this.I=null},_r.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},_r.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var Ip=ct.JSON.stringify;function Zw(){var n=Iv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Um,Yw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new lT,n=>n.reset());class lT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Qw(n){ct.setTimeout(()=>{throw n},0)}function Ev(n,e){Um||function(){var n=ct.Promise.resolve(void 0);Um=function(){n.then(Jw)}}(),wv||(Um(),wv=!0),Iv.add(n,e)}var wv=!1,Iv=new class{constructor(){this.h=this.g=null}add(e,t){const s=Yw.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Jw(){for(var n;n=Zw();){try{n.h.call(n.g)}catch(t){Qw(t)}var e=Yw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}wv=!1}function jm(n,e){_r.call(this),this.h=n||1,this.g=e||ct,this.j=Gr(this.kb,this),this.l=Date.now()}function Ks(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function bp(n,e,t){if("function"==typeof n)t&&(n=Gr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gr(n.handleEvent,n)}return 2147483647<Number(e)?-1:ct.setTimeout(n,e||0)}function Xw(n){n.g=bp(()=>{n.g=null,n.i&&(n.i=!1,Xw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}li(jm,_r),(He=jm.prototype).da=!1,He.S=null,He.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),di(this,"tick"),this.da&&(Ks(this),this.start()))}},He.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},He.M=function(){jm.Z.M.call(this),Ks(this),delete this.g};class hT extends Nc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Xw(this)}M(){super.M(),this.g&&(ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bm(n){Nc.call(this),this.h=n,this.g={}}li(Bm,Nc);var bv=[];function eI(n,e,t,s){Array.isArray(t)||(t&&(bv[0]=t.toString()),t=bv);for(var a=0;a<t.length;a++){var l=gv(e,t[a],s||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function tI(n){jw(n.g,function(e,t){this.g.hasOwnProperty(t)&&_v(e)},n),n.g={}}function $m(){this.g=!0}function Sh(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return Ip(t)}catch(_){return e}}(n,t)+(s?" "+s:"")})}Bm.prototype.M=function(){Bm.Z.M.call(this),tI(this)},Bm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$m.prototype.Aa=function(){this.g=!1},$m.prototype.info=function(){};var Ml={},Gm=null;function Ah(){return Gm=Gm||new _r}function Tv(n){ur.call(this,Ml.Ma,n)}function Cp(n){const e=Ah();di(e,new Tv(e,n))}function nI(n,e){ur.call(this,Ml.STAT_EVENT,n),this.stat=e}function Wr(n){const e=Ah();di(e,new nI(e,n))}function pT(n,e){ur.call(this,Ml.Na,n),this.size=e}function Dp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ct.setTimeout(function(){n()},e)}Ml.Ma="serverreachability",li(Tv,ur),Ml.STAT_EVENT="statevent",li(nI,ur),Ml.Na="timingevent",li(pT,ur);var Tp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Sv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Wm(){}function xv(){}Wm.prototype.h=null;var Nv,ys={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function xh(){ur.call(this,"d")}function Rv(){ur.call(this,"c")}function Mv(){}function Ea(n,e,t,s){this.l=n,this.j=e,this.m=t,this.X=s||1,this.V=new Bm(this),this.P=Sp,this.W=new jm(n=cv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Pv}function Pv(){this.i=null,this.g="",this.h=!1}li(xh,ur),li(Rv,ur),li(Mv,Wm),Mv.prototype.g=function(){return new XMLHttpRequest},Mv.prototype.i=function(){return{}},Nv=new Mv;var Sp=45e3,Pl={},qm={};function Ap(n,e,t){n.K=1,n.v=Ph(Eu(e)),n.s=t,n.U=!0,Ov(n,null)}function Ov(n,e){n.F=Date.now(),Ol(n),n.A=Eu(n.v);var t=n.A,s=n.X;Array.isArray(s)||(s=[String(s)]),$v(t.h,"t",s),n.C=0,t=n.l.H,n.h=new Pv,n.g=Hl(n.l,t?e:null,!n.s),0<n.O&&(n.L=new hT(Gr(n.Ia,n,n.g),n.O)),eI(n.V,n.g,"readystatechange",n.gb),e=n.H?rT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Cp(1),function(n,e,t,s,a,l){n.info(function(){if(n.g)if(l)for(var p="",_=l.split("&"),I=0;I<_.length;I++){var A=_[I].split("=");if(1<A.length){var M=A[0];A=A[1];var O=M.split("_");p=2<=O.length&&"type"==O[1]?p+(M+"=")+A+"&":p+(M+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.X,n.s)}function rI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function kv(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=gT(n,t),a==qm){4==e&&(n.o=4,Wr(14),s=!1),Sh(n.j,n.m,null,"[Incomplete Response]");break}if(a==Pl){n.o=4,Wr(15),Sh(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}Sh(n.j,n.m,a,null),Km(n,a)}rI(n)&&a!=qm&&a!=Pl&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Wr(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Pc(e),e.L=!0,Wr(11))):(Sh(n.j,n.m,t,"[Invalid Chunked Response]"),Zs(n),Rh(n))}function gT(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?qm:(t=Number(e.substring(t,s)),isNaN(t)?Pl:(s+=1)+t>e.length?qm:(e=e.substr(s,t),n.C=s+t,e))}function Ol(n){n.Y=Date.now()+n.P,iI(n,n.P)}function iI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Dp(Gr(n.eb,n),e)}function zm(n){n.B&&(ct.clearTimeout(n.B),n.B=null)}function Rh(n){0==n.l.G||n.I||Ul(n.l,n)}function Zs(n){zm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ks(n.W),tI(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Km(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Zm(t.i,n)))if(t.I=n.N,!n.J&&Zm(t.i,n)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(A){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=Dp(Gr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;bu(t),ty(t)}Fp(t),Wr(18)}if(1>=CT(t.i)&&t.ka){try{t.ka()}catch(A){}t.ka=void 0}}else Qs(t,11)}else if((n.J||t.g==n)&&bu(t),!ov(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let A=a[e];if(t.U=A[0],A=A[1],2==t.G)if("c"==A[0]){t.J=A[1],t.la=A[2];const M=A[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const O=A[4];null!=O&&(t.za=O,t.h.info("SVER="+t.za));const K=A[5];null!=K&&"number"==typeof K&&0<K&&(t.K=s=1.5*K,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const Q=n.g;if(Q){const ye=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ye){var l=s.i;!l.g&&(Hi(ye,"spdy")||Hi(ye,"quic")||Hi(ye,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Gv(l,l.h),l.h=null))}if(s.D){const ke=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;ke&&(s.sa=ke,qt(s.F,s.D,ke))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var p=n;if((s=t).oa=$l(s,s.H?s.la:null,s.W),p.J){lI(s.i,p);var _=p,I=s.K;I&&_.setTimeout(I),_.B&&(zm(_),Ol(_)),s.g=p}else vs(s);0<t.l.length&&_s(t)}else"stop"!=A[0]&&"close"!=A[0]||Qs(t,7);else 3==t.G&&("stop"==A[0]||"close"==A[0]?"stop"==A[0]?Qs(t,7):Ll(t):"noop"!=A[0]&&t.j&&t.j.wa(A),t.A=0)}Cp(4)}catch(A){}}function Fv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Nm(n)||"string"==typeof n)Lw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Nm(n)||"string"==typeof n){t=[];for(var s=n.length,a=0;a<s;a++)t.push(a)}else for(a in t=[],s=0,n)t[s++]=a;a=(s=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Nm(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n)).length;for(var l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],n)}}function ko(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(n)if(n instanceof ko)for(t=n.T(),s=0;s<t.length;s++)this.set(t[s],n.get(t[s]));else for(s in n)this.set(s,n[s])}function Lv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var s=n.g[e];kl(n.h,s)&&(n.g[t++]=s),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)kl(a,s=n.g[e])||(n.g[t++]=s,a[s]=1),e++;n.g.length=t}}function kl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(He=Ea.prototype).setTimeout=function(n){this.P=n},He.gb=function(n){n=n.target;const e=this.L;e&&3==Iu(n)?e.l():this.Ia(n)},He.Ia=function(n){try{if(n==this.g)e:{const M=Iu(this.g);var e=this.g.Da();const O=this.g.ba();if(!(3>M)&&(3!=M||cv||this.g&&(this.h.h||this.g.ga()||wI(this.g)))){this.I||4!=M||7==e||Cp(8==e||0>=O?3:2),zm(this);var t=this.g.ba();this.N=t;t:if(rI(this)){var s=wI(this.g);n="";var a=s.length,l=4==Iu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Zs(this),Rh(this);var p="";break t}this.h.i=new ct.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.ga();if(this.i=200==t,function(n,e,t,s,a,l,p){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var _,I=this.g;if((_=I.g?I.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ov(_)){var A=_;break t}}A=null}if(!(t=A)){this.i=!1,this.o=3,Wr(12),Zs(this),Rh(this);break e}Sh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Km(this,t)}this.U?(kv(this,M,p),cv&&this.i&&3==M&&(eI(this.V,this.W,"tick",this.fb),this.W.start())):(Sh(this.j,this.m,p,null),Km(this,p)),4==M&&Zs(this),this.i&&!this.I&&(4==M?Ul(this.l,this):(this.i=!1,Ol(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Wr(12)):(this.o=0,Wr(13)),Zs(this),Rh(this)}}}catch(M){}},He.fb=function(){if(this.g){var n=Iu(this.g),e=this.g.ga();this.C<e.length&&(zm(this),kv(this,n,e),this.i&&4!=n&&Ol(this))}},He.cancel=function(){this.I=!0,Zs(this)},He.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Cp(3),Wr(17)),Zs(this),this.o=2,Rh(this)):iI(this,this.Y-n)},(He=ko.prototype).R=function(){Lv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},He.T=function(){return Lv(this),this.g.concat()},He.get=function(n,e){return kl(this.h,n)?this.h[n]:e},He.set=function(n,e){kl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},He.forEach=function(n,e){for(var t=this.T(),s=0;s<t.length;s++){var a=t[s],l=this.get(a);n.call(e,l,a,this)}};var sI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nh(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Nh){this.g=void 0!==e?e:n.g,xp(this,n.j),this.s=n.s,an(this,n.i),Mh(this,n.m),this.l=n.l,e=n.h;var t=new wu;t.i=e.i,e.g&&(t.g=new ko(e.g),t.h=e.h),_T(this,t),this.o=n.o}else n&&(t=String(n).match(sI))?(this.g=!!e,xp(this,t[1]||"",!0),this.s=Rp(t[2]||""),an(this,t[3]||"",!0),Mh(this,t[4]),this.l=Rp(t[5]||"",!0),_T(this,t[6]||"",!0),this.o=Rp(t[7]||"")):(this.g=!!e,this.h=new wu(null,this.g))}function Eu(n){return new Nh(n)}function xp(n,e,t){n.j=t?Rp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function an(n,e,t){n.i=t?Rp(e,!0):e}function Mh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function _T(n,e,t){e instanceof wu?(n.h=e,function(n,e){e&&!n.j&&(wa(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(jv(this,s),$v(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Np(e,vT)),n.h=new wu(e,n.g))}function qt(n,e,t){n.h.set(e,t)}function Ph(n){return qt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Rp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Np(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,oI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function oI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Nh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Np(e,Uv,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Np(e,Uv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Np(t,"/"==t.charAt(0)?uI:aI,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Np(t,ET)),n.join("")};var Uv=/[#\/\?@]/g,aI=/[#\?:]/g,uI=/[#\?]/g,vT=/[#\?@]/g,ET=/#/g;function wu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function wa(n){n.g||(n.g=new ko,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var l=n[t].substring(0,s);a=n[t].substring(s+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function jv(n,e){wa(n),e=Fl(n,e),kl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,kl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Lv(n)))}function Bv(n,e){return wa(n),e=Fl(n,e),kl(n.g.h,e)}function $v(n,e,t){jv(n,e),0<t.length&&(n.i=null,n.g.set(Fl(n,e),Vw(t)),n.h+=t.length)}function Fl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function cI(n){this.l=n||bT,n=ct.PerformanceNavigationTiming?0<(n=ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ct.g&&ct.g.Ea&&ct.g.Ea()&&ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(He=wu.prototype).add=function(n,e){wa(this),this.i=null,n=Fl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},He.forEach=function(n,e){wa(this),this.g.forEach(function(t,s){Lw(t,function(a){n.call(e,a,s,this)},this)},this)},He.T=function(){wa(this);for(var n=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var a=n[s],l=0;l<a.length;l++)t.push(e[s]);return t},He.R=function(n){wa(this);var e=[];if("string"==typeof n)Bv(this,n)&&(e=XD(e,this.g.get(Fl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=XD(e,n[t])}return e},He.set=function(n,e){return wa(this),this.i=null,Bv(this,n=Fl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},He.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},He.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],a=encodeURIComponent(String(s));s=this.R(s);for(var l=0;l<s.length;l++){var p=a;""!==s[l]&&(p+="="+encodeURIComponent(String(s[l]))),n.push(p)}}return this.i=n.join("&")};var bT=10;function Hv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function CT(n){return n.h?1:n.g?n.g.size:0}function Zm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Gv(n,e){n.g?n.g.add(e):n.h=e}function lI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function DT(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Vw(n.i)}function dI(){}function Wv(){this.g=new dI}function TT(n,e,t){const s=t||"";try{Fv(n,function(a,l){let p=a;Mm(a)&&(p=Ip(a)),e.push(s+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Mp(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(l){}}function Ym(n){this.l=n.$b||null,this.j=n.ib||!1}function qi(n,e){_r.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=fI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cI.prototype.cancel=function(){if(this.i=DT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},dI.prototype.stringify=function(n){return ct.JSON.stringify(n,void 0)},dI.prototype.parse=function(n){return ct.JSON.parse(n,void 0)},li(Ym,Wm),Ym.prototype.g=function(){return new qi(this.l,this.j)},Ym.prototype.i=function(n){return function(){return n}}({}),li(qi,_r);var fI=0;function ST(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Qm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Oh(n)}function Oh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(He=qi.prototype).open=function(n,e){if(this.readyState!=fI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Oh(this)},He.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},He.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qm(this)),this.readyState=fI},He.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Oh(this)),this.g&&(this.readyState=3,Oh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ST(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},He.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Qm(this):Oh(this),3==this.readyState&&ST(this)}},He.Ua=function(n){this.g&&(this.response=this.responseText=n,Qm(this))},He.Ta=function(n){this.g&&(this.response=n,Qm(this))},He.ha=function(){this.g&&Qm(this)},He.setRequestHeader=function(n,e){this.v.append(n,e)},He.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},He.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var pI=ct.JSON.parse;function Yn(n){_r.call(this),this.headers=new ko,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=gI,this.K=this.L=!1}li(Yn,_r);var gI="",wx=/^https?$/i,mI=["POST","PUT"];function AT(n){return"content-type"==n.toLowerCase()}function Jm(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,_I(n),Xm(n)}function _I(n){n.D||(n.D=!0,di(n,"complete"),di(n,"error"))}function vI(n){if(n.h&&void 0!==Rm&&(!n.C[1]||4!=Iu(n)||2!=n.ba()))if(n.v&&4==Iu(n))bp(n.Fa,0,n);else if(di(n,"readystatechange"),4==Iu(n)){n.h=!1;try{const _=n.ba();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===_){var a=String(n.H).match(sI)[1]||null;if(!a&&ct.self&&ct.self.location){var l=ct.self.location.protocol;a=l.substr(0,l.length-1)}s=!wx.test(a?a.toLowerCase():"")}t=s}if(t)di(n,"complete"),di(n,"success");else{n.m=6;try{var p=2<Iu(n)?n.g.statusText:""}catch(I){p=""}n.j=p+" ["+n.ba()+"]",_I(n)}}finally{Xm(n)}}}function Xm(n,e){if(n.g){EI(n);const t=n.g,s=n.C[0]?nv:null;n.g=null,n.C=null,e||di(n,"ready");try{t.onreadystatechange=s}catch(a){}}}function EI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(ct.clearTimeout(n.A),n.A=null)}function Iu(n){return n.g?n.g.readyState:0}function wI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case gI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Mc(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function(n){let e="";return jw(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):qt(n,e,t))}function kh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ys(n){this.za=0,this.l=[],this.h=new $m,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=kh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=kh("baseRetryDelayMs",5e3,n),this.$a=kh("retryDelaySeedMs",1e4,n),this.Ya=kh("forwardChannelMaxRetries",2,n),this.ra=kh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new cI(n&&n.concurrentRequestLimit),this.Ca=new Wv,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Ll(n){if(II(n),3==n.G){var e=n.V++,t=Eu(n.F);qt(t,"SID",n.J),qt(t,"RID",e),qt(t,"TYPE","terminate"),Fo(n,t),(e=new Ea(n,n.h,e,void 0)).K=2,e.v=Ph(Eu(t)),t=!1,ct.navigator&&ct.navigator.sendBeacon&&(t=ct.navigator.sendBeacon(e.v.toString(),"")),!t&&ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=Hl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ol(e)}Bl(n)}function ty(n){n.g&&(Pc(n),n.g.cancel(),n.g=null)}function II(n){ty(n),n.u&&(ct.clearTimeout(n.u),n.u=null),bu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ct.clearTimeout(n.m),n.m=null)}function Pp(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&_s(n)}function _s(n){Hv(n.i)||n.m||(n.m=!0,Ev(n.Ha,n),n.C=0)}function qr(n,e){var t;t=e?e.m:n.V++;const s=Eu(n.F);qt(s,"SID",n.J),qt(s,"RID",t),qt(s,"AID",n.U),Fo(n,s),n.o&&n.s&&Mc(s,n.o,n.s),t=new Ea(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=kp(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Gv(n.i,t),Ap(t,s,e)}function Fo(n,e){n.j&&Fv({},function(t,s){qt(e,s,t)})}function kp(n,e,t){t=Math.min(n.l.length,t);var s=n.j?Gr(n.j.Oa,n.j,n):null;e:{var a=n.l;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let _=!0;for(let I=0;I<t;I++){let A=a[I].h;const M=a[I].g;if(A-=l,0>A)l=Math.max(0,a[I].h-100),_=!1;else try{TT(M,p,"req"+A+"_")}catch(O){s&&s(M)}}if(_){s=p.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,s}function vs(n){n.g||n.u||(n.Y=1,Ev(n.Ga,n),n.A=0)}function Fp(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Dp(Gr(n.Ga,n),jl(n,n.A)),n.A++,0))}function Pc(n){null!=n.B&&(ct.clearTimeout(n.B),n.B=null)}function Vl(n){n.g=new Ea(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Eu(n.oa);qt(e,"RID","rpc"),qt(e,"SID",n.J),qt(e,"CI",n.N?"0":"1"),qt(e,"AID",n.U),Fo(n,e),qt(e,"TYPE","xmlhttp"),n.o&&n.s&&Mc(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Ph(Eu(e)),t.s=null,t.U=!0,Ov(t,n)}function bu(n){null!=n.v&&(ct.clearTimeout(n.v),n.v=null)}function Ul(n,e){var t=null;if(n.g==e){bu(n),Pc(n),n.g=null;var s=2}else{if(!Zm(n.i,e))return;t=e.D,lI(n.i,e),s=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;di(s=Ah(),new pT(s,t,e,a)),_s(n)}else vs(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==s&&function(n,e){return!(CT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Dp(Gr(n.Ha,n,e),jl(n,n.C)),n.C++,0)))}(n,e)||2==s&&Fp(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:Qs(n,5);break;case 4:Qs(n,10);break;case 3:Qs(n,6);break;default:Qs(n,2)}}function jl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Qs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var s=Gr(n.jb,n);t||(t=new Nh("//www.google.com/images/cleardot.gif"),ct.location&&"http"==ct.location.protocol||xp(t,"https"),Ph(t)),function(n,e){const t=new $m;if(ct.Image){const s=new Image;s.onload=vp(Mp,t,s,"TestLoadImage: loaded",!0,e),s.onerror=vp(Mp,t,s,"TestLoadImage: error",!1,e),s.onabort=vp(Mp,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=vp(Mp,t,s,"TestLoadImage: timeout",!1,e),ct.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else Wr(2);n.G=0,n.j&&n.j.va(e),Bl(n),II(n)}function Bl(n){n.G=0,n.I=-1,n.j&&((0!=DT(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Vw(n.l),n.l.length=0),n.j.ua())}function $l(n,e,t){let s=function(n){return n instanceof Nh?Eu(n):new Nh(n,void 0)}(t);if(""!=s.i)e&&an(s,e+"."+s.i),Mh(s,s.m);else{const a=ct.location;s=function(n,e,t,s){var a=new Nh(null,void 0);return n&&xp(a,n),e&&an(a,e),t&&Mh(a,t),s&&(a.l=s),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&jw(n.aa,function(a,l){qt(s,l,a)}),t=n.sa,(e=n.D)&&t&&qt(s,e,t),qt(s,"VER",n.ma),Fo(n,s),s}function Hl(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yn(t&&n.Ba&&!n.qa?new Ym({ib:!0}):n.qa)).L=n.H,e}function qv(){}function Lp(){if(xl&&!(10<=Number(hv)))throw Error("Environmental error: no available transport.")}function zi(n,e){_r.call(this),this.g=new Ys(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ov(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ov(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Gl(this)}function zv(n){xh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Kv(){Rv.call(this),this.status=1}function Gl(n){this.g=n}(He=Yn.prototype).ea=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Nv.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Nv),this.g.onreadystatechange=Gr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Jm(this,l)}n=t||"";const a=new ko(this.headers);s&&Fv(s,function(l,p){a.set(p,l)}),s=function(n){e:{var e=AT;const t=n.length,s="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in s&&e.call(void 0,s[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=ct.FormData&&n instanceof ct.FormData,!(0<=iv(mI,e))||s||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(l,p){this.g.setRequestHeader(p,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{EI(this),0<this.B&&((this.K=function(n){return xl&&sT()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gr(this.pa,this)):this.A=bp(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Jm(this,l)}},He.pa=function(){void 0!==Rm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,di(this,"timeout"),this.abort(8))},He.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,di(this,"complete"),di(this,"abort"),Xm(this))},He.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xm(this,!0)),Yn.Z.M.call(this)},He.Fa=function(){this.s||(this.F||this.v||this.l?vI(this):this.cb())},He.cb=function(){vI(this)},He.ba=function(){try{return 2<Iu(this)?this.g.status:-1}catch(n){return-1}},He.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},He.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),pI(e)}},He.Da=function(){return this.m},He.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(He=Ys.prototype).ma=8,He.G=1,He.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},He.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new Ea(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=rT(l),Om(l,this.P)):l=this.P),null===this.o&&(a.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=kp(this,a,e),qt(t=Eu(this.F),"RID",n),qt(t,"CVER",22),this.D&&qt(t,"X-HTTP-Session-Id",this.D),Fo(this,t),this.o&&l&&Mc(t,this.o,l),Gv(this.i,a),this.Ra&&qt(t,"TYPE","init"),this.ja?(qt(t,"$req",e),qt(t,"SID","null"),a.$=!0,Ap(a,t,null)):Ap(a,t,e),this.G=2}}else 3==this.G&&(n?qr(this,n):0==this.l.length||Hv(this.i)||qr(this))},He.Ga=function(){if(this.u=null,Vl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Dp(Gr(this.bb,this),n)}},He.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Wr(10),ty(this),Vl(this))},He.ab=function(){null!=this.v&&(this.v=null,ty(this),Fp(this),Wr(19))},He.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Wr(2)):(this.h.info("Failed to ping google.com"),Wr(1))},(He=qv.prototype).xa=function(){},He.wa=function(){},He.va=function(){},He.ua=function(){},He.Oa=function(){},Lp.prototype.g=function(n,e){return new zi(n,e)},li(zi,_r),zi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ev(Gr(n.hb,n,e))),Wr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=$l(n,null,n.W),_s(n)},zi.prototype.close=function(){Ll(this.g)},zi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Pp(this.g,e)}else this.v?((e={}).__data__=Ip(n),Pp(this.g,e)):Pp(this.g,n)},zi.prototype.M=function(){this.g.j=null,delete this.j,Ll(this.g),delete this.g,zi.Z.M.call(this)},li(zv,xh),li(Kv,Rv),li(Gl,qv),Gl.prototype.xa=function(){di(this.g,"a")},Gl.prototype.wa=function(n){di(this.g,new zv(n))},Gl.prototype.va=function(n){di(this.g,new Kv(n))},Gl.prototype.ua=function(){di(this.g,"b")},Lp.prototype.createWebChannel=Lp.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,Tp.NO_ERROR=0,Tp.TIMEOUT=8,Tp.HTTP_ERROR=6,Sv.COMPLETE="complete",xv.EventType=ys,ys.OPEN="a",ys.CLOSE="b",ys.ERROR="c",ys.MESSAGE="d",_r.prototype.listen=_r.prototype.N,Yn.prototype.listenOnce=Yn.prototype.O,Yn.prototype.getLastError=Yn.prototype.La,Yn.prototype.getLastErrorCode=Yn.prototype.Da,Yn.prototype.getStatus=Yn.prototype.ba,Yn.prototype.getResponseJson=Yn.prototype.Qa,Yn.prototype.getResponseText=Yn.prototype.ga,Yn.prototype.send=Yn.prototype.ea;var bI=Hr.createWebChannelTransport=function(){return new Lp},CI=Hr.getStatEventTarget=function(){return Ah()},ny=Hr.ErrorCode=Tp,xT=Hr.EventType=Sv,DI=Hr.Event=Ml,TI=Hr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},RT=Hr.FetchXmlHttpFactory=Ym,Vp=Hr.WebChannel=xv,NT=Hr.XhrIo=Yn;const MT="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let Wl="9.6.0";const Oc=new mu.Yd("@firebase/firestore");function ry(){return Oc.logLevel}function Me(n,...e){if(Oc.logLevel<=mu.in.DEBUG){const t=e.map(iy);Oc.debug(`Firestore (${Wl}): ${n}`,...t)}}function vr(n,...e){if(Oc.logLevel<=mu.in.ERROR){const t=e.map(iy);Oc.error(`Firestore (${Wl}): ${n}`,...t)}}function Up(n,...e){if(Oc.logLevel<=mu.in.WARN){const t=e.map(iy);Oc.warn(`Firestore (${Wl}): ${n}`,...t)}}function iy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: `+n;throw vr(e),new Error(e)}function st(n,e){n||Je()}function Fe(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class sy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class OT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bx{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=A=>this.i!==a?(a=this.i,t(A)):Promise.resolve();let p=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Pr,e.enqueueRetryable(()=>l(this.currentUser))};const _=()=>{const A=p;e.enqueueRetryable((0,me.Z)(function*(){yield A.promise,yield l(s.currentUser)}))},I=A=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(A=>I(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?I(A):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Pr)}},0),_()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(st("string"==typeof s.accessToken),new sy(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return st(null===e||"string"==typeof e),new zr(e)}}class Cx{constructor(e,t,s){this.type="FirstParty",this.user=zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class Dx{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Cx(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=a=>{e.enqueueRetryable(()=>{return null!=(l=a).error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`),t(l.token);var l})};const s=a=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?s(a):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(st("string"==typeof t.token),new SI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Es{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.p(s),this.T=s=>t.writeSequenceNumber(s))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Fh(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}Es.I=-1;class xI{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Fh(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function Mt(n,e){return n<e?-1:n>e?1:0}function Lh(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function Yv(n){return n+"\0"}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Qn(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Qn(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Qv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ql(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class jp{constructor(e,t,s){void 0===t?t=0:t>e.length&&Je(),void 0===s?s=e.length-t:s>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===jp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jp?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yt extends jp{construct(e,t,s){return new Yt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ae(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const kT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Or extends jp{construct(e,t,s){return new Or(e,t,s)}static isValidIdentifier(e){return kT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Or(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new Ae(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const _=e[a];if("\\"===_){if(a+1===e.length)throw new Ae(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const I=e[a+1];if("\\"!==I&&"."!==I&&"`"!==I)throw new Ae(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=I,a+=2}else"`"===_?(p=!p,a++):"."!==_||p?(s+=_,a++):(l(),a++)}if(l(),p)throw new Ae(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Or(t)}static emptyPath(){return new Or([])}}class Vh{constructor(e){this.fields=e,e.sort(Or.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lh(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Er{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Er(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Er(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Er.EMPTY_BYTE_STRING=new Er("");const Jv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zl(n){if(st(!!n),"string"==typeof n){let e=0;const t=Jv.exec(n);if(st(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Un(n.seconds),nanos:Un(n.nanos)}}function Un(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Uh(n){return"string"==typeof n?Er.fromBase64String(n):Er.fromUint8Array(n)}function MI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function jh(n){const e=n.mapValue.fields.__previous_value__;return MI(e)?jh(e):e}function Bp(n){const e=zl(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}function Cu(n){return null==n}function Bh(n){return 0===n&&1/n==-1/0}function PI(n){return"number"==typeof n&&Number.isInteger(n)&&!Bh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(Yt.fromString(e))}static fromName(e){return new Ze(Yt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new Yt(e.slice()))}}function Du(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?MI(n)?4:10:Je()}function Lo(n,e){const t=Du(n);if(t!==Du(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bp(n).isEqual(Bp(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=zl(s.timestampValue),p=zl(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Uh(n.bytesValue).isEqual(Uh(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return Un(s.geoPointValue.latitude)===Un(a.geoPointValue.latitude)&&Un(s.geoPointValue.longitude)===Un(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Un(s.integerValue)===Un(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Un(s.doubleValue),p=Un(a.doubleValue);return l===p?Bh(l)===Bh(p):isNaN(l)&&isNaN(p)}return!1}(n,e);case 9:return Lh(n.arrayValue.values||[],e.arrayValue.values||[],Lo);case 10:return function(s,a){const l=s.mapValue.fields||{},p=a.mapValue.fields||{};if(Qv(l)!==Qv(p))return!1;for(const _ in l)if(l.hasOwnProperty(_)&&(void 0===p[_]||!Lo(l[_],p[_])))return!1;return!0}(n,e);default:return Je()}var a}function oy(n,e){return void 0!==(n.values||[]).find(t=>Lo(t,e))}function $h(n,e){const t=Du(n),s=Du(e);if(t!==s)return Mt(t,s);switch(t){case 0:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(a,l){const p=Un(a.integerValue||a.doubleValue),_=Un(l.integerValue||l.doubleValue);return p<_?-1:p>_?1:p===_?0:isNaN(p)?isNaN(_)?0:-1:1}(n,e);case 3:return Xv(n.timestampValue,e.timestampValue);case 4:return Xv(Bp(n),Bp(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(a,l){const p=Uh(a),_=Uh(l);return p.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),_=l.split("/");for(let I=0;I<p.length&&I<_.length;I++){const A=Mt(p[I],_[I]);if(0!==A)return A}return Mt(p.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const p=Mt(Un(a.latitude),Un(l.latitude));return 0!==p?p:Mt(Un(a.longitude),Un(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],_=l.values||[];for(let I=0;I<p.length&&I<_.length;++I){const A=$h(p[I],_[I]);if(A)return A}return Mt(p.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){const p=a.fields||{},_=Object.keys(p),I=l.fields||{},A=Object.keys(I);_.sort(),A.sort();for(let M=0;M<_.length&&M<A.length;++M){const O=Mt(_[M],A[M]);if(0!==O)return O;const K=$h(p[_[M]],I[A[M]]);if(0!==K)return K}return Mt(_.length,A.length)}(n.mapValue,e.mapValue);default:throw Je()}}function Xv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=zl(n),s=zl(e),a=Mt(t.seconds,s.seconds);return 0!==a?a:Mt(t.nanos,s.nanos)}function ay(n){return eE(n)}function eE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=zl(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Uh(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",l=!0;for(const p of s.values||[])l?l=!1:a+=",",a+=eE(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const _ of a)p?p=!1:l+=",",l+=`${_}:${eE(s.fields[_])}`;return l+"}"}(n.mapValue):Je();var e}function uy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $p(n){return!!n&&"integerValue"in n}function cy(n){return!!n&&"arrayValue"in n}function ly(n){return!!n&&"nullValue"in n}function dy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hp(n){return!!n&&"mapValue"in n}function Gp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ql(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Gp(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gp(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Hp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gp(t)}setAll(e){let t=Or.emptyPath(),s={},a=[];e.forEach((p,_)=>{if(!t.isImmediateParentOf(_)){const I=this.getFieldsMap(t);this.applyChanges(I,s,a),s={},a=[],t=_.popLast()}p?s[_.lastSegment()]=Gp(p):a.push(_.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Hp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Hp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ql(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new Kr(Gp(this.value))}}function tE(n){const e=[];return ql(n.fields,(t,s)=>{const a=new Or([t]);if(Hp(s)){const l=tE(s.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new Vh(e)}class hn{constructor(e,t,s,a,l){this.key=e,this.documentType=t,this.version=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new hn(e,0,It.min(),Kr.empty(),0)}static newFoundDocument(e,t,s){return new hn(e,1,t,s,0)}static newNoDocument(e,t){return new hn(e,2,t,Kr.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,Kr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new hn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class FT{constructor(e,t=null,s=[],a=[],l=null,p=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=p,this.endAt=_,this.R=null}}function OI(n,e=null,t=[],s=[],a=null,l=null,p=null){return new FT(n,e,t,s,a,l,p)}function Wp(n){const e=Fe(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>function(n){return n.field.canonicalString()+n.op.toString()+ay(n.value)}(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Cu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Kp(e.startAt)),e.endAt&&(t+="|ub:",t+=Kp(e.endAt)),e.R=t}return e.R}function qp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!wr(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(s=e.filters[a]).op||!t.field.isEqual(s.field)||!Lo(t.value,s.value))return!1;var t,s;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BI(n.startAt,e.startAt)&&BI(n.endAt,e.endAt)}function Hh(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class hi extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,s):new FI(e,t,s):"array-contains"===t?new UI(e,s):"in"===t?new jI(e,s):"not-in"===t?new Tx(e,s):"array-contains-any"===t?new VT(e,s):new hi(e,t,s)}static P(e,t,s){return"in"===t?new LI(e,s):new VI(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v($h(t,this.value)):null!==t&&Du(this.value)===Du(t)&&this.v($h(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class FI extends hi{constructor(e,t,s){super(e,t,s),this.key=Ze.fromName(s.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.v(t)}}class LI extends hi{constructor(e,t){super(e,"in",t),this.keys=nE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class VI extends hi{constructor(e,t){super(e,"not-in",t),this.keys=nE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Ze.fromName(s.referenceValue))}class UI extends hi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cy(t)&&oy(t.arrayValue,this.value)}}class jI extends hi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&oy(this.value.arrayValue,t)}}class Tx extends hi{constructor(e,t){super(e,"not-in",t)}matches(e){if(oy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!oy(this.value.arrayValue,t)}}class VT extends hi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>oy(this.value.arrayValue,s))}}class zp{constructor(e,t){this.position=e,this.before=t}}function Kp(n){return`${n.before?"b":"a"}:${n.position.map(e=>ay(e)).join(",")}`}class Gh{constructor(e,t="asc"){this.field=e,this.dir=t}}function wr(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function rE(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],p=n.position[a];if(s=l.field.isKeyField()?Ze.comparator(Ze.fromName(p.referenceValue),t.key):$h(p,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return n.before?s<=0:s<0}function BI(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lo(n.position[t],e.position[t]))return!1;return!0}class Tu{constructor(e,t=null,s=[],a=[],l=null,p="F",_=null,I=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=p,this.startAt=_,this.endAt=I,this.S=null,this.D=null}}function iE(n,e,t,s,a,l,p,_){return new Tu(n,e,t,s,a,l,p,_)}function Wh(n){return new Tu(n)}function Zp(n){return!Cu(n.limit)&&"F"===n.limitType}function Yp(n){return!Cu(n.limit)&&"L"===n.limitType}function kc(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function sE(n){for(const e of n.filters)if(e.V())return e.field;return null}function oE(n){return null!==n.collectionGroup}function Kl(n){const e=Fe(n);if(null===e.S){e.S=[];const t=sE(e),s=kc(e);if(null!==t&&null===s)t.isKeyField()||e.S.push(new Gh(t)),e.S.push(new Gh(Or.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.S.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Gh(Or.keyField(),l))}}}return e.S}function Js(n){const e=Fe(n);if(!e.D)if("F"===e.limitType)e.D=OI(e.path,e.collectionGroup,Kl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Kl(e))t.push(new Gh(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new zp(e.endAt.position,!e.endAt.before):null,a=e.startAt?new zp(e.startAt.position,!e.startAt.before):null;e.D=OI(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.D}function aE(n,e,t){return new Tu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hy(n,e){return qp(Js(n),Js(e))&&n.limitType===e.limitType}function uE(n){return`${Wp(Js(n))}|lt:${n.limitType}`}function fy(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${ay(s.value)}`;var s}).join(", ")}]`),Cu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(e+=", startAt: "+Kp(n.startAt)),n.endAt&&(e+=", endAt: "+Kp(n.endAt)),`Target(${e})`}(Js(n))}; limitType=${n.limitType})`}function Ki(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ze.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!rE(t.startAt,Kl(t),s)||t.endAt&&rE(t.endAt,Kl(t),s)));var t,s}function $I(n){return(e,t)=>{let s=!1;for(const a of Kl(n)){const l=UT(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function UT(n,e,t){const s=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(a,l,p){const _=l.data.field(a),I=p.data.field(a);return null!==_&&null!==I?$h(_,I):Je()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Je()}}function Vo(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bh(e)?"-0":e}}function Xs(n){return{integerValue:""+n}}function eo(n,e){return PI(e)?Xs(e):Vo(n,e)}class Qp{constructor(){this._=void 0}}function HI(n,e,t){return n instanceof qh?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof Zl?py(n,e):n instanceof Uo?WI(n,e):function(s,a){const l=GI(s,a),p=qI(l)+qI(s.N);return $p(l)&&$p(s.N)?Xs(p):Vo(s.k,p)}(n,e)}function jT(n,e,t){return n instanceof Zl?py(n,e):n instanceof Uo?WI(n,e):t}function GI(n,e){return n instanceof Yl?$p(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class qh extends Qp{}class Zl extends Qp{constructor(e){super(),this.elements=e}}function py(n,e){const t=cE(e);for(const s of n.elements)t.some(a=>Lo(a,s))||t.push(s);return{arrayValue:{values:t}}}class Uo extends Qp{constructor(e){super(),this.elements=e}}function WI(n,e){let t=cE(e);for(const s of n.elements)t=t.filter(a=>!Lo(a,s));return{arrayValue:{values:t}}}class Yl extends Qp{constructor(e,t){super(),this.k=e,this.N=t}}function qI(n){return Un(n.integerValue||n.doubleValue)}function cE(n){return cy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zh{constructor(e,t){this.field=e,this.transform=t}}class BT{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Xp{}function my(n,e,t){n instanceof Kh?function(s,a,l){const p=s.value.clone(),_=fE(s.fieldTransforms,a,l.transformResults);p.setAll(_),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):n instanceof Su?function(s,a,l){if(!Jp(s.precondition,a))return void a.convertToUnknownDocument(l.version);const p=fE(s.fieldTransforms,a,l.transformResults),_=a.data;_.setAll(hE(s)),_.setAll(p),a.convertToFoundDocument(l.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function yy(n,e,t){var a;n instanceof Kh?function(s,a,l){if(!Jp(s.precondition,a))return;const p=s.value.clone(),_=KI(s.fieldTransforms,l,a);p.setAll(_),a.convertToFoundDocument(dE(a),p).setHasLocalMutations()}(n,e,t):n instanceof Su?function(s,a,l){if(!Jp(s.precondition,a))return;const p=KI(s.fieldTransforms,l,a),_=a.data;_.setAll(hE(s)),_.setAll(p),a.convertToFoundDocument(dE(a),_).setHasLocalMutations()}(n,e,t):Jp(n.precondition,a=e)&&a.convertToNoDocument(It.min())}function zI(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=GI(s.transform,a||null);null!=l&&(null==t&&(t=Kr.empty()),t.set(s.field,l))}return t||null}function lE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&Lh(t,s,(a,l)=>function(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof Zl&&s instanceof Zl||t instanceof Uo&&s instanceof Uo?Lh(t.elements,s.elements,Lo):t instanceof Yl&&s instanceof Yl?Lo(t.N,s.N):t instanceof qh&&s instanceof qh);var t,s}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}function dE(n){return n.isFoundDocument()?n.version:It.min()}class Kh extends Xp{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}}class Su extends Xp{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}}function hE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function fE(n,e,t){const s=new Map;st(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],p=l.transform,_=e.data.field(l.field);s.set(l.field,jT(p,_,t[a]))}return s}function KI(n,e,t){const s=new Map;for(const a of n){const l=a.transform,p=t.data.field(a.field);s.set(a.field,HI(l,p,e))}return s}class eg extends Xp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class pE extends Xp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class $T{constructor(e){this.count=e}}var cr,$t;function ZI(n){switch(n){default:return Je();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function YI(n){if(void 0===n)return vr("GRPC error has no .code"),le.UNKNOWN;switch(n){case cr.OK:return le.OK;case cr.CANCELLED:return le.CANCELLED;case cr.UNKNOWN:return le.UNKNOWN;case cr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case cr.INTERNAL:return le.INTERNAL;case cr.UNAVAILABLE:return le.UNAVAILABLE;case cr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case cr.NOT_FOUND:return le.NOT_FOUND;case cr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case cr.ABORTED:return le.ABORTED;case cr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case cr.DATA_LOSS:return le.DATA_LOSS;default:return Je()}}($t=cr||(cr={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";class Ir{constructor(e,t){this.comparator=e,this.root=t||Zr.EMPTY}insert(e,t){return new Ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new Ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _y(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _y(this.root,e,this.comparator,!1)}getReverseIterator(){return new _y(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _y(this.root,e,this.comparator,!0)}}class _y{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zr{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=null!=s?s:Zr.RED,this.left=null!=a?a:Zr.EMPTY,this.right=null!=l?l:Zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Zr(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Zr.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1,Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(n,e,t,s,a){return this}insert(n,e,t){return new Zr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new Ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QI(this.data.getIterator())}getIteratorFrom(e){return new QI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class QI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const HT=new Ir(Ze.comparator);function to(){return HT}const GT=new Ir(Ze.comparator);function gE(){return GT}const WT=new Ir(Ze.comparator);function mE(){return WT}const JI=new jn(Ze.comparator);function Xt(...n){let e=JI;for(const t of n)e=e.add(t);return e}const XI=new jn(Mt);function tg(){return XI}class Zh{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,Yh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Zh(It.min(),s,tg(),to(),Xt())}}class Yh{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Yh(Er.EMPTY_BYTE_STRING,t,Xt(),Xt(),Xt())}}class ng{constructor(e,t,s,a){this.$=e,this.removedTargetIds=t,this.key=s,this.F=a}}class yE{constructor(e,t){this.targetId=e,this.O=t}}class vy{constructor(e,t,s=Er.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class _E{constructor(){this.M=0,this.L=tb(),this.B=Er.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=Xt(),t=Xt(),s=Xt();return this.L.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Je()}}),new Yh(this.B,this.U,e,t,s)}H(){this.q=!1,this.L=tb()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class Ql{constructor(e){this.et=e,this.nt=new Map,this.st=to(),this.it=eb(),this.rt=new jn(Mt)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const s=this.ht(t);switch(e.state){case 0:this.lt(t)&&s.W(e.resumeToken);break;case 1:s.Z(),s.K||s.H(),s.W(e.resumeToken);break;case 2:s.Z(),s.K||this.removeTarget(t);break;case 3:this.lt(t)&&(s.tt(),s.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),s.W(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((s,a)=>{this.lt(a)&&t(a)})}dt(e){const t=e.targetId,s=e.O.count,a=this.wt(t);if(a){const l=a.target;if(Hh(l))if(0===s){const p=new Ze(l.path);this.ct(t,p,hn.newNoDocument(p,It.min()))}else st(1===s);else this._t(t)!==s&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((l,p)=>{const _=this.wt(p);if(_){if(l.current&&Hh(_.target)){const I=new Ze(_.target.path);null!==this.st.get(I)||this.yt(p,I)||this.ct(p,I,hn.newNoDocument(I,e))}l.j&&(t.set(p,l.G()),l.H())}});let s=Xt();this.it.forEach((l,p)=>{let _=!0;p.forEachWhile(I=>{const A=this.wt(I);return!A||2===A.purpose||(_=!1,!1)}),_&&(s=s.add(l))});const a=new Zh(e,t,this.rt,this.st,s);return this.st=to(),this.it=eb(),this.rt=new jn(Mt),a}at(e,t){if(!this.lt(e))return;const s=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,s),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,s){if(!this.lt(e))return;const a=this.ht(e);this.yt(e,t)?a.J(t,1):a.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),s&&(this.st=this.st.insert(t,s))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new _E,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new jn(Mt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Me("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new _E),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function eb(){return new Ir(Ze.comparator)}function tb(){return new Ir(Ze.comparator)}const Qh={asc:"ASCENDING",desc:"DESCENDING"},Sx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class vE{constructor(e,t){this.databaseId=e,this.C=t}}function Ey(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EE(n,e){return n.C?e.toBase64():e.toUint8Array()}function nb(n,e){return Ey(n,e.toTimestamp())}function Yr(n){return st(!!n),It.fromTimestamp(function(e){const t=zl(e);return new Qn(t.seconds,t.nanos)}(n))}function tt(n,e){return(t=n,new Yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function rb(n){const e=Yt.fromString(n);return st(ef(e)),e}function rg(n,e){return tt(n.databaseId,e.path)}function Ia(n,e){const t=rb(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(ig(t))}function Jh(n,e){return tt(n.databaseId,e)}function ib(n){const e=rb(n);return 4===e.length?Yt.emptyPath():ig(e)}function Fc(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ig(n){return st(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function On(n,e,t){return{name:rg(n,e),fields:t.value.mapValue.fields}}function qT(n,e,t){const s=Ia(n,e.name),a=Yr(e.updateTime),l=new Kr({mapValue:{fields:e.fields}}),p=hn.newFoundDocument(s,a,l);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function wy(n,e){let t;if(e instanceof Kh)t={update:On(n,e.key,e.value)};else if(e instanceof eg)t={delete:rg(n,e.key)};else if(e instanceof Su)t={update:On(n,e.key,e.data),updateMask:YT(e.fieldMask)};else{if(!(e instanceof pE))return Je();t={verify:rg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const p=l.transform;if(p instanceof qh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Zl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Uo)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Yl)return{fieldPath:l.field.canonicalString(),increment:p.N};throw Je()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:nb(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Je()),t;var a}function IE(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Jn.updateTime(Yr(a.updateTime)):void 0!==a.exists?Jn.exists(a.exists):Jn.none():Jn.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let _=null;"setToServerValue"in p?(st("REQUEST_TIME"===p.setToServerValue),_=new qh):"appendMissingElements"in p?_=new Zl(p.appendMissingElements.values||[]):"removeAllFromArray"in p?_=new Uo(p.removeAllFromArray.values||[]):"increment"in p?_=new Yl(l,p.increment):Je();const I=Or.fromServerFormat(p.fieldPath);return new zh(I,_)}(n,a)):[];var a;if(e.update){const a=Ia(n,e.update.name),l=new Kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new Vh((e.updateMask.fieldPaths||[]).map(A=>Or.fromServerFormat(A)));return new Su(a,l,p,t,s)}return new Kh(a,l,t,s)}if(e.delete){const a=Ia(n,e.delete);return new eg(a,t)}if(e.verify){const a=Ia(n,e.verify);return new pE(a,t)}return Je()}function bE(n,e){return{documents:[Jh(n,e.path)]}}function CE(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Jh(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Jh(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(_){if(0===_.length)return;const I=_.map(A=>function(M){if("=="===M.op){if(dy(M.value))return{unaryFilter:{field:Au(M.field),op:"IS_NAN"}};if(ly(M.value))return{unaryFilter:{field:Au(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(dy(M.value))return{unaryFilter:{field:Au(M.field),op:"IS_NOT_NAN"}};if(ly(M.value))return{unaryFilter:{field:Au(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Au(M.field),op:ZT(M.op),value:M.value}}}(A));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(_){if(0!==_.length)return _.map(I=>{return{field:Au((A=I).field),direction:KT(A.dir)};var A})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=(I=e.limit,n.C||Cu(I)?I:{value:I});var I;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=Xh(e.startAt)),e.endAt&&(t.structuredQuery.endAt=Xh(e.endAt)),t}function ab(n){let e=ib(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){st(1===s);const M=t.from[0];M.allDescendants?a=M.collectionId:e=e.child(M.collectionId)}let l=[];t.where&&(l=ub(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(M=>{return new Gh(Jl((O=M).field),function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let _=null;t.limit&&(_=function(M){let O;return O="object"==typeof M?M.value:M,Cu(O)?null:O}(t.limit));let I=null;t.startAt&&(I=cb(t.startAt));let A=null;return t.endAt&&(A=cb(t.endAt)),iE(e,a,p,l,_,"F",I,A)}function ub(n){return n?void 0!==n.unaryFilter?[db(n)]:void 0!==n.fieldFilter?[lb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>ub(e)).reduce((e,t)=>e.concat(t)):Je():[]}function Xh(n){return{before:n.before,values:n.position}}function cb(n){return new zp(n.values||[],!!n.before)}function KT(n){return Qh[n]}function ZT(n){return Sx[n]}function Au(n){return{fieldPath:n.canonicalString()}}function Jl(n){return Or.fromServerFormat(n.fieldPath)}function lb(n){return hi.create(Jl(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(n.fieldFilter.op),n.fieldFilter.value)}function db(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Jl(n.unaryFilter.field);return hi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Jl(n.unaryFilter.field);return hi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jl(n.unaryFilter.field);return hi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Jl(n.unaryFilter.field);return hi.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}function YT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ef(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hb(e)),e=QT(n.get(t),e);return hb(e)}function QT(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function hb(n){return n+"\x01\x01"}function xu(n){const e=n.length;if(st(e>=2),2===e)return st("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Yt.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const p=n.indexOf("\x01",l);switch((p<0||p>t)&&Je(),n.charAt(p+1)){case"\x01":const _=n.substring(l,p);let I;0===a.length?I=_:(a+=_,I=a,a=""),s.push(I);break;case"\x10":a+=n.substring(l,p),a+="\0";break;case"\x11":a+=n.substring(l,p+1);break;default:Je()}l=p+2}return new Yt(s)}class fb{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Zi{constructor(e,t,s){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=s}}Zi.store="owner",Zi.key="owner";class Ru{constructor(e,t,s){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=s}}Ru.store="mutationQueues",Ru.keyPath="userId";class vn{constructor(e,t,s,a,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=s,this.baseMutations=a,this.mutations=l}}vn.store="mutations",vn.keyPath="batchId",vn.userMutationsIndex="userMutationsIndex",vn.userMutationsKeyPath=["userId","batchId"];class Qr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,bi(t)]}static key(e,t,s){return[e,bi(t),s]}}Qr.store="documentMutations",Qr.PLACEHOLDER=new Qr;class JT{constructor(e,t){this.path=e,this.readTime=t}}class XT{constructor(e,t){this.path=e,this.version=t}}class Xn{constructor(e,t,s,a,l,p){this.unknownDocument=e,this.noDocument=t,this.document=s,this.hasCommittedMutations=a,this.readTime=l,this.parentPath=p}}Xn.store="remoteDocuments",Xn.readTimeIndex="readTimeIndex",Xn.readTimeIndexPath="readTime",Xn.collectionReadTimeIndex="collectionReadTimeIndex",Xn.collectionReadTimeIndexPath=["parentPath","readTime"];class Nu{constructor(e){this.byteSize=e}}Nu.store="remoteDocumentGlobal",Nu.key="remoteDocumentGlobalKey";class ws{constructor(e,t,s,a,l,p,_){this.targetId=e,this.canonicalId=t,this.readTime=s,this.resumeToken=a,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=p,this.query=_}}ws.store="targets",ws.keyPath="targetId",ws.queryTargetsIndexName="queryTargetsIndex",ws.queryTargetsKeyPath=["canonicalId","targetId"];class fi{constructor(e,t,s){this.targetId=e,this.path=t,this.sequenceNumber=s}}fi.store="targetDocuments",fi.keyPath=["targetId","path"],fi.documentTargetsIndex="documentTargetsIndex",fi.documentTargetsKeyPath=["path","targetId"];class Yi{constructor(e,t,s,a){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=s,this.targetCount=a}}Yi.key="targetGlobalKey",Yi.store="targetGlobal";class ba{constructor(e,t){this.collectionId=e,this.parent=t}}ba.store="collectionParents",ba.keyPath=["collectionId","parent"];class Mu{constructor(e,t,s,a){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=s,this.inForeground=a}}Mu.store="clientMetadata",Mu.keyPath="clientId";class tf{constructor(e,t,s){this.bundleId=e,this.createTime=t,this.version=s}}tf.store="bundles",tf.keyPath="bundleId";class Xl{constructor(e,t,s){this.name=e,this.readTime=t,this.bundledQuery=s}}Xl.store="namedQueries",Xl.keyPath="name";const sg=[Ru.store,vn.store,Qr.store,Xn.store,ws.store,Zi.store,Yi.store,fi.store,Mu.store,Nu.store,ba.store,tf.store,Xl.store],pb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,s)=>{t(e)})}static reject(e){return new Te((t,s)=>{s(e)})}static waitFor(e){return new Te((t,s)=>{let a=0,l=0,p=!1;e.forEach(_=>{++a,_.next(()=>{++l,p&&l===a&&t()},I=>s(I))}),p=!0,l===a&&t()})}static or(e){let t=Te.resolve(!1);for(const s of e)t=t.next(a=>a?Te.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}}class Iy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Pr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new og(e,t.error)):this.It.resolve()},this.transaction.onerror=s=>{const a=TE(s.target.error);this.It.reject(new og(e,a))}}static open(e,t,s,a){try{return new Iy(t,e.transaction(a,s))}catch(l){throw new og(t,l)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new nf(t)}}class jo{constructor(e,t,s){this.name=e,this.version=t,this.Rt=s,12.2===jo.Pt((0,Nt.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Me("SimpleDb","Removing database:",e),td(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,Nt.hl)())return!1;if(jo.vt())return!0;const e=(0,Nt.z$)(),t=jo.Pt(e),s=0<t&&t<10,a=jo.Vt(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Ct(e){var t=this;return(0,me.Z)(function*(){return t.db||(Me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{a(new og(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const _=p.target.error;a("VersionError"===_.name?new Ae(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new Ae(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new og(e,_))},l.onupgradeneeded=p=>{Me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.Rt.Nt(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{Me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=s=>t.kt(s)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,me.Z)(function*(){const p="readonly"===t;let _=0;for(;;){++_;try{l.db=yield l.Ct(e);const I=Iy.open(l.db,e,p?"readonly":"readwrite",s),A=a(I).catch(M=>(I.abort(M),Te.reject(M))).toPromise();return A.catch(()=>{}),yield I.At,A}catch(I){const A="FirebaseError"!==I.name&&_<3;if(Me("SimpleDb","Transaction failed with error:",I.message,"Retrying:",A),l.close(),!A)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mb{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return td(this.$t.delete())}}class og extends Ae{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ed(n){return"IndexedDbTransactionError"===n.name}class nf{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Me("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),td(s)}add(e){return Me("SimpleDb","ADD",this.store.name,e,e),td(this.store.add(e))}get(e){return td(this.store.get(e)).next(t=>(void 0===t&&(t=null),Me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Me("SimpleDb","DELETE",this.store.name,e),td(this.store.delete(e))}count(){return Me("SimpleDb","COUNT",this.store.name),td(this.store.count())}Bt(e,t){const s=this.cursor(this.options(e,t)),a=[];return this.Ut(s,(l,p)=>{a.push(p)}).next(()=>a)}qt(e,t){Me("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Kt=!1;const a=this.cursor(s);return this.Ut(a,(l,p,_)=>_.delete())}jt(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.Ut(a,t)}Qt(e){const t=this.cursor({});return new Te((s,a)=>{t.onerror=l=>{const p=TE(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(_=>{_?p.continue():s()}):s()}})}Ut(e,t){const s=[];return new Te((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const _=p.target.result;if(!_)return void a();const I=new mb(_),A=t(_.primaryKey,_.value,I);if(A instanceof Te){const M=A.catch(O=>(I.done(),Te.reject(O)));s.push(M)}I.isDone?a():null===I.Mt?_.continue():_.continue(I.Mt)}}).next(()=>Te.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Kt?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function td(n){return new Te((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=TE(s.target.error);t(a)}})}let DE=!1;function TE(n){const e=jo.Pt((0,Nt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DE||(DE=!0,setTimeout(()=>{throw s},0)),s}}return n}class SE extends gb{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function Qi(n,e){const t=Fe(n);return jo.Dt(t.Wt,e)}class by{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&my(l,e,s[a])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&yy(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&yy(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const s=e.get(t.key),a=s;this.applyToLocalView(a),s.isValidDocument()||a.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xt())}isEqual(e){return this.batchId===e.batchId&&Lh(this.mutations,e.mutations,(t,s)=>lE(t,s))&&Lh(this.baseMutations,e.baseMutations,(t,s)=>lE(t,s))}}class AE{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){st(e.mutations.length===s.length);let a=mE();const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,s[p].version);return new AE(e,t,s,a)}}class Ca{constructor(e,t,s,a,l=It.min(),p=It.min(),_=Er.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=_}withSequenceNumber(e){return new Ca(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class yb{constructor(e){this.Gt=e}}function Cy(n,e){if(e.document)return qT(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Ze.fromSegments(e.noDocument.path),s=Lc(e.noDocument.readTime),a=hn.newNoDocument(t,s);return e.hasCommittedMutations?a.setHasCommittedMutations():a}if(e.unknownDocument){const t=Ze.fromSegments(e.unknownDocument.path),s=Lc(e.unknownDocument.version);return hn.newUnknownDocument(t,s)}return Je()}function xE(n,e,t){const s=RE(t),a=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:rg(_=n.Gt,(I=e).key),fields:I.data.value.mapValue.fields,updateTime:Ey(_,I.version.toTimestamp())};return new Xn(null,null,l,e.hasCommittedMutations,s,a)}var _,I;if(e.isNoDocument()){const l=e.key.path.toArray(),p=rf(e.version),_=e.hasCommittedMutations;return new Xn(null,new JT(l,p),null,_,s,a)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),p=rf(e.version);return new Xn(new XT(l,p),null,null,!0,s,a)}return Je()}function RE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _b(n){const e=new Qn(n[0],n[1]);return It.fromTimestamp(e)}function rf(n){const e=n.toTimestamp();return new fb(e.seconds,e.nanoseconds)}function Lc(n){const e=new Qn(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function sf(n,e){const t=(e.baseMutations||[]).map(l=>IE(n.Gt,l));for(let l=0;l<e.mutations.length-1;++l){const p=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(p.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>IE(n.Gt,l)),a=Qn.fromMillis(e.localWriteTimeMs);return new by(e.batchId,a,t,s)}function of(n){const e=Lc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Lc(n.lastLimboFreeSnapshotVersion):It.min();let s;var a;return void 0!==n.query.documents?(st(1===(a=n.query).documents.length),s=Js(Wh(ib(a.documents[0])))):s=Js(ab(n.query)),new Ca(s,n.targetId,0,n.lastListenSequenceNumber,e,t,Er.fromBase64String(n.resumeToken))}function vb(n,e){const t=rf(e.snapshotVersion),s=rf(e.lastLimboFreeSnapshotVersion);let a;a=Hh(e.target)?bE(n.Gt,e.target):CE(n.Gt,e.target);const l=e.resumeToken.toBase64();return new ws(e.targetId,Wp(e.target),t,l,e.sequenceNumber,s,a)}function NE(n){const e=ab({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?aE(e,e.limit,"L"):e}class eS{getBundleMetadata(e,t){return Eb(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:Lc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Eb(e).put({bundleId:(s=t).id,createTime:rf(Yr(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return wb(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:NE(a.bundledQuery),readTime:Lc(a.readTime)};var a})}saveNamedQuery(e,t){return wb(e).put({name:(s=t).name,readTime:rf(Yr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Eb(n){return Qi(n,tf.store)}function wb(n){return Qi(n,Xl.store)}class tS{constructor(){this.zt=new ME}addToCollectionParentIndex(e,t){return this.zt.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.zt.getEntries(t))}}class ME{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new jn(Yt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new jn(Yt.comparator)).toArray()}}class nS{constructor(){this.Ht=new ME}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const l={collectionId:s,parent:bi(a)};return PE(e).put(l)}return Te.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Yv(t),""],!1,!0);return PE(e).Bt(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;s.push(xu(p.parent))}return s})}}function PE(n){return Qi(n,ba.store)}const OE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ji{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Ji(e,Ji.DEFAULT_COLLECTION_PERCENTILE,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ib(n,e,t){const s=n.store(vn.store),a=n.store(Qr.store),l=[],p=IDBKeyRange.only(t.batchId);let _=0;const I=s.jt({range:p},(M,O,K)=>(_++,K.delete()));l.push(I.next(()=>{st(1===_)}));const A=[];for(const M of t.mutations){const O=Qr.key(e,M.key.path,t.batchId);l.push(a.delete(O)),A.push(M.key)}return Te.waitFor(l).next(()=>A)}function ag(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}Ji.DEFAULT_COLLECTION_PERCENTILE=10,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ji.DEFAULT=new Ji(41943040,Ji.DEFAULT_COLLECTION_PERCENTILE,Ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ji.DISABLED=new Ji(-1,0,0);class kE{constructor(e,t,s,a){this.userId=e,this.k=t,this.Jt=s,this.referenceDelegate=a,this.Yt={}}static Xt(e,t,s,a){st(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new kE(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vc(e).jt({index:vn.userMutationsIndex,range:s},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=Uc(e),p=Vc(e);return p.add({}).next(_=>{st("number"==typeof _);const I=new by(_,t,s,a),A=function(K,Q,ye){const ke=ye.baseMutations.map(bt=>wy(K.Gt,bt)),Be=ye.mutations.map(bt=>wy(K.Gt,bt));return new vn(Q,ye.batchId,ye.localWriteTime.toMillis(),ke,Be)}(this.k,this.userId,I),M=[];let O=new jn((K,Q)=>Mt(K.canonicalString(),Q.canonicalString()));for(const K of a){const Q=Qr.key(this.userId,K.key.path,_);O=O.add(K.key.path.popLast()),M.push(p.put(A)),M.push(l.put(Q,Qr.PLACEHOLDER))}return O.forEach(K=>{M.push(this.Jt.addToCollectionParentIndex(e,K))}),e.addOnCommittedListener(()=>{this.Yt[_]=I.keys()}),Te.waitFor(M).next(()=>I)})}lookupMutationBatch(e,t){return Vc(e).get(t).next(s=>s?(st(s.userId===this.userId),sf(this.k,s)):null)}Zt(e,t){return this.Yt[t]?Te.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Yt[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Vc(e).jt({index:vn.userMutationsIndex,range:a},(p,_,I)=>{_.userId===this.userId&&(st(_.batchId>=s),l=sf(this.k,_)),I.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Vc(e).jt({index:vn.userMutationsIndex,range:t,reverse:!0},(a,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vc(e).Bt(vn.userMutationsIndex,t).next(s=>s.map(a=>sf(this.k,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Qr.prefixForPath(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return Uc(e).jt({range:a},(p,_,I)=>{const[A,M,O]=p,K=xu(M);if(A===this.userId&&t.path.isEqual(K))return Vc(e).get(O).next(Q=>{if(!Q)throw Je();st(Q.userId===this.userId),l.push(sf(this.k,Q))});I.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new jn(Mt);const a=[];return t.forEach(l=>{const p=Qr.prefixForPath(this.userId,l.path),_=IDBKeyRange.lowerBound(p),I=Uc(e).jt({range:_},(A,M,O)=>{const[K,Q,ye]=A,ke=xu(Q);K===this.userId&&l.path.isEqual(ke)?s=s.add(ye):O.done()});a.push(I)}),Te.waitFor(a).next(()=>this.te(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=Qr.prefixForPath(this.userId,s),p=IDBKeyRange.lowerBound(l);let _=new jn(Mt);return Uc(e).jt({range:p},(I,A,M)=>{const[O,K,Q]=I,ye=xu(K);O===this.userId&&s.isPrefixOf(ye)?ye.length===a&&(_=_.add(Q)):M.done()}).next(()=>this.te(e,_))}te(e,t){const s=[],a=[];return t.forEach(l=>{a.push(Vc(e).get(l).next(p=>{if(null===p)throw Je();st(p.userId===this.userId),s.push(sf(this.k,p))}))}),Te.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return Ib(e.Wt,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Te.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Te.resolve();const s=IDBKeyRange.lowerBound(Qr.prefixForUser(this.userId)),a=[];return Uc(e).jt({range:s},(l,p,_)=>{if(l[0]===this.userId){const I=xu(l[1]);a.push(I)}else _.done()}).next(()=>{st(0===a.length)})})}containsKey(e,t){return bb(e,this.userId,t)}ne(e){return Dy(e).get(this.userId).next(t=>t||new Ru(this.userId,-1,""))}}function bb(n,e,t){const s=Qr.prefixForPath(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return Uc(n).jt({range:l,Kt:!0},(_,I,A)=>{const[M,O,K]=_;M===e&&O===a&&(p=!0),A.done()}).next(()=>p)}function Vc(n){return Qi(n,vn.store)}function Uc(n){return Qi(n,Qr.store)}function Dy(n){return Qi(n,Ru.store)}class jc{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new jc(0)}static re(){return new jc(-1)}}class FE{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const s=new jc(t.highestTargetId);return t.highestTargetId=s.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>It.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.oe(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.ae(e,a)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(s=>(s.targetCount+=1,this.ue(t,s),this.ae(e,s))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>af(e).delete(t.targetId)).next(()=>this.oe(e)).next(s=>(st(s.targetCount>0),s.targetCount-=1,this.ae(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return af(e).jt((p,_)=>{const I=of(_);I.sequenceNumber<=t&&null===s.get(I.targetId)&&(a++,l.push(this.removeTargetData(e,I)))}).next(()=>Te.waitFor(l)).next(()=>a)}forEachTarget(e,t){return af(e).jt((s,a)=>{const l=of(a);t(l)})}oe(e){return Cb(e).get(Yi.key).next(t=>(st(null!==t),t))}ae(e,t){return Cb(e).put(Yi.key,t)}ce(e,t){return af(e).put(vb(this.k,t))}ue(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Wp(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return af(e).jt({range:a,index:ws.queryTargetsIndexName},(p,_,I)=>{const A=of(_);qp(t,A.target)&&(l=A,I.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=Da(e);return t.forEach(p=>{const _=bi(p.path);a.push(l.put(new fi(s,_))),a.push(this.referenceDelegate.addReference(e,s,p))}),Te.waitFor(a)}removeMatchingKeys(e,t,s){const a=Da(e);return Te.forEach(t,l=>{const p=bi(l.path);return Te.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=Da(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Da(e);let l=Xt();return a.jt({range:s,Kt:!0},(p,_,I)=>{const A=xu(p[1]),M=new Ze(A);l=l.add(M)}).next(()=>l)}containsKey(e,t){const s=bi(t.path),a=IDBKeyRange.bound([s],[Yv(s)],!1,!0);let l=0;return Da(e).jt({index:fi.documentTargetsIndex,Kt:!0,range:a},([p,_],I,A)=>{0!==p&&(l++,A.done())}).next(()=>l>0)}Et(e,t){return af(e).get(t).next(s=>s?of(s):null)}}function af(n){return Qi(n,ws.store)}function Cb(n){return Qi(n,Yi.store)}function Da(n){return Qi(n,fi.store)}function nd(n){return LE.apply(this,arguments)}function LE(){return(LE=(0,me.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==pb)throw n;Me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Db([n,e],[t,s]){const a=Mt(n,t);return 0===a?Mt(e,s):a}class Tb{constructor(e){this.he=e,this.buffer=new jn(Db),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Db(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Sb{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const s=this.we?3e5:6e4;Me("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,me.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(a){ed(a)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield nd(a)}yield t.me(e)}))}}class Ab{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Te.resolve(Es.I);const s=new Tb(t);return this.ge.forEachTarget(e,a=>s.de(a.sequenceNumber)).next(()=>this.ge.pe(e,a=>s.de(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.ge.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(OE)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OE):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let s,a,l,p,_,I,A;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),a=this.params.maximumSequenceNumbersToCollect):a=O,p=Date.now(),this.nthSequenceNumber(e,a))).next(O=>(s=O,_=Date.now(),this.removeTargets(e,s,t))).next(O=>(l=O,I=Date.now(),this.removeOrphanedDocuments(e,s))).next(O=>(A=Date.now(),ry()<=mu.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-M}ms\n\tDetermined least recently used ${a} in `+(_-p)+`ms\n\tRemoved ${l} targets in `+(I-_)+`ms\n\tRemoved ${O} documents in `+(A-I)+`ms\nTotal Duration: ${A-M}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:O})))}}class Ax{constructor(e,t){this.db=e,this.garbageCollector=new Ab(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Ee(e){let t=0;return this.pe(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(s,a)=>t(a))}addReference(e,t,s){return Ty(e,s)}removeReference(e,t,s){return Ty(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Ty(e,t)}Ae(e,t){return function(s,a){let l=!1;return Dy(s).Qt(p=>bb(s,p,a).next(_=>(_&&(l=!0),Te.resolve(!_)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Ie(e,(p,_)=>{if(_<=t){const I=this.Ae(e,p).next(A=>{if(!A)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p),Da(e).delete([0,bi(p.path)])))});a.push(I)}}).next(()=>Te.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Ty(e,t)}Ie(e,t){const s=Da(e);let a,l=Es.I;return s.jt({index:fi.documentTargetsIndex},([p,_],{path:I,sequenceNumber:A})=>{0===p?(l!==Es.I&&t(new Ze(xu(a)),l),l=A,a=I):l=Es.I}).next(()=>{l!==Es.I&&t(new Ze(xu(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ty(n,e){return Da(n).put((s=n.currentSequenceNumber,new fi(0,bi(e.path),s)));var s}class Bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0!==a){for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t])}else this.inner[s]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),!0;return!1}forEach(e){ql(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return RI(this.inner)}}class rS{constructor(){this.changes=new Bo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:It.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:hn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Te.resolve(s.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class VE{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,s){return Is(e).put(Ay(t),s)}removeEntry(e,t){const s=Is(e),a=Ay(t);return s.delete(a)}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Re(e,s)))}getEntry(e,t){return Is(e).get(Ay(t)).next(s=>this.Pe(t,s))}be(e,t){return Is(e).get(Ay(t)).next(s=>({document:this.Pe(t,s),size:ag(s)}))}getEntries(e,t){let s=to();return this.ve(e,t,(a,l)=>{const p=this.Pe(a,l);s=s.insert(a,p)}).next(()=>s)}Ve(e,t){let s=to(),a=new Ir(Ze.comparator);return this.ve(e,t,(l,p)=>{const _=this.Pe(l,p);s=s.insert(l,_),a=a.insert(l,ag(p))}).next(()=>({documents:s,Se:a}))}ve(e,t,s){if(t.isEmpty())return Te.resolve();const a=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let p=l.getNext();return Is(e).jt({range:a},(_,I,A)=>{const M=Ze.fromSegments(_);for(;p&&Ze.comparator(p,M)<0;)s(p,null),p=l.getNext();p&&p.isEqual(M)&&(s(p,I),p=l.hasNext()?l.getNext():null),p?A.Lt(p.path.toArray()):A.done()}).next(()=>{for(;p;)s(p,null),p=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,s){let a=to();const l=t.path.length+1,p={};if(s.isEqual(It.min())){const _=t.path.toArray();p.range=IDBKeyRange.lowerBound(_)}else{const _=t.path.toArray(),I=RE(s);p.range=IDBKeyRange.lowerBound([_,I],!0),p.index=Xn.collectionReadTimeIndex}return Is(e).jt(p,(_,I,A)=>{if(_.length!==l)return;const M=Cy(this.k,I);t.path.isPrefixOf(M.key.path)?Ki(t,M)&&(a=a.insert(M.key,M)):A.done()}).next(()=>a)}newChangeBuffer(e){return new Sy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return xb(e).get(Nu.key).next(t=>(st(!!t),t))}Re(e,t){return xb(e).put(Nu.key,t)}Pe(e,t){if(t){const s=Cy(this.k,t);if(!s.isNoDocument()||!s.version.isEqual(It.min()))return s}return hn.newInvalidDocument(e)}}class Sy extends rS{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Bo(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new jn((l,p)=>Mt(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const _=this.Ce.get(l);if(p.document.isValidDocument()){const I=xE(this.De.k,p.document,this.getReadTime(l));a=a.add(l.path.popLast()),s+=ag(I)-_,t.push(this.De.addEntry(e,l,I))}else if(s-=_,this.trackRemovals){const I=xE(this.De.k,hn.newNoDocument(l,It.min()),this.getReadTime(l));t.push(this.De.addEntry(e,l,I))}else t.push(this.De.removeEntry(e,l))}),a.forEach(l=>{t.push(this.De.Jt.addToCollectionParentIndex(e,l))}),t.push(this.De.updateMetadata(e,s)),Te.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(s=>(this.Ce.set(t,s.size),s.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:s,Se:a})=>(a.forEach((l,p)=>{this.Ce.set(l,p)}),s))}}function xb(n){return Qi(n,Nu.store)}function Is(n){return Qi(n,Xn.store)}function Ay(n){return n.path.toArray()}class xx{constructor(e){this.k=e}Nt(e,t,s,a){st(s<a&&s>=0&&a<=11);const l=new Iy("createOrUpgrade",t);var _;s<1&&a>=1&&(e.createObjectStore(Zi.store),(_=e).createObjectStore(Ru.store,{keyPath:Ru.keyPath}),_.createObjectStore(vn.store,{keyPath:vn.keyPath,autoIncrement:!0}).createIndex(vn.userMutationsIndex,vn.userMutationsKeyPath,{unique:!0}),_.createObjectStore(Qr.store),Rb(e),function(_){_.createObjectStore(Xn.store)}(e));let p=Te.resolve();return s<3&&a>=3&&(0!==s&&(function(_){_.deleteObjectStore(fi.store),_.deleteObjectStore(ws.store),_.deleteObjectStore(Yi.store)}(e),Rb(e)),p=p.next(()=>function(_){const I=_.store(Yi.store),A=new Yi(0,0,It.min().toTimestamp(),0);return I.put(Yi.key,A)}(l))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(_,I){return I.store(vn.store).Bt().next(A=>{_.deleteObjectStore(vn.store),_.createObjectStore(vn.store,{keyPath:vn.keyPath,autoIncrement:!0}).createIndex(vn.userMutationsIndex,vn.userMutationsKeyPath,{unique:!0});const M=I.store(vn.store),O=A.map(K=>M.put(K));return Te.waitFor(O)})}(e,l))),p=p.next(()=>{!function(_){_.createObjectStore(Mu.store,{keyPath:Mu.keyPath})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Ne(l))),s<6&&a>=6&&(p=p.next(()=>(function(_){_.createObjectStore(Nu.store)}(e),this.ke(l)))),s<7&&a>=7&&(p=p.next(()=>this.xe(l))),s<8&&a>=8&&(p=p.next(()=>this.$e(e,l))),s<9&&a>=9&&(p=p.next(()=>{(function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")})(e),function(_){const I=_.objectStore(Xn.store);I.createIndex(Xn.readTimeIndex,Xn.readTimeIndexPath,{unique:!1}),I.createIndex(Xn.collectionReadTimeIndex,Xn.collectionReadTimeIndexPath,{unique:!1})}(t)})),s<10&&a>=10&&(p=p.next(()=>this.Fe(l))),s<11&&a>=11&&(p=p.next(()=>{(function(_){_.createObjectStore(tf.store,{keyPath:tf.keyPath})})(e),function(_){_.createObjectStore(Xl.store,{keyPath:Xl.keyPath})}(e)})),p}ke(e){let t=0;return e.store(Xn.store).jt((s,a)=>{t+=ag(a)}).next(()=>{const s=new Nu(t);return e.store(Nu.store).put(Nu.key,s)})}Ne(e){const t=e.store(Ru.store),s=e.store(vn.store);return t.Bt().next(a=>Te.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.Bt(vn.userMutationsIndex,p).next(_=>Te.forEach(_,I=>{st(I.userId===l.userId);const A=sf(this.k,I);return Ib(e,l.userId,A).next(()=>{})}))}))}xe(e){const t=e.store(fi.store),s=e.store(Xn.store);return e.store(Yi.store).get(Yi.key).next(a=>{const l=[];return s.jt((p,_)=>{const I=new Yt(p),A=[0,bi(I)];l.push(t.get(A).next(M=>M?Te.resolve():t.put(new fi(0,bi(I),a.highestListenSequenceNumber))))}).next(()=>Te.waitFor(l))})}$e(e,t){e.createObjectStore(ba.store,{keyPath:ba.keyPath});const s=t.store(ba.store),a=new ME,l=p=>{if(a.add(p)){const _=p.lastSegment(),I=p.popLast();return s.put({collectionId:_,parent:bi(I)})}};return t.store(Xn.store).jt({Kt:!0},(p,_)=>{const I=new Yt(p);return l(I.popLast())}).next(()=>t.store(Qr.store).jt({Kt:!0},([p,_,I],A)=>{const M=xu(_);return l(M.popLast())}))}Fe(e){const t=e.store(ws.store);return t.jt((s,a)=>{const l=of(a),p=vb(this.k,l);return t.put(p)})}}function Rb(n){n.createObjectStore(fi.store,{keyPath:fi.keyPath}).createIndex(fi.documentTargetsIndex,fi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(ws.store,{keyPath:ws.keyPath}).createIndex(ws.queryTargetsIndexName,ws.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Yi.store)}const no="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class xy{constructor(e,t,s,a,l,p,_,I,A,M){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Oe=l,this.window=p,this.document=_,this.Me=A,this.Le=M,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=O=>Promise.resolve(),!xy.bt())throw new Ae(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ax(this,a),this.Ge=t+"main",this.k=new yb(I),this.ze=new jo(this.Ge,11,new xx(this.k)),this.He=new FE(this.referenceDelegate,this.k),this.Jt=new nS,this.Je=new VE(this.k,this.Jt),this.Ye=new eS,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===M&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(le.FAILED_PRECONDITION,no);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new Es(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var s=(0,me.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,me.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rd(e).put(new Mu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(ed(e))return Me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Ry(e).get(Zi.key).next(t=>Te.resolve(this.un(t)))}hn(e){return rd(e).delete(this.clientId)}ln(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Qi(s,Mu.store);return a.Bt().next(l=>{const p=e.dn(l,18e5),_=l.filter(I=>-1===p.indexOf(I));return Te.forEach(_,I=>a.delete(I.clientId)).next(()=>_)})}).catch(()=>[]);if(e.Xe)for(const s of t)e.Xe.removeItem(e.wn(s.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Te.resolve(!0):Ry(e).get(Zi.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Ae(le.FAILED_PRECONDITION,no);return!1}}return!(!this.networkEnabled||!this.inForeground)||rd(e).Bt().next(s=>void 0===this.dn(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,_=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&_)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Zi.store,Mu.store],t=>{const s=new SE(t,Es.I);return e.an(s).next(()=>e.hn(s))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(s=>this.fn(s.updateTimeMs,t)&&!this._n(s.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>rd(e).Bt().next(t=>this.dn(t,18e5).map(s=>s.clientId)))}get started(){return this.Ue}getMutationQueue(e){return kE.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,s){let l;return Me("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",sg,p=>(l=new SE(p,this.Be?this.Be.next():Es.I),"readwrite-primary"===t?this.rn(l).next(_=>!!_||this.on(l)).next(_=>{if(!_)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Ae(le.FAILED_PRECONDITION,pb);return s(l)}).next(_=>this.cn(l).next(()=>_)):this.En(l).next(()=>s(l)))).then(p=>(l.raiseOnCommittedEvent(),p))}En(e){return Ry(e).get(Zi.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(le.FAILED_PRECONDITION,no)})}cn(e){const t=new Zi(this.clientId,this.allowTabSynchronization,Date.now());return Ry(e).put(Zi.key,t)}static bt(){return jo.bt()}an(e){const t=Ry(e);return t.get(Zi.key).next(s=>this.un(s)?(Me("IndexedDbPersistence","Releasing primary lease."),t.delete(Zi.key)):Te.resolve())}fn(e,t){const s=Date.now();return!(e<s-t||e>s&&(vr(`Detected an update time that is in the future: ${e} > ${s}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,Nt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const s=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Me("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return vr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ry(n){return Qi(n,Zi.store)}function rd(n){return Qi(n,Mu.store)}function UE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class iS{constructor(e,t){this.progress=e,this.In=t}}class sS{constructor(e,t,s){this.Je=e,this.An=t,this.Jt=s}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(s=>this.Pn(e,t,s))}Pn(e,t,s){return this.Je.getEntry(e,t).next(a=>{for(const l of s)l.applyToLocalView(a);return a})}bn(e,t){e.forEach((s,a)=>{for(const l of t)l.applyToLocalView(a)})}vn(e,t){return this.Je.getEntries(e,t).next(s=>this.Vn(e,s).next(()=>s))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>this.bn(t,s))}getDocumentsMatchingQuery(e,t,s){return Ze.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.Sn(e,t.path):oE(t)?this.Dn(e,t,s):this.Cn(e,t,s);var a}Sn(e,t){return this.Rn(e,new Ze(t)).next(s=>{let a=gE();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}Dn(e,t,s){const a=t.collectionGroup;let l=gE();return this.Jt.getCollectionParents(e,a).next(p=>Te.forEach(p,_=>{const I=(A=t,M=_.child(a),new Tu(M,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt));var A,M;return this.Cn(e,I,s).next(A=>{A.forEach((M,O)=>{l=l.insert(M,O)})})}).next(()=>l))}Cn(e,t,s){let a,l;return this.Je.getDocumentsMatchingQuery(e,t,s).next(p=>(a=p,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(p=>(l=p,this.Nn(e,l,a).next(_=>{a=_;for(const I of l)for(const A of I.mutations){const M=A.key;let O=a.get(M);null==O&&(O=hn.newInvalidDocument(M),a=a.insert(M,O)),yy(A,O,I.localWriteTime),O.isFoundDocument()||(a=a.remove(M))}}))).next(()=>(a.forEach((p,_)=>{Ki(t,_)||(a=a.remove(p))}),a))}Nn(e,t,s){let a=Xt();for(const p of t)for(const _ of p.mutations)_ instanceof Su&&null===s.get(_.key)&&(a=a.add(_.key));let l=s;return this.Je.getEntries(e,a).next(p=>(p.forEach((_,I)=>{I.isFoundDocument()&&(l=l.insert(_,I))}),l))}}class jE{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.kn=s,this.xn=a}static $n(e,t){let s=Xt(),a=Xt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new jE(e,t.fromCache,s,a)}}class Nb{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,s,a){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||s.isEqual(It.min())?this.Mn(e,t):this.On.vn(e,a).next(l=>{const p=this.Ln(t,l);return(Zp(t)||Yp(t))&&this.Bn(t.limitType,p,a,s)?this.Mn(e,t):(ry()<=mu.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fy(t)),this.On.getDocumentsMatchingQuery(e,t,s).next(_=>(p.forEach(I=>{_=_.insert(I.key,I)}),_)))});var l}Ln(e,t){let s=new jn($I(e));return t.forEach((a,l)=>{Ki(e,l)&&(s=s.add(l))}),s}Bn(e,t,s,a){if(s.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Mn(e,t){return ry()<=mu.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",fy(t)),this.On.getDocumentsMatchingQuery(e,t,It.min())}}class oS{constructor(e,t,s,a){this.persistence=e,this.Un=t,this.k=a,this.qn=new Ir(Mt),this.Kn=new Bo(l=>Wp(l),qp),this.jn=It.min(),this.An=e.getMutationQueue(s),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new sS(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function Ny(n,e,t,s){return new oS(n,e,t,s)}function BE(n,e){return ug.apply(this,arguments)}function ug(){return(ug=(0,me.Z)(function*(n,e){const t=Fe(n);let s=t.An,a=t.Wn;const l=yield t.persistence.runTransaction("Handle user change","readonly",p=>{let _;return t.An.getAllMutationBatches(p).next(I=>(_=I,s=t.persistence.getMutationQueue(e),a=new sS(t.Qn,s,t.persistence.getIndexManager()),s.getAllMutationBatches(p))).next(I=>{const A=[],M=[];let O=Xt();for(const K of _){A.push(K.batchId);for(const Q of K.mutations)O=O.add(Q.key)}for(const K of I){M.push(K.batchId);for(const Q of K.mutations)O=O.add(Q.key)}return a.vn(p,O).next(K=>({Gn:K,removedBatchIds:A,addedBatchIds:M}))})});return t.An=s,t.Wn=a,t.Un.Fn(t.Wn),l})).apply(this,arguments)}function Mb(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Qn.newChangeBuffer({trackRemovals:!0});return function(p,_,I,A){const M=I.batch,O=M.keys();let K=Te.resolve();return O.forEach(Q=>{K=K.next(()=>A.getEntry(_,Q)).next(ye=>{const ke=I.docVersions.get(Q);st(null!==ke),ye.version.compareTo(ke)<0&&(M.applyToRemoteDocument(ye,I),ye.isValidDocument()&&A.addEntry(ye,I.commitVersion))})}),K.next(()=>p.An.removeMutationBatch(_,M))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.An.performConsistencyCheck(s)).next(()=>t.Wn.vn(s,a))})}function Pb(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function Rx(n,e){const t=Fe(n),s=e.snapshotVersion;let a=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.Qn.newChangeBuffer({trackRemovals:!0});a=t.qn;const _=[];e.targetChanges.forEach((A,M)=>{const O=a.get(M);if(!O)return;_.push(t.He.removeMatchingKeys(l,A.removedDocuments,M).next(()=>t.He.addMatchingKeys(l,A.addedDocuments,M)));const K=A.resumeToken;if(K.approximateByteSize()>0){const Q=O.withResumeToken(K,s).withSequenceNumber(l.currentSequenceNumber);a=a.insert(M,Q),ye=O,Be=A,st((ke=Q).resumeToken.approximateByteSize()>0),(0===ye.resumeToken.approximateByteSize()||ke.snapshotVersion.toMicroseconds()-ye.snapshotVersion.toMicroseconds()>=3e8||Be.addedDocuments.size+Be.modifiedDocuments.size+Be.removedDocuments.size>0)&&_.push(t.He.updateTargetData(l,Q))}var ye,ke,Be});let I=to();if(e.documentUpdates.forEach((A,M)=>{e.resolvedLimboDocuments.has(A)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(l,A))}),_.push(Ob(l,p,e.documentUpdates,s,void 0).next(A=>{I=A})),!s.isEqual(It.min())){const A=t.He.getLastRemoteSnapshotVersion(l).next(M=>t.He.setTargetsMetadata(l,l.currentSequenceNumber,s));_.push(A)}return Te.waitFor(_).next(()=>p.apply(l)).next(()=>t.Wn.Vn(l,I)).next(()=>I)}).then(l=>(t.qn=a,l))}function Ob(n,e,t,s,a){let l=Xt();return t.forEach(p=>l=l.add(p)),e.getEntries(n,l).next(p=>{let _=to();return t.forEach((I,A)=>{const M=p.get(I),O=(null==a?void 0:a.get(I))||s;A.isNoDocument()&&A.version.isEqual(It.min())?(e.removeEntry(I,O),_=_.insert(I,A)):!M.isValidDocument()||A.version.compareTo(M.version)>0||0===A.version.compareTo(M.version)&&M.hasPendingWrites?(e.addEntry(A,O),_=_.insert(I,A)):Me("LocalStore","Ignoring outdated watch update for ",I,". Current version:",M.version," Watch version:",A.version)}),_})}function aS(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(s,e)))}function uf(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.He.getTargetData(s,e).next(l=>l?(a=l,Te.resolve(a)):t.He.allocateTargetId(s).next(p=>(a=new Ca(e,p,0,s.currentSequenceNumber),t.He.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.qn.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.qn=t.qn.insert(s.targetId,s),t.Kn.set(e,s.targetId)),s})}function id(n,e,t){return My.apply(this,arguments)}function My(){return(My=(0,me.Z)(function*(n,e,t){const s=Fe(n),a=s.qn.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!ed(p))throw p;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.qn=s.qn.remove(e),s.Kn.delete(a.target)})).apply(this,arguments)}function cg(n,e,t){const s=Fe(n);let a=It.min(),l=Xt();return s.persistence.runTransaction("Execute query","readonly",p=>function(_,I,A){const M=Fe(_),O=M.Kn.get(A);return void 0!==O?Te.resolve(M.qn.get(O)):M.He.getTargetData(I,A)}(s,p,Js(e)).next(_=>{if(_)return a=_.lastLimboFreeSnapshotVersion,s.He.getMatchingKeysForTargetId(p,_.targetId).next(I=>{l=I})}).next(()=>s.Un.getDocumentsMatchingQuery(p,e,t?a:It.min(),t?l:Xt())).next(_=>({documents:_,zn:l})))}function kb(n,e){const t=Fe(n),s=Fe(t.He),a=t.qn.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.Et(l,e).next(p=>p?p.target:null))}function Fb(n){const e=Fe(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(s,a,l){const p=Fe(s);let _=to(),I=RE(l);const A=Is(a),M=IDBKeyRange.lowerBound(I,!0);return A.jt({index:Xn.readTimeIndex,range:M},(O,K)=>{const Q=Cy(p.k,K);_=_.insert(Q.key,Q),I=K.readTime}).next(()=>({In:_,readTime:_b(I)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:s})=>(e.jn=s,t))}function cf(){return(cf=(0,me.Z)(function*(n){const e=Fe(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(s){const a=Is(s);let l=It.min();return a.jt({index:Xn.readTimeIndex,reverse:!0},(p,_,I)=>{_.readTime&&(l=_b(_.readTime)),I.done()}).next(()=>l)}(t)).then(t=>{e.jn=t})})).apply(this,arguments)}function Py(){return(Py=(0,me.Z)(function*(n,e,t,s){const a=Fe(n);let l=Xt(),p=to(),_=mE();for(const M of t){const O=e.Hn(M.metadata.name);M.document&&(l=l.add(O)),p=p.insert(O,e.Jn(M)),_=_.insert(O,e.Yn(M.metadata.readTime))}const I=a.Qn.newChangeBuffer({trackRemovals:!0}),A=yield uf(a,(M=s,Js(Wh(Yt.fromString(`__bundle__/docs/${M}`)))));var M;return a.persistence.runTransaction("Apply bundle documents","readwrite",M=>Ob(M,I,p,It.min(),_).next(O=>(I.apply(M),O)).next(O=>a.He.removeMatchingKeysForTargetId(M,A.targetId).next(()=>a.He.addMatchingKeys(M,l,A.targetId)).next(()=>a.Wn.Vn(M,O)).next(()=>O)))})).apply(this,arguments)}function Oy(n,e){return lf.apply(this,arguments)}function lf(){return(lf=(0,me.Z)(function*(n,e,t=Xt()){const s=yield uf(n,Js(NE(e.bundledQuery))),a=Fe(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=Yr(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.Ye.saveNamedQuery(l,e);const _=s.withResumeToken(Er.EMPTY_BYTE_STRING,p);return a.qn=a.qn.insert(_.targetId,_),a.He.updateTargetData(l,_).next(()=>a.He.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.He.addMatchingKeys(l,t,s.targetId)).next(()=>a.Ye.saveNamedQuery(l,e))})})).apply(this,arguments)}class lg{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Te.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var s;return this.Xn.set(t.id,{id:(s=t).id,version:s.version,createTime:Yr(s.createTime)}),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(s=t).name,query:NE(s.bundledQuery),readTime:Yr(s.readTime)}),Te.resolve();var s}}class $E{constructor(){this.ts=new jn(kr.es),this.ns=new jn(kr.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const s=new kr(e,t);this.ts=this.ts.add(s),this.ns=this.ns.add(s)}rs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.os(new kr(e,t))}cs(e,t){e.forEach(s=>this.removeReference(s,t))}us(e){const t=new Ze(new Yt([])),s=new kr(t,e),a=new kr(t,e+1),l=[];return this.ns.forEachInRange([s,a],p=>{this.os(p),l.push(p.key)}),l}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new Ze(new Yt([])),s=new kr(t,e),a=new kr(t,e+1);let l=Xt();return this.ns.forEachInRange([s,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new kr(e,0),s=this.ts.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class kr{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return Ze.comparator(e.key,t.key)||Mt(e.fs,t.fs)}static ss(e,t){return Mt(e.fs,t.fs)||Ze.comparator(e.key,t.key)}}class Nx{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new jn(kr.es)}checkEmpty(e){return Te.resolve(0===this.An.length)}addMutationBatch(e,t,s,a){const l=this.ds;this.ds++;const p=new by(l,t,s,a);this.An.push(p);for(const _ of a)this.ws=this.ws.add(new kr(_.key,l)),this.Jt.addToCollectionParentIndex(e,_.key.path.popLast());return Te.resolve(p)}lookupMutationBatch(e,t){return Te.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.gs(t+1),l=a<0?0:a;return Te.resolve(this.An.length>l?this.An[l]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Te.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new kr(t,0),a=new kr(t,Number.POSITIVE_INFINITY),l=[];return this.ws.forEachInRange([s,a],p=>{const _=this._s(p.fs);l.push(_)}),Te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new jn(Mt);return t.forEach(a=>{const l=new kr(a,0),p=new kr(a,Number.POSITIVE_INFINITY);this.ws.forEachInRange([l,p],_=>{s=s.add(_.fs)})}),Te.resolve(this.ys(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Ze.isDocumentKey(l)||(l=l.child(""));const p=new kr(new Ze(l),0);let _=new jn(Mt);return this.ws.forEachWhile(I=>{const A=I.key.path;return!!s.isPrefixOf(A)&&(A.length===a&&(_=_.add(I.fs)),!0)},p),Te.resolve(this.ys(_))}ys(e){const t=[];return e.forEach(s=>{const a=this._s(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){st(0===this.ps(t.batchId,"removed")),this.An.shift();let s=this.ws;return Te.forEach(t.mutations,a=>{const l=new kr(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ws=s})}ee(e){}containsKey(e,t){const s=new kr(t,0),a=this.ws.firstAfterOrEqual(s);return Te.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Te.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class cS{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Ir(Ze.comparator),this.size=0}addEntry(e,t,s){const a=t.key,l=this.docs.get(a),p=l?l.size:0,_=this.Ts(t);return this.docs=this.docs.insert(a,{document:t.clone(),size:_,readTime:s}),this.size+=_-p,this.Jt.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Te.resolve(s?s.document.clone():hn.newInvalidDocument(t))}getEntries(e,t){let s=to();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.clone():hn.newInvalidDocument(a))}),Te.resolve(s)}getDocumentsMatchingQuery(e,t,s){let a=to();const l=new Ze(t.path.child("")),p=this.docs.getIteratorFrom(l);for(;p.hasNext();){const{key:_,value:{document:I,readTime:A}}=p.getNext();if(!t.path.isPrefixOf(_.path))break;A.compareTo(s)<=0||Ki(t,I)&&(a=a.insert(I.key,I.clone()))}return Te.resolve(a)}Es(e,t){return Te.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new lS(this)}getSize(e){return Te.resolve(this.size)}}class lS extends rS{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.document.isValidDocument()?t.push(this.De.addEntry(e,a.document,this.getReadTime(s))):this.De.removeEntry(s)}),Te.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class dS{constructor(e){this.persistence=e,this.Is=new Bo(t=>Wp(t),qp),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.As=0,this.Rs=new $E,this.targetCount=0,this.Ps=jc.ie()}forEachTarget(e,t){return this.Is.forEach((s,a)=>t(a)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.As&&(this.As=t),Te.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new jc(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.ce(t),Te.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.Is.forEach((p,_)=>{_.sequenceNumber<=t&&null===s.get(_.targetId)&&(this.Is.delete(p),l.push(this.removeMatchingKeysForTargetId(e,_.targetId)),a++)}),Te.waitFor(l).next(()=>a)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const s=this.Is.get(t)||null;return Te.resolve(s)}addMatchingKeys(e,t,s){return this.Rs.rs(t,s),Te.resolve()}removeMatchingKeys(e,t,s){this.Rs.cs(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),Te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Rs.ls(t);return Te.resolve(s)}containsKey(e,t){return Te.resolve(this.Rs.containsKey(t))}}class hS{constructor(e,t){this.bs={},this.Be=new Es(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new dS(this),this.Jt=new tS,this.Je=new cS(this.Jt,s=>this.referenceDelegate.vs(s)),this.k=new yb(t),this.Ye=new lg(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new Nx(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,s){Me("MemoryPersistence","Starting transaction:",e);const a=new fS(this.Be.next());return this.referenceDelegate.Vs(),s(a).next(l=>this.referenceDelegate.Ss(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ds(e,t){return Te.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class fS extends gb{constructor(e){super(),this.currentSequenceNumber=e}}class HE{constructor(e){this.persistence=e,this.Cs=new $E,this.Ns=null}static ks(e){return new HE(e)}get xs(){if(this.Ns)return this.Ns;throw Je()}addReference(e,t,s){return this.Cs.addReference(s,t),this.xs.delete(s.toString()),Te.resolve()}removeReference(e,t,s){return this.Cs.removeReference(s,t),this.xs.add(s.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(a=>this.xs.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.xs.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.xs,s=>{const a=Ze.fromPath(s);return this.$s(e,a).next(l=>{l||t.removeEntry(a)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(s=>{s?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Te.or([()=>Te.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function Vb(n,e){return`firestore_clients_${n}_${e}`}function Ub(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function GE(n,e){return`firestore_targets_${n}_${e}`}class WE{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static Fs(e,t,s){const a=JSON.parse(s);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new Ae(a.error.code,a.error.message))),p?new WE(e,t,a.state,l):(vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dg{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Fs(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new Ae(s.error.code,s.error.message))),l?new dg(e,s.state,a):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bc{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=tg();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=PI(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return a?new Bc(e,l):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class qE{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qE(t.clientId,t.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zE{constructor(){this.activeTargetIds=tg()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KE{constructor(e,t,s,a,l){this.window=e,this.Oe=t,this.persistenceKey=s,this.Bs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Ir(Mt),this.started=!1,this.js=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Qs=Vb(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new zE),this.Gs=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(_){return`firestore_bundle_loaded_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Tn();for(const a of t){if(a===e.Bs)continue;const l=e.getItem(Vb(e.persistenceKey,a));if(l){const p=Bc.Fs(a,l);p&&(e.Ks=e.Ks.insert(p.clientId,p))}}e.Xs();const s=e.storage.getItem(e.Js);if(s){const a=e.Zs(s);a&&e.ti(a)}for(const a of e.js)e.qs(a);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,s){this.ni(e,t,s),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(GE(this.persistenceKey,e));if(s){const a=dg.Fs(e,s);a&&(t=a.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(GE(this.persistenceKey,e))}updateQueryState(e,t,s){this.ri(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.si(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Me("SharedClientState","READ",e,t),t}setItem(e,t){Me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Me("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Qs)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==s.key)if(t.Gs.test(s.key)){if(null==s.newValue){const a=t.ci(s.key);return t.ui(a,null)}{const a=t.hi(s.key,s.newValue);if(a)return t.ui(a.clientId,a)}}else if(t.zs.test(s.key)){if(null!==s.newValue){const a=t.li(s.key,s.newValue);if(a)return t.fi(a)}}else if(t.Hs.test(s.key)){if(null!==s.newValue){const a=t.di(s.key,s.newValue);if(a)return t.wi(a)}}else if(s.key===t.Js){if(null!==s.newValue){const a=t.Zs(s.newValue);if(a)return t.ti(a)}}else if(s.key===t.Ws){const a=function(l){let p=Es.I;if(null!=l)try{const _=JSON.parse(l);st("number"==typeof _),p=_}catch(_){vr("SharedClientState","Failed to read sequence number from WebStorage",_)}return p}(s.newValue);a!==Es.I&&t.sequenceNumberHandler(a)}else if(s.key===t.Ys)return t.syncEngine._i()}else t.js.push(s)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,s){const a=new WE(this.currentUser,e,t,s),l=Ub(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Os())}si(e){const t=Ub(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,s){const a=GE(this.persistenceKey,e),l=new dg(e,t,s);this.setItem(a,l.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const s=this.ci(e);return Bc.Fs(s,t)}li(e,t){const s=this.zs.exec(e),a=Number(s[1]);return WE.Fs(new zr(void 0!==s[2]?s[2]:null),a,t)}di(e,t){const s=this.Hs.exec(e),a=Number(s[1]);return dg.Fs(a,t)}Zs(e){return qE.Fs(e)}fi(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const s=t?this.Ks.insert(e,t):this.Ks.remove(e),a=this.ei(this.Ks),l=this.ei(s),p=[],_=[];return l.forEach(I=>{a.has(I)||p.push(I)}),a.forEach(I=>{l.has(I)||_.push(I)}),this.syncEngine.yi(p,_).then(()=>{this.Ks=s})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=tg();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class hg{constructor(){this.pi=new zE,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,s){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new zE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class sd{Ei(e){}shutdown(){}}class ZE{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const pS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Mx{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class gS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,s,a,l){const p=this.Ui(e,t);Me("RestConnection","Sending: ",p,s);const _={};return this.qi(_,a,l),this.Ki(e,p,_,s).then(I=>(Me("RestConnection","Received: ",I),I),I=>{throw Up("RestConnection",`${e} failed with error: `,I,"url: ",p,"request:",s),I})}ji(e,t,s,a,l){return this.Bi(e,t,s,a,l)}qi(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}Ui(e,t){return`${this.Mi}/v1/${t}:${pS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,s,a){return new Promise((l,p)=>{const _=new NT;_.listenOnce(xT.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case ny.NO_ERROR:const A=_.getResponseJson();Me("Connection","XHR received:",JSON.stringify(A)),l(A);break;case ny.TIMEOUT:Me("Connection",'RPC "'+e+'" timed out'),p(new Ae(le.DEADLINE_EXCEEDED,"Request time out"));break;case ny.HTTP_ERROR:const M=_.getStatus();if(Me("Connection",'RPC "'+e+'" failed with status:',M,"response text:",_.getResponseText()),M>0){const O=_.getResponseJson().error;if(O&&O.status&&O.message){const K=function(Q){const ye=Q.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ye)>=0?ye:le.UNKNOWN}(O.status);p(new Ae(K,O.message))}else p(new Ae(le.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new Ae(le.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{Me("Connection",'RPC "'+e+'" completed.')}});const I=JSON.stringify(a);_.send(t,"POST",I,s,15)})}Qi(e,t,s){const a=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=bI(),p=CI(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new RT({})),this.qi(_.initMessageHeaders,t,s),(0,Nt.uI)()||(0,Nt.b$)()||(0,Nt.d)()||(0,Nt.w1)()||(0,Nt.Mn)()||(0,Nt.ru)()||(_.httpHeadersOverwriteParam="$httpHeaders");const I=a.join("");Me("Connection","Creating WebChannel: "+I,_);const A=l.createWebChannel(I,_);let M=!1,O=!1;const K=new Mx({Vi:ye=>{O?Me("Connection","Not sending because WebChannel is closed:",ye):(M||(Me("Connection","Opening WebChannel transport."),A.open(),M=!0),Me("Connection","WebChannel sending:",ye),A.send(ye))},Si:()=>A.close()}),Q=(ye,ke,Be)=>{ye.listen(ke,bt=>{try{Be(bt)}catch(xt){setTimeout(()=>{throw xt},0)}})};return Q(A,Vp.EventType.OPEN,()=>{O||Me("Connection","WebChannel transport opened.")}),Q(A,Vp.EventType.CLOSE,()=>{O||(O=!0,Me("Connection","WebChannel transport closed"),K.Fi())}),Q(A,Vp.EventType.ERROR,ye=>{O||(O=!0,Up("Connection","WebChannel transport errored:",ye),K.Fi(new Ae(le.UNAVAILABLE,"The operation could not be completed")))}),Q(A,Vp.EventType.MESSAGE,ye=>{var ke;if(!O){const Be=ye.data[0];st(!!Be);const bt=Be,xt=bt.error||(null===(ke=bt[0])||void 0===ke?void 0:ke.error);if(xt){Me("Connection","WebChannel received error:",xt);const In=xt.status;let Pt=function(xa){const _w=cr[xa];if(void 0!==_w)return YI(_w)}(In),Bn=xt.message;void 0===Pt&&(Pt=le.INTERNAL,Bn="Unknown error status: "+In+" with message "+xt.message),O=!0,K.Fi(new Ae(Pt,Bn)),A.close()}else Me("Connection","WebChannel received:",Be),K.Oi(Be)}}),Q(p,DI.STAT_EVENT,ye=>{ye.stat===TI.PROXY?Me("Connection","Detected buffering proxy"):ye.stat===TI.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{K.$i()},0),K}}function fg(){return"undefined"!=typeof window?window:null}function ky(){return"undefined"!=typeof document?document:null}function pg(n){return new vE(n,!0)}class Fy{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Oe=e,this.timerId=t,this.Wi=s,this.Gi=a,this.zi=l,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),s=Math.max(0,Date.now()-this.Yi),a=Math.max(0,t-s);a>0&&Me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,a,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class YE{constructor(e,t,s,a,l,p,_,I){this.Oe=e,this.nr=s,this.sr=a,this.ir=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=_,this.listener=I,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new Fy(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,me.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,me.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var s=this;return(0,me.Z)(function*(){s.yr(),s.pr(),s.ur.cancel(),s.rr++,4!==e?s.ur.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),s.ur.Xi()):t&&t.code===le.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Tr(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.rr===t&&this.Ir(s,a)},s=>{e(()=>{const a=new Ae(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Ar(a)})})}Ir(e,t){const s=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{s(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(a=>{s(()=>this.Ar(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}dr(){var e=this;this.state=5,this.ur.Zi((0,me.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QE extends YE{constructor(e,t,s,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.k=l}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(I=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===I?1:"REMOVE"===I?2:"CURRENT"===I?3:"RESET"===I?4:Je(),a=e.targetChange.targetIds||[],l=function(I,A){return I.C?(st(void 0===A||"string"==typeof A),Er.fromBase64String(A||"")):(st(void 0===A||A instanceof Uint8Array),Er.fromUint8Array(A||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,_=p&&function(I){const A=void 0===I.code?le.UNKNOWN:YI(I.code);return new Ae(A,I.message||"")}(p);t=new vy(s,a,l,_||null)}else if("documentChange"in e){const s=e.documentChange,a=Ia(n,s.document.name),l=Yr(s.document.updateTime),p=new Kr({mapValue:{fields:s.document.fields}}),_=hn.newFoundDocument(a,l,p);t=new ng(s.targetIds||[],s.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const s=e.documentDelete,a=Ia(n,s.document),l=s.readTime?Yr(s.readTime):It.min(),p=hn.newNoDocument(a,l);t=new ng([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=Ia(n,s.document);t=new ng([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Je();{const s=e.filter,l=new $T(s.count||0);t=new yE(s.targetId,l)}}var I;return t}(this.k,e),s=function(a){if(!("targetChange"in a))return It.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?It.min():l.readTime?Yr(l.readTime):It.min()}(e);return this.listener.Pr(t,s)}br(e){const t={};t.database=Fc(this.k),t.addTarget=function(a,l){let p;const _=l.target;return p=Hh(_)?{documents:bE(a,_)}:{query:CE(a,_)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?p.resumeToken=EE(a,l.resumeToken):l.snapshotVersion.compareTo(It.min())>0&&(p.readTime=Ey(a,l.snapshotVersion.toTimestamp())),p}(this.k,e);const s=function(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Je()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.gr(t)}vr(e){const t={};t.database=Fc(this.k),t.removeTarget=e,this.gr(t)}}class jb extends YE{constructor(e,t,s,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.k=l,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(st(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(st(void 0!==e),n.map(t=>function(s,a){let l=Yr(s.updateTime?s.updateTime:a);return l.isEqual(It.min())&&(l=Yr(a)),new BT(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Yr(e.commitTime);return this.listener.Cr(s,t)}return st(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Fc(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>wy(this.k,s))};this.gr(t)}}class Bb extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=s,this.k=a,this.$r=!1}Fr(){if(this.$r)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,s){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.ir.Bi(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(le.UNKNOWN,a.toString())})}ji(e,t,s){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.ir.ji(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(le.UNKNOWN,a.toString())})}terminate(){this.$r=!0}}class mS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(vr(t),this.Lr=!1):Me("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class yS{constructor(e,t,s,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=l,this.Hr.Ei(_=>{s.enqueueAndForget((0,me.Z)(function*(){var I;ro(p)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(I=(0,me.Z)(function*(A){const M=Fe(A);M.Gr.add(4),yield od(M),M.Jr.set("Unknown"),M.Gr.delete(4),yield df(M)}),function(A){return I.apply(this,arguments)})(p))}))}),this.Jr=new mS(s,a)}}function df(n){return JE.apply(this,arguments)}function JE(){return(JE=(0,me.Z)(function*(n){if(ro(n))for(const e of n.zr)yield e(!0)})).apply(this,arguments)}function od(n){return hf.apply(this,arguments)}function hf(){return(hf=(0,me.Z)(function*(n){for(const e of n.zr)yield e(!1)})).apply(this,arguments)}function ad(n,e){const t=Fe(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),$c(t)?Ta(t):Hc(t).lr()&&ud(t,e))}function Ly(n,e){const t=Fe(n),s=Hc(t);t.Wr.delete(e),s.lr()&&Qt(t,e),0===t.Wr.size&&(s.lr()?s._r():ro(t)&&t.Jr.set("Unknown"))}function ud(n,e){n.Yr.X(e.targetId),Hc(n).br(e)}function Qt(n,e){n.Yr.X(e),Hc(n).vr(e)}function Ta(n){n.Yr=new Ql({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),Hc(n).start(),n.Jr.Br()}function $c(n){return ro(n)&&!Hc(n).hr()&&n.Wr.size>0}function ro(n){return 0===Fe(n).Gr.size}function _S(n){n.Yr=void 0}function pt(n){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,me.Z)(function*(n){n.Wr.forEach((e,t)=>{ud(n,e)})})).apply(this,arguments)}function XE(n,e){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,me.Z)(function*(n,e){_S(n),$c(n)?(n.Jr.Kr(e),Ta(n)):n.Jr.set("Unknown")})).apply(this,arguments)}function Px(n,e,t){return Vy.apply(this,arguments)}function Vy(){return(Vy=(0,me.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof vy&&2===e.state&&e.cause)try{yield(s=(0,me.Z)(function*(a,l){const p=l.cause;for(const _ of l.targetIds)a.Wr.has(_)&&(yield a.remoteSyncer.rejectListen(_,p),a.Wr.delete(_),a.Yr.removeTarget(_))}),function(a,l){return s.apply(this,arguments)})(n,e)}catch(s){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield gg(n,s)}else if(e instanceof ng?n.Yr.ot(e):e instanceof yE?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(It.min()))try{const s=yield Pb(n.localStore);t.compareTo(s)>=0&&(yield function(a,l){const p=a.Yr.gt(l);return p.targetChanges.forEach((_,I)=>{if(_.resumeToken.approximateByteSize()>0){const A=a.Wr.get(I);A&&a.Wr.set(I,A.withResumeToken(_.resumeToken,l))}}),p.targetMismatches.forEach(_=>{const I=a.Wr.get(_);if(!I)return;a.Wr.set(_,I.withResumeToken(Er.EMPTY_BYTE_STRING,I.snapshotVersion)),Qt(a,_);const A=new Ca(I.target,_,1,I.sequenceNumber);ud(a,A)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(s){Me("RemoteStore","Failed to raise snapshot:",s),yield gg(n,s)}var s})).apply(this,arguments)}function gg(n,e,t){return $b.apply(this,arguments)}function $b(){return($b=(0,me.Z)(function*(n,e,t){if(!ed(e))throw e;n.Gr.add(1),yield od(n),n.Jr.set("Offline"),t||(t=()=>Pb(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield df(n)}))})).apply(this,arguments)}function Hb(n,e){return e().catch(t=>gg(n,t,e))}function ff(n){return es.apply(this,arguments)}function es(){return(es=(0,me.Z)(function*(n){const e=Fe(n),t=ku(e);let s=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;kn(e);)try{const a=yield aS(e.localStore,s);if(null===a){0===e.Qr.length&&t._r();break}s=a.batchId,$o(e,a)}catch(a){yield gg(e,a)}e0(e)&&Gb(e)})).apply(this,arguments)}function kn(n){return ro(n)&&n.Qr.length<10}function $o(n,e){n.Qr.push(e);const t=ku(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function e0(n){return ro(n)&&!ku(n).hr()&&n.Qr.length>0}function Gb(n){ku(n).start()}function Wb(n){return mg.apply(this,arguments)}function mg(){return(mg=(0,me.Z)(function*(n){ku(n).kr()})).apply(this,arguments)}function pf(n){return cd.apply(this,arguments)}function cd(){return(cd=(0,me.Z)(function*(n){const e=ku(n);for(const t of n.Qr)e.Dr(t.mutations)})).apply(this,arguments)}function vS(n,e,t){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,me.Z)(function*(n,e,t){const s=n.Qr.shift(),a=AE.from(s,e,t);yield Hb(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield ff(n)})).apply(this,arguments)}function ES(n,e){return Uy.apply(this,arguments)}function Uy(){return(Uy=(0,me.Z)(function*(n,e){var t;e&&ku(n).Sr&&(yield(t=(0,me.Z)(function*(s,a){if(ZI(l=a.code)&&l!==le.ABORTED){const p=s.Qr.shift();ku(s).wr(),yield Hb(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield ff(s)}var l}),function(s,a){return t.apply(this,arguments)})(n,e)),e0(n)&&Gb(n)})).apply(this,arguments)}function yg(n,e){return ld.apply(this,arguments)}function ld(){return(ld=(0,me.Z)(function*(n,e){const t=Fe(n);e?(t.Gr.delete(2),yield df(t)):e||(t.Gr.add(2),yield od(t),t.Jr.set("Unknown"))})).apply(this,arguments)}function Hc(n){return n.Xr||(n.Xr=function(e,t,s){const a=Fe(e);return a.Fr(),new QE(t,a.ir,a.authCredentials,a.appCheckCredentials,a.k,s)}(n.datastore,n.asyncQueue,{Di:pt.bind(null,n),Ni:XE.bind(null,n),Pr:Px.bind(null,n)}),n.zr.push(function(){var e=(0,me.Z)(function*(t){t?(n.Xr.wr(),$c(n)?Ta(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),_S(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function ku(n){return n.Zr||(n.Zr=function(e,t,s){const a=Fe(e);return a.Fr(),new jb(t,a.ir,a.authCredentials,a.appCheckCredentials,a.k,s)}(n.datastore,n.asyncQueue,{Di:Wb.bind(null,n),Ni:ES.bind(null,n),Nr:pf.bind(null,n),Cr:vS.bind(null,n)}),n.zr.push(function(){var e=(0,me.Z)(function*(t){t?(n.Zr.wr(),yield ff(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class Gc{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,l){const p=Date.now()+s,_=new Gc(e,t,p,a,l);return _.start(s),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gf(n,e){if(vr("AsyncQueue",`${e}: ${n}`),ed(n))return new Ae(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Fu{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ze.comparator(t.key,s.key):(t,s)=>Ze.comparator(t.key,s.key),this.keyedMap=gE(),this.sortedSet=new Ir(this.comparator)}static emptySet(e){return new Fu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Fu;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class t0{constructor(){this.eo=new Ir(Ze.comparator)}track(e){const t=e.doc.key,s=this.eo.get(t);s?0!==e.type&&3===s.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==s.type?this.eo=this.eo.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.eo=this.eo.remove(t):1===e.type&&2===s.type?this.eo=this.eo.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Je():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,s)=>{e.push(s)}),e}}class dd{constructor(e,t,s,a,l,p,_,I){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=_,this.excludesMetadataChanges=I}static fromInitialDocuments(e,t,s,a){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new dd(e,t,Fu.emptySet(t),l,s,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class qb{constructor(){this.so=void 0,this.listeners=[]}}class jy{constructor(){this.queries=new Bo(e=>uE(e),hy),this.onlineState="Unknown",this.io=new Set}}function n0(n,e){return _g.apply(this,arguments)}function _g(){return(_g=(0,me.Z)(function*(n,e){const t=Fe(n),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new qb),a)try{l.so=yield t.onListen(s)}catch(p){const _=gf(p,`Initialization of query '${fy(e.query)}' failed`);return void e.onError(_)}t.queries.set(s,l),l.listeners.push(e),e.ro(t.onlineState),l.so&&e.oo(l.so)&&Kb(t)})).apply(this,arguments)}function vg(n,e){return zb.apply(this,arguments)}function zb(){return(zb=(0,me.Z)(function*(n,e){const t=Fe(n),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)})).apply(this,arguments)}function Ox(n,e){const t=Fe(n);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const _ of p.listeners)_.oo(a)&&(s=!0);p.so=a}}s&&Kb(t)}function dt(n,e,t){const s=Fe(n),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function Kb(n){n.io.forEach(e=>{e.next()})}class hd{constructor(e,t,s){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=s||{}}oo(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new dd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class wS{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class Zb{constructor(e){this.k=e}Hn(e){return Ia(this.k,e)}Jn(e){return e.metadata.exists?qT(this.k,e.document,!1):hn.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return Yr(e)}}class IS{constructor(e,t,s){this.mo=e,this.localStore=t,this.k=s,this.queries=[],this.documents=[],this.progress=bS(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,s=new Zb(this.k);for(const a of e)if(a.metadata.queries){const l=s.Hn(a.metadata.name);for(const p of a.metadata.queries){const _=(t.get(p)||Xt()).add(l);t.set(p,_)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function(n,e,t,s){return Py.apply(this,arguments)}(e.localStore,new Zb(e.k),e.documents,e.mo.id),s=e.po(e.documents);for(const a of e.queries)yield Oy(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",new iS(Object.assign({},e.progress),t)})()}}function bS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class CS{constructor(e){this.key=e}}class Yb{constructor(e){this.key=e}}class Jr{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=Xt(),this.mutatedKeys=Xt(),this.Ao=$I(e),this.Ro=new Fu(this.Ao)}get Po(){return this.To}bo(e,t){const s=t?t.vo:new t0,a=t?t.Ro:this.Ro;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,_=!1;const I=Zp(this.query)&&a.size===this.query.limit?a.last():null,A=Yp(this.query)&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((M,O)=>{const K=a.get(M),Q=Ki(this.query,O)?O:null,ye=!!K&&this.mutatedKeys.has(K.key),ke=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let Be=!1;K&&Q?K.data.isEqual(Q.data)?ye!==ke&&(s.track({type:3,doc:Q}),Be=!0):this.Vo(K,Q)||(s.track({type:2,doc:Q}),Be=!0,(I&&this.Ao(Q,I)>0||A&&this.Ao(Q,A)<0)&&(_=!0)):!K&&Q?(s.track({type:0,doc:Q}),Be=!0):K&&!Q&&(s.track({type:1,doc:K}),Be=!0,(I||A)&&(_=!0)),Be&&(Q?(p=p.add(Q),l=ke?l.add(M):l.delete(M)):(p=p.delete(M),l=l.delete(M)))}),Zp(this.query)||Yp(this.query))for(;p.size>this.query.limit;){const M=Zp(this.query)?p.last():p.first();p=p.delete(M.key),l=l.delete(M.key),s.track({type:1,doc:M})}return{Ro:p,vo:s,Bn:_,mutatedKeys:l}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const l=e.vo.no();l.sort((A,M)=>function(O,K){const Q=ye=>{switch(ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return Q(O)-Q(K)}(A.type,M.type)||this.Ao(A.doc,M.doc)),this.So(s);const p=t?this.Do():[],_=0===this.Io.size&&this.current?1:0,I=_!==this.Eo;return this.Eo=_,0!==l.length||I?{snapshot:new dd(this.query,e.Ro,a,l,e.mutatedKeys,0===_,I,!1),Co:p}:{Co:p}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new t0,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=Xt(),this.Ro.forEach(s=>{this.No(s.key)&&(this.Io=this.Io.add(s.key))});const t=[];return e.forEach(s=>{this.Io.has(s)||t.push(new Yb(s))}),this.Io.forEach(s=>{e.has(s)||t.push(new CS(s))}),t}ko(e){this.To=e.zn,this.Io=Xt();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return dd.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class DS{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class TS{constructor(e){this.key=e,this.$o=!1}}class r0{constructor(e,t,s,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.Fo={},this.Oo=new Bo(_=>uE(_),hy),this.Mo=new Map,this.Lo=new Set,this.Bo=new Ir(Ze.comparator),this.Uo=new Map,this.qo=new $E,this.Ko={},this.jo=new Map,this.Qo=jc.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function SS(n,e){return s0.apply(this,arguments)}function s0(){return(s0=(0,me.Z)(function*(n,e){const t=Wc(n);let s,a;const l=t.Oo.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.xo();else{const p=yield uf(t.localStore,Js(e)),_=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield o0(t,e,s,"current"===_),t.isPrimaryClient&&ad(t.remoteStore,p)}return a})).apply(this,arguments)}function o0(n,e,t,s){return a0.apply(this,arguments)}function a0(){return(a0=(0,me.Z)(function*(n,e,t,s){n.Go=(M,O,K)=>{return(Q=(0,me.Z)(function*(ye,ke,Be,bt){let xt=ke.view.bo(Be);xt.Bn&&(xt=yield cg(ye.localStore,ke.query,!1).then(({documents:Bn})=>ke.view.bo(Bn,xt)));const In=bt&&bt.targetChanges.get(ke.targetId),Pt=ke.view.applyChanges(xt,ye.isPrimaryClient,In);return pd(ye,ke.targetId,Pt.Co),Pt.snapshot}),function(ye,ke,Be,bt){return Q.apply(this,arguments)})(n,M,O,K);var Q};const a=yield cg(n.localStore,e,!0),l=new Jr(e,a.zn),p=l.bo(a.documents),_=Yh.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState),I=l.applyChanges(p,n.isPrimaryClient,_);pd(n,t,I.Co);const A=new DS(e,t,l);return n.Oo.set(e,A),n.Mo.has(t)?n.Mo.get(t).push(e):n.Mo.set(t,[e]),I.snapshot})).apply(this,arguments)}function AS(n,e){return u0.apply(this,arguments)}function u0(){return(u0=(0,me.Z)(function*(n,e){const t=Fe(n),s=t.Oo.get(e),a=t.Mo.get(s.targetId);if(a.length>1)return t.Mo.set(s.targetId,a.filter(l=>!hy(l,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield id(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Ly(t.remoteStore,s.targetId),mf(t,s.targetId)}).catch(nd))):(mf(t,s.targetId),yield id(t.localStore,s.targetId,!0))})).apply(this,arguments)}function l0(){return(l0=(0,me.Z)(function*(n,e,t){const s=Fr(n);try{const a=yield function(l,p){const _=Fe(l),I=Qn.now(),A=p.reduce((O,K)=>O.add(K.key),Xt());let M;return _.persistence.runTransaction("Locally write mutations","readwrite",O=>_.Wn.vn(O,A).next(K=>{M=K;const Q=[];for(const ye of p){const ke=zI(ye,M.get(ye.key));null!=ke&&Q.push(new Su(ye.key,ke,tE(ke.value.mapValue),Jn.exists(!0)))}return _.An.addMutationBatch(O,I,Q,p)})).then(O=>(O.applyToLocalDocumentSet(M),{batchId:O.batchId,changes:M}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,p,_){let I=l.Ko[l.currentUser.toKey()];I||(I=new Ir(Mt)),I=I.insert(p,_),l.Ko[l.currentUser.toKey()]=I}(s,a.batchId,t),yield Lu(s,a.changes),yield ff(s.remoteStore)}catch(a){const l=gf(a,"Failed to persist write");t.reject(l)}})).apply(this,arguments)}function Qb(n,e){return By.apply(this,arguments)}function By(){return(By=(0,me.Z)(function*(n,e){const t=Fe(n);try{const s=yield Rx(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.Uo.get(l);p&&(st(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.$o=!0:a.modifiedDocuments.size>0?st(p.$o):a.removedDocuments.size>0&&(st(p.$o),p.$o=!1))}),yield Lu(t,s,e)}catch(s){yield nd(s)}})).apply(this,arguments)}function $y(n,e,t){const s=Fe(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.Oo.forEach((l,p)=>{const _=p.view.ro(e);_.snapshot&&a.push(_.snapshot)}),function(l,p){const _=Fe(l);_.onlineState=p;let I=!1;_.queries.forEach((A,M)=>{for(const O of M.listeners)O.ro(p)&&(I=!0)}),I&&Kb(_)}(s.eventManager,e),a.length&&s.Fo.Pr(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function xS(n,e,t){return Jb.apply(this,arguments)}function Jb(){return(Jb=(0,me.Z)(function*(n,e,t){const s=Fe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Uo.get(e),l=a&&a.key;if(l){let p=new Ir(Ze.comparator);p=p.insert(l,hn.newNoDocument(l,It.min()));const _=Xt().add(l),I=new Zh(It.min(),new Map,new jn(Mt),p,_);yield Qb(s,I),s.Bo=s.Bo.remove(l),s.Uo.delete(e),Hy(s)}else yield id(s.localStore,e,!1).then(()=>mf(s,e,t)).catch(nd)})).apply(this,arguments)}function RS(n,e){return d0.apply(this,arguments)}function d0(){return(d0=(0,me.Z)(function*(n,e){const t=Fe(n),s=e.batch.batchId;try{const a=yield Mb(t.localStore,e);p0(t,s,null),fd(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Lu(t,a)}catch(a){yield nd(a)}})).apply(this,arguments)}function NS(n,e,t){return h0.apply(this,arguments)}function h0(){return(h0=(0,me.Z)(function*(n,e,t){const s=Fe(n);try{const a=yield function(l,p){const _=Fe(l);return _.persistence.runTransaction("Reject batch","readwrite-primary",I=>{let A;return _.An.lookupMutationBatch(I,p).next(M=>(st(null!==M),A=M.keys(),_.An.removeMutationBatch(I,M))).next(()=>_.An.performConsistencyCheck(I)).next(()=>_.Wn.vn(I,A))})}(s.localStore,e);p0(s,e,t),fd(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Lu(s,a)}catch(a){yield nd(a)}})).apply(this,arguments)}function f0(){return(f0=(0,me.Z)(function*(n,e){const t=Fe(n);ro(t.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const p=Fe(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>p.An.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===s)return void e.resolve();const a=t.jo.get(s)||[];a.push(e),t.jo.set(s,a)}catch(s){const a=gf(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}})).apply(this,arguments)}function fd(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function p0(n,e,t){const s=Fe(n);let a=s.Ko[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Ko[s.currentUser.toKey()]=a}}function mf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Mo.get(e))n.Oo.delete(s),t&&n.Fo.zo(s,t);n.Mo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(s=>{n.qo.containsKey(s)||g0(n,s)})}function g0(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(Ly(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),Hy(n))}function pd(n,e,t){for(const s of t)s instanceof CS?(n.qo.addReference(s.key,e),kx(n,s)):s instanceof Yb?(Me("SyncEngine","Document no longer in limbo: "+s.key),n.qo.removeReference(s.key,e),n.qo.containsKey(s.key)||g0(n,s.key)):Je()}function kx(n,e){const t=e.key,s=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(s)||(Me("SyncEngine","New document in limbo: "+t),n.Lo.add(s),Hy(n))}function Hy(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new Ze(Yt.fromString(e)),s=n.Qo.next();n.Uo.set(s,new TS(t)),n.Bo=n.Bo.insert(t,s),ad(n.remoteStore,new Ca(Js(Wh(t.path)),s,2,Es.I))}}function Lu(n,e,t){return m0.apply(this,arguments)}function m0(){return(m0=(0,me.Z)(function*(n,e,t){const s=Fe(n),a=[],l=[],p=[];var _;s.Oo.isEmpty()||(s.Oo.forEach((_,I)=>{p.push(s.Go(I,e,t).then(A=>{if(A){s.isPrimaryClient&&s.sharedClientState.updateQueryState(I.targetId,A.fromCache?"not-current":"current"),a.push(A);const M=jE.$n(I.targetId,A);l.push(M)}}))}),yield Promise.all(p),s.Fo.Pr(a),yield(_=(0,me.Z)(function*(I,A){const M=Fe(I);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>Te.forEach(A,K=>Te.forEach(K.kn,Q=>M.persistence.referenceDelegate.addReference(O,K.targetId,Q)).next(()=>Te.forEach(K.xn,Q=>M.persistence.referenceDelegate.removeReference(O,K.targetId,Q)))))}catch(O){if(!ed(O))throw O;Me("LocalStore","Failed to update sequence numbers: "+O)}for(const O of A){const K=O.targetId;if(!O.fromCache){const Q=M.qn.get(K),ke=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);M.qn=M.qn.insert(K,ke)}}}),function(I,A){return _.apply(this,arguments)})(s.localStore,l))})).apply(this,arguments)}function PS(n,e){return y0.apply(this,arguments)}function y0(){return(y0=(0,me.Z)(function*(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const s=yield BE(t.localStore,e);t.currentUser=e,(a=t).jo.forEach(p=>{p.forEach(_=>{_.reject(new Ae(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.jo.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Lu(t,s.Gn)}var a})).apply(this,arguments)}function OS(n,e){const t=Fe(n),s=t.Uo.get(e);if(s&&s.$o)return Xt().add(s.key);{let a=Xt();const l=t.Mo.get(e);if(!l)return a;for(const p of l){const _=t.Oo.get(p);a=a.unionWith(_.view.Po)}return a}}function Xb(n,e){return _0.apply(this,arguments)}function _0(){return(_0=(0,me.Z)(function*(n,e){const t=Fe(n),s=yield cg(t.localStore,e.query,!0),a=e.view.ko(s);return t.isPrimaryClient&&pd(t,e.targetId,a.Co),a})).apply(this,arguments)}function kS(n){return eC.apply(this,arguments)}function eC(){return(eC=(0,me.Z)(function*(n){const e=Fe(n);return Fb(e.localStore).then(t=>Lu(e,t))})).apply(this,arguments)}function Fx(n,e,t,s){return tC.apply(this,arguments)}function tC(){return(tC=(0,me.Z)(function*(n,e,t,s){const a=Fe(n),l=yield function(p,_){const I=Fe(p),A=Fe(I.An);return I.persistence.runTransaction("Lookup mutation documents","readonly",M=>A.Zt(M,_).next(O=>O?I.Wn.vn(M,O):Te.resolve(null)))}(a.localStore,e);var _;null!==l?("pending"===t?yield ff(a.remoteStore):"acknowledged"===t||"rejected"===t?(p0(a,e,s||null),fd(a,e),_=e,Fe(Fe(a.localStore).An).ee(_)):Je(),yield Lu(a,l)):Me("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function E0(){return(E0=(0,me.Z)(function*(n,e){const t=Fe(n);if(Wc(t),Fr(t),!0===e&&!0!==t.Wo){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield nC(t,s.toArray());t.Wo=!0,yield yg(t.remoteStore,!0);for(const l of a)ad(t.remoteStore,l)}else if(!1===e&&!1!==t.Wo){const s=[];let a=Promise.resolve();t.Mo.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(mf(t,p),id(t.localStore,p,!0))),Ly(t.remoteStore,p)}),yield a,yield nC(t,s),function(l){const p=Fe(l);p.Uo.forEach((_,I)=>{Ly(p.remoteStore,I)}),p.qo.hs(),p.Uo=new Map,p.Bo=new Ir(Ze.comparator)}(t),t.Wo=!1,yield yg(t.remoteStore,!1)}})).apply(this,arguments)}function nC(n,e,t){return w0.apply(this,arguments)}function w0(){return(w0=(0,me.Z)(function*(n,e,t){const s=Fe(n),a=[],l=[];for(const p of e){let _;const I=s.Mo.get(p);if(I&&0!==I.length){_=yield uf(s.localStore,Js(I[0]));for(const A of I){const M=s.Oo.get(A),O=yield Xb(s,M);O.snapshot&&l.push(O.snapshot)}}else{const A=yield kb(s.localStore,p);_=yield uf(s.localStore,A),yield o0(s,rC(A),p,!1)}a.push(_)}return s.Fo.Pr(l),a})).apply(this,arguments)}function rC(n){return iE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function FS(n){const e=Fe(n);return Fe(Fe(e.localStore).persistence).Tn()}function LS(n,e,t,s){return Gy.apply(this,arguments)}function Gy(){return(Gy=(0,me.Z)(function*(n,e,t,s){const a=Fe(n);if(a.Wo)Me("SyncEngine","Ignoring unexpected query state notification.");else if(a.Mo.has(e))switch(t){case"current":case"not-current":{const l=yield Fb(a.localStore),p=Zh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Lu(a,l,p);break}case"rejected":yield id(a.localStore,e,!0),mf(a,e,s);break;default:Je()}})).apply(this,arguments)}function I0(n,e,t){return b0.apply(this,arguments)}function b0(){return(b0=(0,me.Z)(function*(n,e,t){const s=Wc(n);if(s.Wo){for(const a of e){if(s.Mo.has(a)){Me("SyncEngine","Adding an already active target "+a);continue}const l=yield kb(s.localStore,a),p=yield uf(s.localStore,l);yield o0(s,rC(l),p.targetId,!1),ad(s.remoteStore,p)}for(const a of t)s.Mo.has(a)&&(yield id(s.localStore,a,!1).then(()=>{Ly(s.remoteStore,a),mf(s,a)}).catch(nd))}})).apply(this,arguments)}function Wc(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xS.bind(null,e),e.Fo.Pr=Ox.bind(null,e.eventManager),e.Fo.zo=dt.bind(null,e.eventManager),e}function Fr(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NS.bind(null,e),e}class io{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.k=pg(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return Ny(this.persistence,new Nb,e.initialUser,this.k)}Yo(e){return new hS(HE.ks,this.k)}Jo(e){return new hg}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Wy extends io{constructor(e,t,s){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,me.Z)(function*(){yield t().call(s,e),yield function(n){return cf.apply(this,arguments)}(s.localStore),yield s.ta.initialize(s,e),yield Fr(s.ta.syncEngine),yield ff(s.ta.remoteStore),yield s.persistence.sn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Zo(e){return Ny(this.persistence,new Nb,e.initialUser,this.k)}Xo(e){return new Sb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=UE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Ji.withCacheSize(this.cacheSizeBytes):Ji.DEFAULT;return new xy(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,fg(),ky(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new hg}}class VS extends Wy{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,me.Z)(function*(){yield t().call(s,e);const a=s.ta.syncEngine;s.sharedClientState instanceof KE&&(s.sharedClientState.syncEngine={mi:Fx.bind(null,a),gi:LS.bind(null,a),yi:I0.bind(null,a),Tn:FS.bind(null,a),_i:kS.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.sn(function(){var l=(0,me.Z)(function*(p){yield function(n,e){return E0.apply(this,arguments)}(s.ta.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):p||s.gcScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}Jo(e){const t=fg();if(!KE.bt(t))throw new Ae(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=UE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new KE(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class qy{initialize(e,t){var s=this;return(0,me.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>$y(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=PS.bind(null,s.syncEngine),yield yg(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new jy}createDatastore(e){const t=pg(e.databaseInfo.databaseId),s=new gS(e.databaseInfo);return new Bb(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=_=>$y(this.syncEngine,_,0),p=ZE.bt()?new ZE:new sd,new yS(t,s,a,l,p);var t,s,a,l,p}createSyncEngine(e,t){return function(s,a,l,p,_,I,A){const M=new r0(s,a,l,p,_,I);return A&&(M.Wo=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const s=Fe(t);Me("RemoteStore","RemoteStore shutting down."),s.Gr.add(5),yield od(s),s.Hr.shutdown(),s.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function C0(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class US{constructor(e,t){this.sa=e,this.k=t,this.metadata=new Pr,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(s=>{s&&s._o()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,me.Z)(function*(){const t=yield e.oa();if(null===t)return null;const s=e.ia.decode(t),a=Number(s);isNaN(a)&&e.aa(`length string (${s}) is not valid number`);const l=yield e.ca(a);return new wS(JSON.parse(l),t.length+a)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,me.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}ca(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const s=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,me.Z)(function*(){const t=yield e.sa.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class jS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,me.Z)(function*(l,p){const _=Fe(l),I=Fc(_.k)+"/documents",A={documents:p.map(Q=>rg(_.k,Q))},M=yield _.ji("BatchGetDocuments",I,A),O=new Map;M.forEach(Q=>{const ye=function(n,e){return"found"in e?function(t,s){st(!!s.found);const a=Ia(t,s.found.name),l=Yr(s.found.updateTime),p=new Kr({mapValue:{fields:s.found.fields}});return hn.newFoundDocument(a,l,p)}(n,e):"missing"in e?function(t,s){st(!!s.missing),st(!!s.readTime);const a=Ia(t,s.missing),l=Yr(s.readTime);return hn.newNoDocument(a,l)}(n,e):Je()}(_.k,Q);O.set(ye.key.toString(),ye)});const K=[];return p.forEach(Q=>{const ye=O.get(Q.toString());st(!!ye),K.push(ye)}),K}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new eg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=Ze.fromPath(a);e.mutations.push(new pE(l,e.precondition(l)))}),yield(s=(0,me.Z)(function*(a,l){const p=Fe(a),_=Fc(p.k)+"/documents",I={writes:l.map(A=>wy(p.k,A))};yield p.Bi("Commit",_,I)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=It.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Ae(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Jn.updateTime(t):Jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Ae(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jn.updateTime(t)}return Jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class BS{constructor(e,t,s,a){this.asyncQueue=e,this.datastore=t,this.updateFunction=s,this.deferred=a,this.la=5,this.ur=new Fy(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,me.Z)(function*(){const t=new jS(e.datastore),s=e.da(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.wa(l)}))}).catch(a=>{e.wa(a)})}))}da(e){try{const t=this.updateFunction(e);return!Cu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ZI(t)}return!1}}class sC{constructor(e,t,s,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=zr.UNAUTHENTICATED,this.clientId=xI.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,me.Z)(function*(_){Me("FirestoreClient","Received user=",_.uid),yield l.authCredentialListener(_),l.user=_});return function(_){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=gf(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function oC(n,e){return aC.apply(this,arguments)}function aC(){return(aC=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,me.Z)(function*(l){s.isEqual(l)||(yield BE(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function uC(n,e){return D0.apply(this,arguments)}function D0(){return(D0=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qc(n);Me("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>{return(l=(0,me.Z)(function*(p,_){const I=Fe(p);I.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const A=ro(I);I.Gr.add(3),yield od(I),A&&I.Jr.set("Unknown"),yield I.remoteSyncer.handleCredentialChange(_),I.Gr.delete(3),yield df(I)}),function(p,_){return l.apply(this,arguments)})(e.remoteStore,a);var l}),n.onlineComponents=e})).apply(this,arguments)}function qc(n){return cC.apply(this,arguments)}function cC(){return(cC=(0,me.Z)(function*(n){return n.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield oC(n,new io)),n.offlineComponents})).apply(this,arguments)}function wg(n){return T0.apply(this,arguments)}function T0(){return(T0=(0,me.Z)(function*(n){return n.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield uC(n,new qy)),n.onlineComponents})).apply(this,arguments)}function $S(n){return qc(n).then(e=>e.persistence)}function zy(n){return qc(n).then(e=>e.localStore)}function lC(n){return wg(n).then(e=>e.remoteStore)}function Ig(n){return wg(n).then(e=>e.syncEngine)}function yf(n){return S0.apply(this,arguments)}function S0(){return(S0=(0,me.Z)(function*(n){const e=yield wg(n),t=e.eventManager;return t.onListen=SS.bind(null,e.syncEngine),t.onUnlisten=AS.bind(null,e.syncEngine),t})).apply(this,arguments)}function dC(n,e,t={}){const s=new Pr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(a,l,p,_,I){const A=new Eg({next:O=>{l.enqueueAndForget(()=>vg(a,M));const K=O.docs.has(p);!K&&O.fromCache?I.reject(new Ae(le.UNAVAILABLE,"Failed to get document because the client is offline.")):K&&O.fromCache&&_&&"server"===_.source?I.reject(new Ae(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(O)},error:O=>I.reject(O)}),M=new hd(Wh(p.path),A,{includeMetadataChanges:!0,wo:!0});return n0(a,M)}(yield yf(n),n.asyncQueue,e,t,s)})),s.promise}function hC(n,e,t={}){const s=new Pr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(a,l,p,_,I){const A=new Eg({next:O=>{l.enqueueAndForget(()=>vg(a,M)),O.fromCache&&"server"===_.source?I.reject(new Ae(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(O)},error:O=>I.reject(O)}),M=new hd(p,A,{includeMetadataChanges:!0,wo:!0});return n0(a,M)}(yield yf(n),n.asyncQueue,e,t,s)})),s.promise}class pC{constructor(e,t,s,a,l,p,_,I){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=_,this.useFetchStreams=I}}class gd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gd&&e.projectId===this.projectId&&e.database===this.database}}const A0=new Map;function Ky(n,e,t){if(!t)throw new Ae(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function x0(n,e,t,s){if(!0===e&&!0===s)throw new Ae(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gC(n){if(!Ze.isDocumentKey(n))throw new Ae(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function R0(n){if(Ze.isDocumentKey(n))throw new Ae(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Je()}function Ht(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zy(n);throw new Ae(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mC(n,e){if(e<=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class yC{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,x0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vu{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yC({}),this._settingsFrozen=!1,e instanceof gd?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Ae(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gd(a.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yC(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Zv;switch(t.type){case"gapi":const s=t.client;return st(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new Dx(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=A0.get(e);t&&(Me("ComponentProvider","Removing Datastore"),A0.delete(e),t.terminate())}(this),Promise.resolve()}}class En{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class Lr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Lr(this.firestore,e,this._query)}}class br extends Lr{constructor(e,t,s){super(e,t,Wh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new Ze(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function _C(n,e,...t){if(n=(0,Nt.m9)(n),Ky("collection","path",e),n instanceof Vu){const s=Yt.fromString(e,...t);return R0(s),new br(n,null,s)}{if(!(n instanceof En||n instanceof br))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Yt.fromString(e,...t));return R0(s),new br(n.firestore,null,s)}}function Qy(n,e,...t){if(n=(0,Nt.m9)(n),1===arguments.length&&(e=xI.A()),Ky("doc","path",e),n instanceof Vu){const s=Yt.fromString(e,...t);return gC(s),new En(n,null,new Ze(s))}{if(!(n instanceof En||n instanceof br))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Yt.fromString(e,...t));return gC(s),new En(n.firestore,n instanceof br?n.converter:null,new Ze(s))}}function vC(n,e){return n=(0,Nt.m9)(n),e=(0,Nt.m9)(e),(n instanceof En||n instanceof br)&&(e instanceof En||e instanceof br)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ZS(n,e){return n=(0,Nt.m9)(n),e=(0,Nt.m9)(e),n instanceof Lr&&e instanceof Lr&&n.firestore===e.firestore&&hy(n._query,e._query)&&n.converter===e.converter}class N0{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new Fy(this,"async_queue_retry"),this.Ra=()=>{const t=ky();t&&Me("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=ky();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=ky();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new Pr;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,me.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!ed(t))throw t;Me("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(s=>{throw this.Ta=s,this.Ea=!1,vr("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.Ea=!1,s))));return this.ma=t,t}enqueueAfterDelay(e,t,s){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const a=Gc.createAndSchedule(this,e,t,s,l=>this.Va(l));return this.pa.push(a),a}Pa(){this.Ta&&Je()}verifyOperationInProgress(){}Sa(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function Dg(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class EC{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class wn extends Vu{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new N0,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||wC(this),this._firestoreClient.terminate()}}function Cr(n){return n._firestoreClient||wC(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wC(n){var e;const t=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new pC(n._databaseId,l,n._persistenceKey,(_=t).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var l,_;n._firestoreClient=new sC(n._authCredentials,n._appCheckCredentials,n._queue,s)}function O0(n,e,t){const s=new Pr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield oC(n,t),yield uC(n,e),s.resolve()}catch(a){if(!("FirebaseError"===(l=a).name?l.code===le.FAILED_PRECONDITION||l.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),s.reject(a)}var l})).then(()=>s.promise)}function k0(n){if(n._initialized||n._terminated)throw new Ae(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Uu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sn(Er.fromBase64String(e))}catch(t){throw new Ae(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sn(Er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class so{constructor(e){this._methodName=e}}class Jy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const eA=/^__.*__$/;class Ux{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Su(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kh(e,this.data,t,this.fieldTransforms)}}class _f{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Su(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function TC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class vf{constructor(e,t,s,a,l,p){this.settings=e,this.databaseId=t,this.k=s,this.ignoreUndefinedProperties=a,void 0===l&&this.ka(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.$a({path:s,Oa:!1});return a.Ma(e),a}La(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.$a({path:s,Oa:!1});return a.ka(),a}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return i_(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(TC(this.xa)&&eA.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class tA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=s||pg(e)}ja(e,t,s,a=!1){return new vf({xa:e,methodName:t,Ka:s,path:Or.emptyPath(),Oa:!1,qa:a},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function zc(n){const e=n._freezeSettings(),t=pg(n._databaseId);return new tA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Xy(n,e,t,s,a,l={}){const p=n.ja(l.merge||l.mergeFields?2:0,e,t,a);V0("Data must be an object, but it was:",p,s);const _=Sg(s,p);let I,A;if(l.merge)I=new Vh(p.fieldMask),A=p.fieldTransforms;else if(l.mergeFields){const M=[];for(const O of l.mergeFields){const K=Ag(e,O,t);if(!p.contains(K))throw new Ae(le.INVALID_ARGUMENT,`Field '${K}' is specified in your field mask but missing from your input data.`);B0(M,K)||M.push(K)}I=new Vh(M),A=p.fieldTransforms.filter(O=>I.covers(O.field))}else I=null,A=p.fieldTransforms;return new Ux(new Kr(_),I,A)}class Tg extends so{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tg}}function e_(n,e,t){return new vf({xa:3,Ka:e.settings.Ka,methodName:n._methodName,Oa:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class t_ extends so{_toFieldTransform(e){return new zh(e.path,new qh)}isEqual(e){return e instanceof t_}}class SC extends so{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=e_(this,e,!0),s=this.Qa.map(l=>Kc(l,t)),a=new Zl(s);return new zh(e.path,a)}isEqual(e){return this===e}}class n_ extends so{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=e_(this,e,!0),s=this.Qa.map(l=>Kc(l,t)),a=new Uo(s);return new zh(e.path,a)}isEqual(e){return this===e}}class F0 extends so{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new Yl(e.k,eo(e.k,this.Wa));return new zh(e.path,t)}isEqual(e){return this===e}}function AC(n,e,t,s){const a=n.ja(1,e,t);V0("Data must be an object, but it was:",a,s);const l=[],p=Kr.empty();ql(s,(I,A)=>{const M=j0(e,I,t);A=(0,Nt.m9)(A);const O=a.La(M);if(A instanceof Tg)l.push(M);else{const K=Kc(A,O);null!=K&&(l.push(M),p.set(M,K))}});const _=new Vh(l);return new _f(p,_,a.fieldTransforms)}function r_(n,e,t,s,a,l){const p=n.ja(1,e,t),_=[Ag(e,s,t)],I=[a];if(l.length%2!=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let K=0;K<l.length;K+=2)_.push(Ag(e,l[K])),I.push(l[K+1]);const A=[],M=Kr.empty();for(let K=_.length-1;K>=0;--K)if(!B0(A,_[K])){const Q=_[K];let ye=I[K];ye=(0,Nt.m9)(ye);const ke=p.La(Q);if(ye instanceof Tg)A.push(Q);else{const Be=Kc(ye,ke);null!=Be&&(A.push(Q),M.set(Q,Be))}}const O=new Vh(A);return new _f(M,O,p.fieldTransforms)}function xC(n,e,t,s=!1){return Kc(t,n.ja(s?4:3,e))}function Kc(n,e){if(L0(n=(0,Nt.m9)(n)))return V0("Unsupported field value:",e,n),Sg(n,e);if(n instanceof so)return function(t,s){if(!TC(s.xa))throw s.Ua(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Ua(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const p of t){let _=Kc(p,s.Ba(l));null==_&&(_={nullValue:"NULL_VALUE"}),a.push(_),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,Nt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return eo(s.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Qn.fromDate(t);return{timestampValue:Ey(s.k,a)}}if(t instanceof Qn){const a=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ey(s.k,a)}}if(t instanceof Jy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sn)return{bytesValue:EE(s.k,t._byteString)};if(t instanceof En){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s.Ua(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:tt(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.Ua(`Unsupported field value: ${Zy(t)}`)}(n,e)}function Sg(n,e){const t={};return RI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ql(n,(s,a)=>{const l=Kc(a,e.Fa(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function L0(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof Jy||n instanceof Sn||n instanceof En||n instanceof so)}function V0(n,e,t){if(!L0(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Zy(t);throw e.Ua("an object"===s?n+" a custom object":n+" "+s)}var s}function Ag(n,e,t){if((e=(0,Nt.m9)(e))instanceof Uu)return e._internalPath;if("string"==typeof e)return j0(n,e);throw i_("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const U0=new RegExp("[~\\*/\\[\\]]");function j0(n,e,t){if(e.search(U0)>=0)throw i_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Uu(...e.split("."))._internalPath}catch(s){throw i_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function i_(n,e,t,s,a){const l=s&&!s.isEmpty(),p=void 0!==a;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let I="";return(l||p)&&(I+=" (found",l&&(I+=` in field ${s}`),p&&(I+=` in document ${a}`),I+=")"),new Ae(le.INVALID_ARGUMENT,_+n+I)}function B0(n,e){return n.some(t=>t.isEqual(e))}class Ef{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new RC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(s_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class RC extends Ef{data(){return super.data()}}function s_(n,e){return"string"==typeof e?j0(n,e):e instanceof Uu?e._internalPath:e._delegate._internalPath}class Zc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sa extends Ef{constructor(e,t,s,a,l,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(s_("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class xg extends Sa{data(e={}){return super.data(e)}}class Yc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Zc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new xg(this._firestore,this._userDataWriter,s.key,s,new Zc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new xg(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Zc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const _=new xg(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Zc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let I=-1,A=-1;return 0!==p.type&&(I=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),A=l.indexOf(p.doc.key)),{type:NC(p.type),doc:_,oldIndex:I,newIndex:A}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function NC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function MC(n,e){return n instanceof Sa&&e instanceof Sa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Yc&&e instanceof Yc&&n._firestore===e._firestore&&ZS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function $0(n){if(Yp(n)&&0===n.explicitOrderBy.length)throw new Ae(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wf{}function ju(n,...e){for(const t of e)n=t._apply(n);return n}class PC extends wf{constructor(e,t,s){super(),this.Ga=e,this.za=t,this.Ha=s,this.type="where"}_apply(e){const t=zc(e.firestore),s=function(a,l,p,_,I,A,M){let O;if(I.isKeyField()){if("array-contains"===A||"array-contains-any"===A)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on FieldPath.documentId().`);if("in"===A||"not-in"===A){cA(M,A);const Q=[];for(const ye of M)Q.push(uA(_,a,ye));O={arrayValue:{values:Q}}}else O=uA(_,a,M)}else"in"!==A&&"not-in"!==A&&"array-contains-any"!==A||cA(M,A),O=xC(p,"where",M,"in"===A||"not-in"===A);const K=hi.create(I,A,O);return function(Q,ye){if(ye.V()){const Be=sE(Q);if(null!==Be&&!Be.isEqual(ye.field))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Be.toString()}' and '${ye.field.toString()}'`);const bt=kc(Q);null!==bt&&lA(0,ye.field,bt)}const ke=function(Be,bt){for(const xt of Be.filters)if(bt.indexOf(xt.op)>=0)return xt.op;return null}(Q,function(Be){switch(Be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ye.op));if(null!==ke)throw new Ae(le.INVALID_ARGUMENT,ke===ye.op?`Invalid query. You cannot use more than one '${ye.op.toString()}' filter.`:`Invalid query. You cannot use '${ye.op.toString()}' filters with '${ke.toString()}' filters.`)}(a,K),K}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new Lr(e.firestore,e.converter,function(a,l){const p=a.filters.concat([l]);return new Tu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),p,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}class rA extends wf{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new Gh(a,l);return function(_,I){if(null===kc(_)){const A=sE(_);null!==A&&lA(0,A,I.field)}}(s,p),p}(e._query,this.Ga,this.Ja);return new Lr(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new Tu(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class H0 extends wf{constructor(e,t,s){super(),this.type=e,this.Ya=t,this.Xa=s}_apply(e){return new Lr(e.firestore,e.converter,aE(e._query,this.Ya,this.Xa))}}class sA extends wf{constructor(e,t,s){super(),this.type=e,this.Za=t,this.tc=s}_apply(e){const t=aA(e,this.type,this.Za,this.tc);return new Lr(e.firestore,e.converter,(a=t,new Tu((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class oA extends wf{constructor(e,t,s){super(),this.type=e,this.Za=t,this.tc=s}_apply(e){const t=aA(e,this.type,this.Za,this.tc);return new Lr(e.firestore,e.converter,(a=t,new Tu((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function aA(n,e,t,s){if(t[0]=(0,Nt.m9)(t[0]),t[0]instanceof Ef)return function(a,l,p,_,I){if(!_)throw new Ae(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const A=[];for(const M of Kl(a))if(M.field.isKeyField())A.push(uy(l,_.key));else{const O=_.data.field(M.field);if(MI(O))throw new Ae(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const K=M.field.canonicalString();throw new Ae(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${K}' (used as the orderBy) does not exist.`)}A.push(O)}return new zp(A,I)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=zc(n.firestore);return function(l,p,_,I,A,M){const O=l.explicitOrderBy;if(A.length>O.length)throw new Ae(le.INVALID_ARGUMENT,`Too many arguments provided to ${I}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const K=[];for(let Q=0;Q<A.length;Q++){const ye=A[Q];if(O[Q].field.isKeyField()){if("string"!=typeof ye)throw new Ae(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${I}(), but got a ${typeof ye}`);if(!oE(l)&&-1!==ye.indexOf("/"))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${I}() must be a plain document ID, but '${ye}' contains a slash.`);const ke=l.path.child(Yt.fromString(ye));if(!Ze.isDocumentKey(ke))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${I}() must result in a valid document path, but '${ke}' is not because it contains an odd number of segments.`);const Be=new Ze(ke);K.push(uy(p,Be))}else{const ke=xC(_,I,ye);K.push(ke)}}return new zp(K,M)}(n._query,n.firestore._databaseId,a,e,t,s)}}function uA(n,e,t){if("string"==typeof(t=(0,Nt.m9)(t))){if(""===t)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!oE(e)&&-1!==t.indexOf("/"))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Yt.fromString(t));if(!Ze.isDocumentKey(s))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return uy(n,new Ze(s))}if(t instanceof En)return uy(n,t._key);throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zy(t)}.`)}function cA(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function lA(n,e,t){if(!t.isEqual(e))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class OC{convertValue(e,t="none"){switch(Du(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Je()}}convertObject(e,t){const s={};return ql(e.fields,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new Jy(Un(e.latitude),Un(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=jh(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Bp(e));default:return null}}convertTimestamp(e){const t=zl(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Yt.fromString(e);st(ef(s));const a=new gd(s.get(1),s.get(3)),l=new Ze(s.popFirst(5));return a.isEqual(t)||vr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function G0(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class qx extends OC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}class dA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zc(e)}set(e,t,s){this._verifyNotCommitted();const a=md(e,this._firestore),l=G0(a.converter,t,s),p=Xy(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,Jn.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=md(e,this._firestore);let p;return p="string"==typeof(t=(0,Nt.m9)(t))||t instanceof Uu?r_(this._dataReader,"WriteBatch.update",l._key,t,s,a):AC(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,Jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=md(e,this._firestore);return this._mutations=this._mutations.concat(new eg(t._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function md(n,e){if((n=(0,Nt.m9)(n)).firestore!==e)throw new Ae(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class yd extends OC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}function kC(n,e,t){n=Ht(n,En);const s=Ht(n.firestore,wn),a=G0(n.converter,e,t);return If(s,[Xy(zc(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Jn.none())])}function FC(n,e,t,...s){n=Ht(n,En);const a=Ht(n.firestore,wn),l=zc(a);let p;return p="string"==typeof(e=(0,Nt.m9)(e))||e instanceof Uu?r_(l,"updateDoc",n._key,e,t,s):AC(l,"updateDoc",n._key,e),If(a,[p.toMutation(n._key,Jn.exists(!0))])}function gA(n,...e){var t,s,a;n=(0,Nt.m9)(n);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||Dg(e[p])||(l=e[p],p++);const _={includeMetadataChanges:l.includeMetadataChanges};if(Dg(e[p])){const O=e[p];e[p]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[p+1]=null===(s=O.error)||void 0===s?void 0:s.bind(O),e[p+2]=null===(a=O.complete)||void 0===a?void 0:a.bind(O)}let I,A,M;if(n instanceof En)A=Ht(n.firestore,wn),M=Wh(n._key.path),I={next:O=>{e[p]&&e[p](LC(A,n,O))},error:e[p+1],complete:e[p+2]};else{const O=Ht(n,Lr);A=Ht(O.firestore,wn),M=O._query;const K=new yd(A);I={next:Q=>{e[p]&&e[p](new Yc(A,K,O,Q))},error:e[p+1],complete:e[p+2]},$0(n._query)}return function(O,K,Q,ye){const ke=new Eg(ye),Be=new hd(K,ke,Q);return O.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return n0(yield yf(O),Be)})),()=>{ke.na(),O.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return vg(yield yf(O),Be)}))}}(Cr(A),M,_,I)}function If(n,e){return function(t,s){const a=new Pr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(n,e,t){return l0.apply(this,arguments)}(yield Ig(t),s,a)})),a.promise}(Cr(n),e)}function LC(n,e,t){const s=t.docs.get(e._key),a=new yd(n);return new Sa(n,a,e._key,s,new Zc(t.hasPendingWrites,t.fromCache),e.converter)}class mA extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=zc(e)}get(e){const t=md(e,this._firestore),s=new qx(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Je();const l=a[0];if(l.isFoundDocument())return new Ef(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Ef(this._firestore,s,t._key,null,t.converter);throw Je()})}set(e,t,s){const a=md(e,this._firestore),l=G0(a.converter,t,s),p=Xy(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const l=md(e,this._firestore);let p;return p="string"==typeof(t=(0,Nt.m9)(t))||t instanceof Uu?r_(this._dataReader,"Transaction.update",l._key,t,s,a):AC(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=md(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=md(e,this._firestore),s=new yd(this._firestore);return super.get(e).then(a=>new Sa(this._firestore,s,t._key,a._document,new Zc(!1,!1),t.converter))}}function BC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function z0(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function Rg(){if("undefined"==typeof atob)throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Wl=_a.SDK_VERSION,(0,_a._registerComponent)(new $i.wA("firestore",(t,{options:s})=>{const a=t.getProvider("app").getImmediate(),l=new wn(a,new bx(t.getProvider("auth-internal")),new AI(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC")),(0,_a.registerVersion)(MT,"3.4.0",n),(0,_a.registerVersion)(MT,"3.4.0","esm2017")}();class Cf{constructor(e){this._delegate=e}static fromBase64String(e){return Rg(),new Cf(Sn.fromBase64String(e))}static fromUint8Array(e){return z0(),new Cf(Sn.fromUint8Array(e))}toBase64(){return Rg(),this._delegate.toBase64()}toUint8Array(){return z0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $C(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of["next","error","complete"])if(s in t&&"function"==typeof t[s])return!0;return!1}(n)}class eR{enableIndexedDbPersistence(e,t){return function(n,e){k0(n=Ht(n,wn));const t=Cr(n),s=n._freezeSettings(),a=new qy;return O0(t,a,new Wy(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){k0(n=Ht(n,wn));const e=Cr(n),t=n._freezeSettings(),s=new qy;return O0(e,s,new VS(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Ae(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(s){if(!jo.bt())return Promise.resolve();const a=s+"main";yield jo.delete(a)}),function(s){return t.apply(this,arguments)})(UE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class HC{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof gd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Up("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function(n,e,t,s={}){var a;const l=(n=Ht(n,Vu))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Up("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let p,_;if("string"==typeof s.mockUserToken)p=s.mockUserToken,_=zr.MOCK_USER;else{p=(0,Nt.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new Ae(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new zr(I)}n._authCredentials=new OT(new sy(p,_))}}(this._delegate,e,t,s)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield $S(n),t=yield lC(n);return e.setNetworkEnabled(!0),function(s){const a=Fe(s);return a.Gr.delete(0),df(a)}(t)}))}(Cr(n=Ht(n,wn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield $S(n),t=yield lC(n);return e.setNetworkEnabled(!1),(s=(0,me.Z)(function*(a){const l=Fe(a);l.Gr.add(0),yield od(l),l.Jr.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Cr(n=Ht(n,wn)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,x0("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Pr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(n,e){return f0.apply(this,arguments)}(yield Ig(e),t)})),t.promise}(Cr(n=Ht(n,wn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new Eg(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return s=yield yf(n),a=t,Fe(s).io.add(a),void a.next();var s,a})),()=>{t.na(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return s=yield yf(n),a=t,void Fe(s).io.delete(a);var s,a}))}}(Cr(n=Ht(n,wn)),Dg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Mg(this,_C(this._delegate,e))}catch(t){throw Ci(t,"collection()","Firestore.collection()")}}doc(e){try{return new ts(this,Qy(this._delegate,e))}catch(t){throw Ci(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pi(this,function(n,e){if(n=Ht(n,Vu),Ky("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Lr(n,null,(t=e,new Tu(Yt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ci(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const s=yield(a=n,wg(a).then(l=>l.datastore));var a;new BS(n.asyncQueue,s,e,t).run()})),t.promise}(Cr(n=Ht(n,wn)),t=>e(new mA(n,t)))}(this._delegate,t=>e(new GC(this,t)))}batch(){return Cr(this._delegate),new EA(new dA(this._delegate,e=>If(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Cr(n=Ht(n,wn)),s=new EC;return function(n,e,t,s){const a=function(l,p){let _;return _="string"==typeof l?(new TextEncoder).encode(l):l,I=function(I,A){if(I instanceof Uint8Array)return C0(I,A);if(I instanceof ArrayBuffer)return C0(new Uint8Array(I),A);if(I instanceof ReadableStream)return I.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new US(I,p);var I}(t,pg(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function(n,e,t){const s=Fe(n);var a;(a=(0,me.Z)(function*(l,p,_){try{const I=yield p.getMetadata();if(yield function(K,Q){const ye=Fe(K),ke=Yr(Q.createTime);return ye.persistence.runTransaction("hasNewerBundle","readonly",Be=>ye.Ye.getBundleMetadata(Be,Q.id)).then(Be=>!!Be&&Be.createTime.compareTo(ke)>=0)}(l.localStore,I))return yield p.close(),void _._completeWith((K=I,{taskState:"Success",documentsLoaded:K.totalDocuments,bytesLoaded:K.totalBytes,totalDocuments:K.totalDocuments,totalBytes:K.totalBytes}));_._updateProgress(bS(I));const A=new IS(I,l.localStore,p.k);let M=yield p.Ho();for(;M;){const K=yield A.yo(M);K&&_._updateProgress(K),M=yield p.Ho()}const O=yield A.complete();yield Lu(l,O.In,void 0),yield function(K,Q){const ye=Fe(K);return ye.persistence.runTransaction("Save bundle","readwrite",ke=>ye.Ye.saveBundleMetadata(ke,Q))}(l.localStore,I),_._completeWith(O.progress)}catch(I){Up("SyncEngine",`Loading bundle failed with ${I}`),_._failWith(I)}var K}),function(l,p,_){return a.apply(this,arguments)})(s,e,t).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield Ig(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,s){const a=Fe(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Ye.getNamedQuery(l,s))}(yield zy(n),e)}))}(Cr(n=Ht(n,wn)),e).then(t=>t?new Lr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new pi(this,t):null)}}class K0 extends OC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cf(new Sn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ts.forKey(t,this.firestore,null)}}class GC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new K0(e)}get(e){const t=_d(e);return this._delegate.get(t).then(s=>new Ng(this._firestore,new Sa(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=_d(e);return s?(BC("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=_d(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=_d(e);return this._delegate.delete(t),this}}class EA{constructor(e){this._delegate=e}set(e,t,s){const a=_d(e);return s?(BC("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=_d(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=_d(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Df{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new xg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new a_(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Df.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new Df(e,new K0(e),t),a.set(t,l)),l}}Df.INSTANCES=new WeakMap;class ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new K0(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ts(t,new En(t._delegate,s,new Ze(e)))}static forKey(e,t,s){return new ts(t,new En(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Mg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Mg(this.firestore,_C(this._delegate,e))}catch(t){throw Ci(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Nt.m9)(e))instanceof En&&vC(this._delegate,e)}set(e,t){t=BC("DocumentReference.set",t);try{return t?kC(this._delegate,e,t):kC(this._delegate,e)}catch(s){throw Ci(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?FC(this._delegate,e):FC(this._delegate,e,t,...s)}catch(a){throw Ci(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return If(Ht(n.firestore,wn),[new eg(n._key,Jn.none())])}(this._delegate)}onSnapshot(...e){const t=wA(e),s=IA(e,a=>new Ng(this.firestore,new Sa(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return gA(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Ht(n,En);const e=Ht(n.firestore,wn),t=Cr(e),s=new yd(e);return function(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(s=(0,me.Z)(function*(a,l,p){try{const _=yield function(I,A){const M=Fe(I);return M.persistence.runTransaction("read document","readonly",O=>M.Wn.Rn(O,A))}(a,l);_.isFoundDocument()?p.resolve(_):_.isNoDocument()?p.resolve(null):p.reject(new Ae(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const I=gf(_,`Failed to get document '${l} from cache`);p.reject(I)}}),function(a,l,p){return s.apply(this,arguments)})(yield zy(n),e,t);var s})),t.promise}(t,n._key).then(a=>new Sa(e,s,n._key,a,new Zc(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Ht(n,En);const e=Ht(n.firestore,wn);return dC(Cr(e),n._key,{source:"server"}).then(t=>LC(e,n,t))}(this._delegate):function(n){n=Ht(n,En);const e=Ht(n.firestore,wn);return dC(Cr(e),n._key).then(t=>LC(e,n,t))}(this._delegate),t.then(s=>new Ng(this.firestore,new Sa(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new ts(this.firestore,this._delegate.withConverter(e?Df.getInstance(this.firestore,e):null))}}function Ci(n,e,t){return n.message=n.message.replace(e,t),n}function wA(n){for(const e of n)if("object"==typeof e&&!$C(e))return e;return{}}function IA(n,e){var t,s;let a;return a=$C(n[0])?n[0]:$C(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Ng{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ts(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return MC(this._delegate,e._delegate)}}class a_ extends Ng{data(e){const t=this._delegate.data(e);return function(n,e){n||Je()}(void 0!==t),t}}class pi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new K0(e)}where(e,t,s){try{return new pi(this.firestore,ju(this._delegate,function(n,e,t){const s=e,a=s_("where",n);return new PC(a,s,t)}(e,t,s)))}catch(a){throw Ci(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new pi(this.firestore,ju(this._delegate,function(n,e="asc"){const t=e,s=s_("orderBy",n);return new rA(s,t)}(e,t)))}catch(s){throw Ci(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pi(this.firestore,ju(this._delegate,function(n){return mC("limit",n),new H0("limit",n,"F")}(e)))}catch(t){throw Ci(t,"limit()","Query.limit()")}}limitToLast(e){try{return new pi(this.firestore,ju(this._delegate,function(n){return mC("limitToLast",n),new H0("limitToLast",n,"L")}(e)))}catch(t){throw Ci(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pi(this.firestore,ju(this._delegate,function(...n){return new sA("startAt",n,!0)}(...e)))}catch(t){throw Ci(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pi(this.firestore,ju(this._delegate,function(...n){return new sA("startAfter",n,!1)}(...e)))}catch(t){throw Ci(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pi(this.firestore,ju(this._delegate,function(...n){return new oA("endBefore",n,!0)}(...e)))}catch(t){throw Ci(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pi(this.firestore,ju(this._delegate,function(...n){return new oA("endAt",n,!1)}(...e)))}catch(t){throw Ci(t,"endAt()","Query.endAt()")}}isEqual(e){return ZS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Ht(n,Lr);const e=Ht(n.firestore,wn),t=Cr(e),s=new yd(e);return function(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(s=(0,me.Z)(function*(a,l,p){try{const _=yield cg(a,l,!0),I=new Jr(l,_.zn),A=I.bo(_.documents),M=I.applyChanges(A,!1);p.resolve(M.snapshot)}catch(_){const I=gf(_,`Failed to execute query '${l} against cache`);p.reject(I)}}),function(a,l,p){return s.apply(this,arguments)})(yield zy(n),e,t);var s})),t.promise}(t,n._query).then(a=>new Yc(e,s,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Ht(n,Lr);const e=Ht(n.firestore,wn),t=Cr(e),s=new yd(e);return hC(t,n._query,{source:"server"}).then(a=>new Yc(e,s,n,a))}(this._delegate):function(n){n=Ht(n,Lr);const e=Ht(n.firestore,wn),t=Cr(e),s=new yd(e);return $0(n._query),hC(t,n._query).then(a=>new Yc(e,s,n,a))}(this._delegate),t.then(s=>new WC(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=wA(e),s=IA(e,a=>new WC(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return gA(this._delegate,t,s)}withConverter(e){return new pi(this.firestore,this._delegate.withConverter(e?Df.getInstance(this.firestore,e):null))}}class bA{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new a_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class WC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new pi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new a_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bA(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new a_(this._firestore,s))})}isEqual(e){return MC(this._delegate,e._delegate)}}class Mg extends pi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ts(this.firestore,e):null}doc(e){try{return new ts(this.firestore,void 0===e?Qy(this._delegate):Qy(this._delegate,e))}catch(t){throw Ci(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Ht(n.firestore,wn),s=Qy(n),a=G0(n.converter,e);return If(t,[Xy(zc(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,Jn.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new ts(this.firestore,t))}isEqual(e){return vC(this._delegate,e._delegate)}withConverter(e){return new Mg(this.firestore,this._delegate.withConverter(e?Df.getInstance(this.firestore,e):null))}}function _d(n){return Ht(n,En)}class vd{constructor(...e){this._delegate=new Uu(...e)}static documentId(){return new vd(Or.keyField().canonicalString())}isEqual(e){return(e=(0,Nt.m9)(e))instanceof Uu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ed{constructor(e){this._delegate=e}static serverTimestamp(){const e=new t_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Ed(e)}static delete(){const e=new Tg("deleteField");return e._methodName="FieldValue.delete",new Ed(e)}static arrayUnion(...e){const t=function(...n){return new SC("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ed(t)}static arrayRemove(...e){const t=function(...n){return new n_("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ed(t)}static increment(e){const t=function(n){return new F0("increment",n)}(e);return t._methodName="FieldValue.increment",new Ed(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const CA={Firestore:HC,GeoPoint:Jy,Timestamp:Qn,Blob:Cf,Transaction:GC,WriteBatch:EA,DocumentReference:ts,DocumentSnapshot:Ng,Query:pi,QueryDocumentSnapshot:a_,QuerySnapshot:WC,CollectionReference:Mg,FieldPath:vd,FieldValue:Ed,setLogLevel:function(n){!function(n){Oc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new $i.wA("firestore-compat",t=>((e,t)=>new HC(e,t,new eR))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},CA)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.9")}(kw.Z);var TA=L(6682),Xr=L(309),SA=L(7771),Y0=L(8858);class AA extends hs.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new xA(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,s=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,l=s.length;let p;if(this.closed)throw new Co.N;if(this.isStopped||this.hasError?p=gl.w.EMPTY:(this.observers.push(e),p=new Y0.W(this,e)),a&&e.add(e=new Xr.ht(e,a)),t)for(let _=0;_<l&&!e.closed;_++)e.next(s[_]);else for(let _=0;_<l&&!e.closed;_++)e.next(s[_].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),p}_getNow(){return(this.scheduler||SA.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,s=this._windowTime,a=this._events,l=a.length;let p=0;for(;p<l&&!(e-a[p].time<s);)p++;return l>t&&(p=Math.max(p,l-t)),p>0&&a.splice(0,p),a}}class xA{constructor(e,t){this.time=e,this.value=t}}function u_(n,e,t){let s;return s=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:s}){let a,p,l=0,_=!1,I=!1;return function(M){let O;l++,!a||_?(_=!1,a=new AA(n,e,s),O=a.subscribe(this),p=M.subscribe({next(K){a.next(K)},error(K){_=!0,a.error(K)},complete(){I=!0,p=void 0,a.complete()}}),I&&(p=void 0)):O=a.subscribe(this),this.add(()=>{l--,O.unsubscribe(),O=void 0,p&&!I&&t&&0===l&&(p.unsubscribe(),p=void 0,a=void 0)})}}(s))}function Q0(n,e){return e?Mn(()=>n,e):Mn(()=>n)}var J0=L(3101);L(2329);const KC=new Map,ZC={activated:!1,tokenObservers:[]},PA={initialized:!1,enabled:!1};function Vr(n){return KC.get(n)||ZC}function oo(n,e){KC.set(n,e)}function l_(){return PA}class Og{constructor(e,t,s,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new Nt.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Nt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Di=new Nt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function kA(n){if(!Vr(n).activated)throw Di.create("use-before-activation",{appName:n.name})}function h_(n,e){return nw.apply(this,arguments)}function nw(){return(nw=(0,me.Z)(function*({url:n,body:e},t){const s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});a&&(s["X-Firebase-Client"]=a.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:s};let p,_;try{p=yield fetch(n,l)}catch(O){throw Di.create("fetch-network-error",{originalErrorMessage:O.message})}if(200!==p.status)throw Di.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(O){throw Di.create("fetch-parse-error",{originalErrorMessage:O.message})}const I=_.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw Di.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const A=1e3*Number(I[1]),M=Date.now();return{token:_.attestationToken,expireTimeMillis:M+A,issuedAtTimeMillis:M}})).apply(this,arguments)}function VA(n,e){const{projectId:t,appId:s,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const f_="firebase-app-check-store";let Tf=null;function Dr(){return Tf||(Tf=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var a;e(Di.create("storage-open",{originalErrorMessage:null===(a=s.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=s=>{const a=s.target.result;switch(s.oldVersion){case 0:a.createObjectStore(f_,{keyPath:"compositeKey"})}}}catch(t){e(Di.create("storage-open",{originalErrorMessage:t.message}))}}),Tf)}function rw(){return(rw=(0,me.Z)(function*(n,e){const s=(yield Dr()).transaction(f_,"readwrite"),l=s.objectStore(f_).put({compositeKey:n,value:e});return new Promise((p,_)=>{l.onsuccess=I=>{p()},s.onerror=I=>{var A;_(Di.create("storage-set",{originalErrorMessage:null===(A=I.target.error)||void 0===A?void 0:A.message}))}})})).apply(this,arguments)}const Sf=new mu.Yd("@firebase/app-check");function uD(n,e){return(0,Nt.hl)()?function(n,e){return function(n,e){return rw.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Sf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function m_(){return l_().enabled}function ow(){return lr.apply(this,arguments)}function lr(){return(lr=(0,me.Z)(function*(){const n=l_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const jA={error:"UNKNOWN_ERROR"};function BA(n){return Nt.US.encodeString(JSON.stringify(n),!1)}function aw(n){return Af.apply(this,arguments)}function Af(){return(Af=(0,me.Z)(function*(n,e=!1){const t=n.app;kA(t);const s=Vr(t);let l,a=s.token;if(!a){const I=yield s.cachedTokenPromise;I&&y_(I)&&(a=I)}if(!e&&a&&y_(a))return{token:a.token};let _,p=!1;if(m_()){s.exchangeTokenPromise||(s.exchangeTokenPromise=h_(VA(t,yield ow()),n.platformLoggerProvider).then(A=>(s.exchangeTokenPromise=void 0,A)),p=!0);const I=yield s.exchangeTokenPromise;return yield uD(t,I),oo(t,Object.assign(Object.assign({},s),{token:I})),{token:I.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(I=>(s.exchangeTokenPromise=void 0,I)),p=!0),a=yield s.exchangeTokenPromise}catch(I){"appCheck/throttled"===I.code?Sf.warn(I.message):Sf.error(I),l=I}return a?(_={token:a.token},oo(t,Object.assign(Object.assign({},s),{token:a})),yield uD(t,a)):_=HA(l),p&&lD(t,_),_})).apply(this,arguments)}function cD(n,e){const t=Vr(n),s=t.tokenObservers.filter(a=>a.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),oo(n,Object.assign(Object.assign({},t),{tokenObservers:s}))}function $A(n){const{app:e}=n,t=Vr(e);let s=t.tokenRefresher;s||(s=function(n){const{app:e}=n;return new Og((0,me.Z)(function*(){let s;if(s=Vr(e).token?yield aw(n,!0):yield aw(n),s.error)throw s.error}),()=>!0,()=>{const t=Vr(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n),oo(e,Object.assign(Object.assign({},t),{tokenRefresher:s}))),!s.isRunning()&&t.isTokenAutoRefreshEnabled&&s.start()}function lD(n,e){const t=Vr(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch(a){}}function y_(n){return n.expireTimeMillis-Date.now()>0}function HA(n){return{token:BA(jA),error:n}}class GA{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Vr(this.app);for(const t of e)cD(this.app,t.next);return Promise.resolve()}}const ex="app-check-internal";(0,_a._registerComponent)(new $i.wA("app-check",n=>function(n,e){return new GA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ex).initialize()})),(0,_a._registerComponent)(new $i.wA(ex,n=>function(n){return{getToken:e=>aw(n,e),addTokenListener:e=>function(n,e,t,s){const{app:a}=n,l=Vr(a),p={next:t,error:s,type:e};if(oo(a,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,p]})),l.token&&y_(l.token)){const _=l.token;Promise.resolve().then(()=>{t({token:_.token}),$A(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>$A(n))}(n,"INTERNAL",e),removeTokenListener:e=>cD(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_a.registerVersion)("@firebase/app-check","0.5.2");class fw{constructor(){return(0,$r.vb)("app-check")}}"undefined"!=typeof window&&window;var v_=L(7841);const mw=new E.OlP("angularfire2.auth.use-emulator"),CD=new E.OlP("angularfire2.auth.settings"),DD=new E.OlP("angularfire2.auth.tenant-id"),yw=new E.OlP("angularfire2.auth.langugage-code"),TD=new E.OlP("angularfire2.auth.use-device-language"),SD=new E.OlP("angularfire.auth.persistence"),AD=(n,e,t,s,a,l,p,_)=>(0,Oo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const I=e.runOutsideAngular(()=>n.auth());if(t&&I.useEmulator(...t),s&&(I.tenantId=s),I.languageCode=a,l&&I.useDeviceLanguage(),p)for(const[A,M]of Object.entries(p))I.settings[A]=M;return _&&I.setPersistence(_),I},[t,s,a,l,p,_]);let E_=(()=>{class n{constructor(t,s,a,l,p,_,I,A,M,O,K,Q){const ye=new hs.xQ,ke=(0,Qe.of)(void 0).pipe((0,Xr.QV)(p.outsideAngular),Mn(()=>l.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,941)))),(0,ut.U)(()=>(0,Oo.on)(t,l,s)),(0,ut.U)(Be=>AD(Be,l,_,A,M,O,I,K)),u_({bufferSize:1,refCount:!1}));if(Fa(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Qe.of)(null);else{ke.pipe(da()).subscribe();const bt=ke.pipe(Mn(Pt=>Pt.getRedirectResult().then(Bn=>Bn,()=>null)),$r.iC,u_({bufferSize:1,refCount:!1})),xt=ke.pipe(Mn(Pt=>new vi.y(Bn=>({unsubscribe:l.runOutsideAngular(()=>Pt.onAuthStateChanged(xa=>Bn.next(xa),xa=>Bn.error(xa),()=>Bn.complete()))})))),In=ke.pipe(Mn(Pt=>new vi.y(Bn=>({unsubscribe:l.runOutsideAngular(()=>Pt.onIdTokenChanged(xa=>Bn.next(xa),xa=>Bn.error(xa),()=>Bn.complete()))}))));this.authState=bt.pipe(Q0(xt),(0,J0.R)(p.outsideAngular),(0,Xr.QV)(p.insideAngular)),this.user=bt.pipe(Q0(In),(0,J0.R)(p.outsideAngular),(0,Xr.QV)(p.insideAngular)),this.idToken=this.user.pipe(Mn(Pt=>Pt?(0,dn.D)(Pt.getIdToken()):(0,Qe.of)(null))),this.idTokenResult=this.user.pipe(Mn(Pt=>Pt?(0,dn.D)(Pt.getIdTokenResult()):(0,Qe.of)(null))),this.credential=(0,TA.T)(bt,ye,this.authState.pipe(ps(Pt=>!Pt))).pipe((0,ut.U)(Pt=>(null==Pt?void 0:Pt.user)?Pt:null),(0,J0.R)(p.outsideAngular),(0,Xr.QV)(p.insideAngular))}return(0,Oo.pX)(this,ke,l,{spy:{apply:(Be,bt,xt)=>{(Be.startsWith("signIn")||Be.startsWith("createUser"))&&xt.then(In=>ye.next(In))}}})}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Oo.Dh),E.LFG(Oo.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG($r.HU),E.LFG(mw,8),E.LFG(CD,8),E.LFG(DD,8),E.LFG(yw,8),E.LFG(TD,8),E.LFG(SD,8),E.LFG(fw,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function xf(n,e){return function(n,e=Pw.z){return new vi.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(n,e)}function I_(n,e){return xf(n,e).pipe((0,ut.U)(t=>({payload:t,type:"query"})))}function wd(n,e){return I_(n,e).pipe(gc(void 0),ev(),(0,ut.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,_)=>{const I=a.find(M=>M.doc.ref.isEqual(p.ref)),A=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(p.ref));I&&JSON.stringify(I.doc.metadata)===JSON.stringify(p.metadata)||!I&&A&&JSON.stringify(A.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:p}})}),l}))}function b_(n,e,t){return wd(n,t).pipe(la((s,a)=>function(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Rf(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Rf(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Rf(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(l=>l.payload),e),[]),t=>t.lift(new QD(void 0,void 0)),(0,ut.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function Rf(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function RD(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ND{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=wd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ut.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(gc(void 0),ev(),ps(([s,a])=>a.length>0||!s),(0,ut.U)(([s,a])=>a),$r.iC)}auditTrail(e){return this.stateChanges(e).pipe(la((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=RD(e);return b_(this.query,t,this.afs.schedulers.outsideAngular).pipe($r.iC)}valueChanges(e={}){return I_(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),$r.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe($r.iC)}add(e){return this.ref.add(e)}doc(e){return new MD(this.ref.doc(e),this.afs)}}class MD{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=Nf(s,t);return new ND(a,l,this.afs)}snapshotChanges(){return function(n,e){return xf(n,e).pipe(gc(void 0),ev(),(0,ut.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($r.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ut.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,dn.D)(this.ref.get(e)).pipe($r.iC)}}class PD{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?wd(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),ps(t=>t.length>0),$r.iC):wd(this.query,this.afs.schedulers.outsideAngular).pipe($r.iC)}auditTrail(e){return this.stateChanges(e).pipe(la((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=RD(e);return b_(this.query,t,this.afs.schedulers.outsideAngular).pipe($r.iC)}valueChanges(e={}){return I_(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),$r.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe($r.iC)}}const OD=new E.OlP("angularfire2.enableFirestorePersistence"),kD=new E.OlP("angularfire2.firestore.persistenceSettings"),sx=new E.OlP("angularfire2.firestore.settings"),Jc=new E.OlP("angularfire2.firestore.use-emulator");function Nf(n,e=(t=>t)){return{query:e(n),ref:n}}let C_=(()=>{class n{constructor(t,s,a,l,p,_,I,A,M,O,K,Q,ye,ke,Be,bt,xt){this.schedulers=I;const In=(0,Oo.on)(t,_,s),Pt=M;O&&AD(In,_,K,ye,ke,Be,Q,bt),[this.firestore,this.persistenceEnabled$]=(0,Oo.cc)(`${In.name}.firestore`,"AngularFirestore",In.name,()=>{const Bn=_.runOutsideAngular(()=>In.firestore());if(l&&Bn.settings(l),Pt&&Bn.useEmulator(...Pt),a&&!Fa(p)){const xa=()=>{try{return(0,dn.D)(Bn.enablePersistence(A||void 0).then(()=>!0,()=>!1))}catch(_w){return"undefined"!=typeof console&&console.warn(_w),(0,Qe.of)(!1)}};return[Bn,_.runOutsideAngular(xa)]}return[Bn,(0,Qe.of)(!1)]},[l,Pt,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=Nf(a,s),_=this.schedulers.ngZone.run(()=>l);return new ND(_,p,this)}collectionGroup(t,s){const a=s||(p=>p),l=this.firestore.collectionGroup(t);return new PD(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new MD(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Oo.Dh),E.LFG(Oo.xv,8),E.LFG(OD,8),E.LFG(sx,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG($r.HU),E.LFG(kD,8),E.LFG(Jc,8),E.LFG(E_,8),E.LFG(mw,8),E.LFG(CD,8),E.LFG(DD,8),E.LFG(yw,8),E.LFG(TD,8),E.LFG(SD,8),E.LFG(fw,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ox=(()=>{class n{constructor(){v_.Z.registerVersion("angularfire",$r.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:OD,useValue:!0},{provide:kD,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:[C_]}),n})(),ax=(()=>{class n{constructor(t){this.firestore=t}get(t){return this.firestore.collection(t).snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(C_))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ux(n,e){if(1&n&&(E.TgZ(0,"div",1),E.TgZ(1,"h1"),E._uU(2),E.qZA(),E._uU(3),E.ALo(4,"json"),E.qZA()),2&n){const t=e.$implicit;E.xp6(2),E.hij("Paciente: ",t.Nombre,""),E.xp6(1),E.hij(" ",E.lcZ(4,2,t)," ")}}const cx=[{path:"",component:(()=>{class n{constructor(t){this.firestore=t}ngOnInit(){this.get("Pacientes")}get(t){this.firestore.get(t).subscribe(s=>{this.pacientes=[],s.forEach(a=>{this.pacientes.push(Object.assign({id:a.payload.doc.id},a.payload.doc.data())),console.log(this.pacientes)})})}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(ax))},n.\u0275cmp=E.Xpm({type:n,selectors:[["app-pacientes"]],decls:2,vars:1,consts:[["class","row mt-3",4,"ngFor","ngForOf"],[1,"row","mt-3"]],template:function(t,s){1&t&&(E.TgZ(0,"div"),E.YNc(1,ux,5,4,"div",0),E.qZA()),2&t&&(E.xp6(1),E.Q6J("ngForOf",s.pacientes))},directives:[Ai],pipes:[Pf],styles:[""]}),n})()}];let LD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({imports:[[J_.forRoot(cx)],J_]}),n})(),VD=(()=>{class n{constructor(){this.title="drsimivirtual"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=E.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,s){1&t&&E._UZ(0,"router-outlet")},directives:[Am],styles:[""]}),n})();const UD_firebase={apiKey:"AIzaSyBLVnDVDytapkiYxkEMlVIP01gjh4twJds",authDomain:"drsimivirutal.firebaseapp.com",projectId:"drsimivirutal",storageBucket:"drsimivirutal.appspot.com",messagingSenderId:"1016167499658",appId:"1:1016167499658:web:632156f5a8455005d3aa73",measurementId:"G-ET6HHFWHGB"};let lx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n,bootstrap:[VD]}),n.\u0275inj=E.cJS({providers:[],imports:[[Ka,LD,Oo.hO.initializeApp(UD_firebase),ox]]}),n})();(0,E.G48)(),ac().bootstrapModule(lx).catch(n=>console.error(n))},3394:(Ye,Ee,L)=>{"use strict";L.d(Ee,{Z:()=>we});var E=L(3854),X=L(3910),k=L(8026),ce=L(5422);class te{constructor(q,ge){this._delegate=q,this.firebase=ge,(0,k._addComponent)(q,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=q.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this._delegate.automaticDataCollectionEnabled=q}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(q=>{this._delegate.checkDestroyed(),q()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(q,ge=k._DEFAULT_ENTRY_NAME){var fe;this._delegate.checkDestroyed();const he=this._delegate.container.getProvider(q);return!he.isInitialized()&&"EXPLICIT"===(null===(fe=he.getComponent())||void 0===fe?void 0:fe.instantiationMode)&&he.initialize(),he.getImmediate({identifier:ge})}_removeServiceInstance(q,ge=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(q).clearInstance(ge)}_addComponent(q){(0,k._addComponent)(this._delegate,q)}_addOrOverwriteComponent(q){(0,k._addOrOverwriteComponent)(this._delegate,q)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),F=function ee(){const de=function(de){const q={},ge={__esModule:!0,initializeApp:function(ht,fn={}){const gt=k.initializeApp(ht,fn);if((0,E.r3)(q,gt.name))return q[gt.name];const _t=new de(gt,ge);return q[gt.name]=_t,_t},app:he,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function(ht){const fn=ht.name,gt=fn.replace("-compat","");if(k._registerComponent(ht)&&"PUBLIC"===ht.type){const _t=(ot=he())=>{if("function"!=typeof ot[gt])throw pe.create("invalid-app-argument",{appName:fn});return ot[gt]()};void 0!==ht.serviceProps&&(0,E.ZB)(_t,ht.serviceProps),ge[gt]=_t,de.prototype[gt]=function(...ot){return this._getService.bind(this,fn).apply(this,ht.multipleInstances?ot:[])}}return"PUBLIC"===ht.type?ge[gt]:null},removeApp:function(ht){delete q[ht]},useAsService:function(ht,fn){return"serverAuth"===fn?null:fn},modularAPIs:k}};function he(ht){if(!(0,E.r3)(q,ht=ht||k._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:ht});return q[ht]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function(){return Object.keys(q).map(ht=>q[ht])}}),he.App=de,ge}(te);return de.INTERNAL=Object.assign(Object.assign({},de.INTERNAL),{createFirebaseNamespace:ee,extendNamespace:function(ge){(0,E.ZB)(de,ge)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),de}(),V=new ce.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const de=self.firebase.SDK_VERSION;de&&de.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=F;(0,k.registerVersion)("@firebase/app-compat","0.1.11",undefined)},8026:(Ye,Ee,L)=>{"use strict";L.r(Ee),L.d(Ee,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Na,_DEFAULT_ENTRY_NAME:()=>ao,_addComponent:()=>ns,_addOrOverwriteComponent:()=>Ds,_apps:()=>An,_clearComponents:()=>$n,_components:()=>Cs,_getProvider:()=>un,_registerComponent:()=>rs,_removeServiceInstance:()=>jt,deleteApp:()=>er,getApp:()=>dr,getApps:()=>Ce,initializeApp:()=>Tr,onLog:()=>Rt,registerVersion:()=>gi,setLogLevel:()=>Ur});var E=L(8239),X=L(3910),k=L(5422),ce=L(3854);class te{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Lt=>{if(function(et){const De=et.getComponent();return"VERSION"===(null==De?void 0:De.type)}(Lt)){const en=Lt.getImmediate();return`${en.library}/${en.version}`}return null}).filter(Lt=>Lt).join(" ")}}const pe="@firebase/app",ee=new k.Yd("@firebase/app"),ao="[DEFAULT]",Bu={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},An=new Map,Cs=new Map;function ns(et,De){try{et.container.addComponent(De)}catch(Lt){ee.debug(`Component ${De.name} failed to register with FirebaseApp ${et.name}`,Lt)}}function Ds(et,De){et.container.addOrOverwriteComponent(De)}function rs(et){const De=et.name;if(Cs.has(De))return ee.debug(`There were multiple attempts to register component ${De}.`),!1;Cs.set(De,et);for(const Lt of An.values())ns(Lt,et);return!0}function un(et,De){return et.container.getProvider(De)}function jt(et,De,Lt=ao){un(et,De).clearInstance(Lt)}function $n(){Cs.clear()}const Ft=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Et{constructor(De,Lt,en){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Lt),this._name=Lt.name,this._automaticDataCollectionEnabled=Lt.automaticDataCollectionEnabled,this._container=en,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Ft.create("app-deleted",{appName:this._name})}}const Na="9.6.0";function Tr(et,De={}){"object"!=typeof De&&(De={name:De});const Lt=Object.assign({name:ao,automaticDataCollectionEnabled:!1},De),en=Lt.name;if("string"!=typeof en||!en)throw Ft.create("bad-app-name",{appName:String(en)});const pn=An.get(en);if(pn){if((0,ce.vZ)(et,pn.options)&&(0,ce.vZ)(Lt,pn.config))return pn;throw Ft.create("duplicate-app",{appName:en})}const Ot=new X.H0(en);for(const We of Cs.values())Ot.addComponent(We);const Ke=new Et(et,Lt,Ot);return An.set(en,Ke),Ke}function dr(et=ao){const De=An.get(et);if(!De)throw Ft.create("no-app",{appName:et});return De}function Ce(){return Array.from(An.values())}function er(et){return xn.apply(this,arguments)}function xn(){return(xn=(0,E.Z)(function*(et){const De=et.name;An.has(De)&&(An.delete(De),yield Promise.all(et.container.getProviders().map(Lt=>Lt.delete())),et.isDeleted=!0)})).apply(this,arguments)}function gi(et,De,Lt){var en;let pn=null!==(en=Bu[et])&&void 0!==en?en:et;Lt&&(pn+=`-${Lt}`);const Ot=pn.match(/\s|\//),Ke=De.match(/\s|\//);if(Ot||Ke){const We=[`Unable to register library "${pn}" with version "${De}":`];return Ot&&We.push(`library name "${pn}" contains illegal characters (whitespace or "/")`),Ot&&Ke&&We.push("and"),Ke&&We.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void ee.warn(We.join(" "))}rs(new X.wA(`${pn}-version`,()=>({library:pn,version:De}),"VERSION"))}function Rt(et,De){if(null!==et&&"function"!=typeof et)throw Ft.create("invalid-log-argument");(0,k.Am)(et,De)}function Ur(et){(0,k.Ub)(et)}rs(new X.wA("platform-logger",De=>new te(De),"PRIVATE")),gi(pe,"0.7.10",""),gi(pe,"0.7.10","esm2017"),gi("fire-js","")},3910:(Ye,Ee,L)=>{"use strict";L.d(Ee,{wA:()=>k,H0:()=>ue});var E=L(8239),X=L(3854);class k{constructor(F,V,Y){this.name=F,this.instanceFactory=V,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(F){return this.instantiationMode=F,this}setMultipleInstances(F){return this.multipleInstances=F,this}setServiceProps(F){return this.serviceProps=F,this}setInstanceCreatedCallback(F){return this.onInstanceCreated=F,this}}const ce="[DEFAULT]";class te{constructor(F,V){this.name=F,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(F){const V=this.normalizeInstanceIdentifier(F);if(!this.instancesDeferred.has(V)){const Y=new X.BH;if(this.instancesDeferred.set(V,Y),this.isInitialized(V)||this.shouldAutoInitialize())try{const Z=this.getOrInitializeService({instanceIdentifier:V});Z&&Y.resolve(Z)}catch(Z){}}return this.instancesDeferred.get(V).promise}getImmediate(F){var V;const Y=this.normalizeInstanceIdentifier(null==F?void 0:F.identifier),Z=null!==(V=null==F?void 0:F.optional)&&void 0!==V&&V;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Z)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(se){if(Z)return null;throw se}}getComponent(){return this.component}setComponent(F){if(F.name!==this.name)throw Error(`Mismatching Component ${F.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=F,this.shouldAutoInitialize()){if("EAGER"===F.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ce})}catch(V){}for(const[V,Y]of this.instancesDeferred.entries()){const Z=this.normalizeInstanceIdentifier(V);try{const se=this.getOrInitializeService({instanceIdentifier:Z});Y.resolve(se)}catch(se){}}}}clearInstance(F=ce){this.instancesDeferred.delete(F),this.instancesOptions.delete(F),this.instances.delete(F)}delete(){var F=this;return(0,E.Z)(function*(){const V=Array.from(F.instances.values());yield Promise.all([...V.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...V.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(F=ce){return this.instances.has(F)}getOptions(F=ce){return this.instancesOptions.get(F)||{}}initialize(F={}){const{options:V={}}=F,Y=this.normalizeInstanceIdentifier(F.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Z=this.getOrInitializeService({instanceIdentifier:Y,options:V});for(const[se,we]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(se)&&we.resolve(Z);return Z}onInit(F,V){var Y;const Z=this.normalizeInstanceIdentifier(V),se=null!==(Y=this.onInitCallbacks.get(Z))&&void 0!==Y?Y:new Set;se.add(F),this.onInitCallbacks.set(Z,se);const we=this.instances.get(Z);return we&&F(we,Z),()=>{se.delete(F)}}invokeOnInitCallbacks(F,V){const Y=this.onInitCallbacks.get(V);if(Y)for(const Z of Y)try{Z(F,V)}catch(se){}}getOrInitializeService({instanceIdentifier:F,options:V={}}){let Y=this.instances.get(F);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ee=F,ee===ce?void 0:ee),options:V}),this.instances.set(F,Y),this.instancesOptions.set(F,V),this.invokeOnInitCallbacks(Y,F),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,F,Y)}catch(Z){}var ee;return Y||null}normalizeInstanceIdentifier(F=ce){return this.component?this.component.multipleInstances?F:ce:F}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(F){this.name=F,this.providers=new Map}addComponent(F){const V=this.getProvider(F.name);if(V.isComponentSet())throw new Error(`Component ${F.name} has already been registered with ${this.name}`);V.setComponent(F)}addOrOverwriteComponent(F){this.getProvider(F.name).isComponentSet()&&this.providers.delete(F.name),this.addComponent(F)}getProvider(F){if(this.providers.has(F))return this.providers.get(F);const V=new te(F,this);return this.providers.set(F,V),V}getProviders(){return Array.from(this.providers.values())}}},5422:(Ye,Ee,L)=>{"use strict";L.d(Ee,{in:()=>X,Yd:()=>pe,Ub:()=>ue,Am:()=>ee});const E=[];var X=(()=>{return(F=X||(X={}))[F.DEBUG=0]="DEBUG",F[F.VERBOSE=1]="VERBOSE",F[F.INFO=2]="INFO",F[F.WARN=3]="WARN",F[F.ERROR=4]="ERROR",F[F.SILENT=5]="SILENT",X;var F})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ce=X.INFO,te={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},re=(F,V,...Y)=>{if(V<F.logLevel)return;const Z=(new Date).toISOString(),se=te[V];if(!se)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[se](`[${Z}]  ${F.name}:`,...Y)};class pe{constructor(V){this.name=V,this._logLevel=ce,this._logHandler=re,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in X))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?k[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...V),this._logHandler(this,X.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...V),this._logHandler(this,X.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,X.INFO,...V),this._logHandler(this,X.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,X.WARN,...V),this._logHandler(this,X.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...V),this._logHandler(this,X.ERROR,...V)}}function ue(F){E.forEach(V=>{V.setLogLevel(F)})}function ee(F,V){for(const Y of E){let Z=null;V&&V.level&&(Z=k[V.level]),Y.userLogHandler=null===F?null:(se,we,...de)=>{const q=de.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch(fe){return null}}).filter(ge=>ge).join(" ");we>=(null!=Z?Z:se.logLevel)&&F({level:X[we].toLowerCase(),message:q,args:de,type:se.name})}}}},8239:(Ye,Ee,L)=>{"use strict";function E(k,ce,te,re,pe,ue,ee){try{var F=k[ue](ee),V=F.value}catch(Y){return void te(Y)}F.done?ce(V):Promise.resolve(V).then(re,pe)}function X(k){return function(){var ce=this,te=arguments;return new Promise(function(re,pe){var ue=k.apply(ce,te);function ee(V){E(ue,re,pe,ee,F,"next",V)}function F(V){E(ue,re,pe,ee,F,"throw",V)}ee(void 0)})}}L.d(Ee,{Z:()=>X})}},Ye=>{Ye(Ye.s=8688)}]);